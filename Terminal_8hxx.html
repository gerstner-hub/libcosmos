<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: include/io/Terminal.hxx File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('Terminal_8hxx.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Terminal.hxx File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;optional&gt;</code><br />
<code>#include &lt;cosmos/fs/FileBase.hxx&gt;</code><br />
<code>#include &lt;cosmos/fs/FileDescriptor.hxx&gt;</code><br />
</div>
<p><a href="Terminal_8hxx_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcosmos_1_1TermDimension.html">cosmos::TermDimension</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a terminal dimension in characters.  <a href="structcosmos_1_1TermDimension.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosmos_1_1Terminal.html">cosmos::Terminal</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access to <a class="el" href="classcosmos_1_1Terminal.html" title="Access to Terminal information and ioctls.">Terminal</a> information and ioctls.  <a href="classcosmos_1_1Terminal.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a21b2cd83fef531cc9d1b304ec7a1f720" id="r_a21b2cd83fef531cc9d1b304ec7a1f720"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a>, <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Terminal_8cxx.html#a21b2cd83fef531cc9d1b304ec7a1f720">cosmos::openPTY</a> (const std::optional&lt; <a class="el" href="structcosmos_1_1TermDimension.html">TermDimension</a> &gt; initial_size={})</td></tr>
<tr class="memdesc:a21b2cd83fef531cc9d1b304ec7a1f720"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new pseudo terminal device and returns master/slave file descriptors for it.  <br /></td></tr>
<tr class="separator:a21b2cd83fef531cc9d1b304ec7a1f720"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This header contains types and helper concerned with terminal / TTY features of the operating system. </p>

<p class="definition">Definition in file <a class="el" href="Terminal_8hxx_source.html">Terminal.hxx</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a21b2cd83fef531cc9d1b304ec7a1f720" name="a21b2cd83fef531cc9d1b304ec7a1f720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b2cd83fef531cc9d1b304ec7a1f720">&#9670;&#160;</a></span>openPTY()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::pair&lt; <a class="el" href="classcosmos_1_1FileDescriptor.html">cosmos::FileDescriptor</a>, <a class="el" href="classcosmos_1_1FileDescriptor.html">cosmos::FileDescriptor</a> &gt; cosmos::openPTY </td>
          <td>(</td>
          <td class="paramtype">const std::optional&lt; <a class="el" href="structcosmos_1_1TermDimension.html">TermDimension</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>initial_size</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new pseudo terminal device and returns master/slave file descriptors for it. </p>
<p>A pseudo terminal is a virtual terminal where the slave end behaves like an actual terminal device and can be passed to applications that expect one. The master end drives the application using the slave end.</p>
<p>Any writes to the master end will appear as input from a keyboard to the slave, any writes to the slave end will appear as output data from a program on the master end.</p>
<p>See openpty(2) and pty(7) man pages for more information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initial_size</td><td>if provided then this will be the initial PTY dimension registered by the kernel. See Terminal::setSize().</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pair of the master and slave file descriptor belonging to the new PTY. The caller is responsible for managing the lifetime of the returned file descriptors (i.e. closing them at the appropriate time). On error an ApiError exception is thrown. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Terminal_8cxx_source.html#l00063">63</a> of file <a class="el" href="Terminal_8cxx_source.html">Terminal.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>                                                                                               {</div>
<div class="line"><span class="lineno">   64</span>        <span class="keywordtype">int</span> master, slave;</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>        <span class="comment">// the name parameter is unsafe since there is no standardized</span></div>
<div class="line"><span class="lineno">   67</span>        <span class="comment">// dimension limit.</span></div>
<div class="line"><span class="lineno">   68</span>        <span class="comment">// the other parameters are for setting initial TTY properties and</span></div>
<div class="line"><span class="lineno">   69</span>        <span class="comment">// terminal size.</span></div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>        <span class="keyword">const</span> <span class="keyword">struct </span>winsize *size = initial_size ? &amp;(*initial_size) : <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">if</span> (::openpty(&amp;master, &amp;slave, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, size) &lt; 0) {</div>
<div class="line"><span class="lineno">   74</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;openpty()&quot;</span>));</div>
<div class="line"><span class="lineno">   75</span>        }</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">return</span> {</div>
<div class="line"><span class="lineno">   78</span>                <a class="code hl_class" href="classcosmos_1_1FileDescriptor.html">cosmos::FileDescriptor</a>(FileNum{master}),</div>
<div class="line"><span class="lineno">   79</span>                <a class="code hl_class" href="classcosmos_1_1FileDescriptor.html">cosmos::FileDescriptor</a>(FileNum{slave})</div>
<div class="line"><span class="lineno">   80</span>        };</div>
<div class="line"><span class="lineno">   81</span>}</div>
<div class="ttc" id="aclasscosmos_1_1FileDescriptor_html"><div class="ttname"><a href="classcosmos_1_1FileDescriptor.html">cosmos::FileDescriptor</a></div><div class="ttdoc">Thin Wrapper around OS file descriptors.</div><div class="ttdef"><b>Definition</b> <a href="FileDescriptor_8hxx_source.html#l00035">FileDescriptor.hxx:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_a00b633439466cbb1729245c7f66f564.html">io</a></li><li class="navelem"><a class="el" href="Terminal_8hxx.html">Terminal.hxx</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
