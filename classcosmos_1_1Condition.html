<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: cosmos::Condition Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcosmos_1_1Condition.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classcosmos_1_1Condition-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cosmos::Condition Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A class to represent a pthread condition.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>&gt;</code></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for cosmos::Condition:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classcosmos_1_1Condition.png" usemap="#cosmos::Condition_map" alt=""/>
  <map id="cosmos::Condition_map" name="cosmos::Condition_map">
<area href="classcosmos_1_1ConditionMutex.html" title="An aggregate of a Mutex and a Condition coupled together for typical Condition usage." alt="cosmos::ConditionMutex" shape="rect" coords="0,56,147,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1455bb16889ea52d35e3769d1cd22603" id="r_a1455bb16889ea52d35e3769d1cd22603"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1455bb16889ea52d35e3769d1cd22603">WaitTimedRes</a> { <b>TIMED_OUT</b>
, <b>SIGNALED</b>
 }</td></tr>
<tr class="memdesc:a1455bb16889ea52d35e3769d1cd22603"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strong type to express <a class="el" href="#a9d923bad2cb63c74af6225110791e766" title="Wait for the Condition to be signaled with timeout.">waitTimed()</a> results.  <a href="#a1455bb16889ea52d35e3769d1cd22603">More...</a><br /></td></tr>
<tr class="separator:a1455bb16889ea52d35e3769d1cd22603"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adbd23ca0ae90e1ecab7aec11f5fc2c18" id="r_adbd23ca0ae90e1ecab7aec11f5fc2c18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbd23ca0ae90e1ecab7aec11f5fc2c18">Condition</a> (<a class="el" href="classcosmos_1_1Mutex.html">Mutex</a> &amp;lock)</td></tr>
<tr class="memdesc:adbd23ca0ae90e1ecab7aec11f5fc2c18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a condition coupled with the given <code>lock</code>.  <br /></td></tr>
<tr class="separator:adbd23ca0ae90e1ecab7aec11f5fc2c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb07aec578c6894465fdb5b5f9e8d8a9" id="r_acb07aec578c6894465fdb5b5f9e8d8a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb07aec578c6894465fdb5b5f9e8d8a9">wait</a> () const</td></tr>
<tr class="memdesc:acb07aec578c6894465fdb5b5f9e8d8a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> to be signaled.  <br /></td></tr>
<tr class="separator:acb07aec578c6894465fdb5b5f9e8d8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d923bad2cb63c74af6225110791e766" id="r_a9d923bad2cb63c74af6225110791e766"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a1455bb16889ea52d35e3769d1cd22603">WaitTimedRes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d923bad2cb63c74af6225110791e766">waitTimed</a> (const <a class="el" href="classcosmos_1_1TimeSpec.html">MonotonicTime</a> ts) const</td></tr>
<tr class="memdesc:a9d923bad2cb63c74af6225110791e766"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> to be signaled with timeout.  <br /></td></tr>
<tr class="separator:a9d923bad2cb63c74af6225110791e766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0049e5a9be9831113a8aa53fea52c7bd" id="r_a0049e5a9be9831113a8aa53fea52c7bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0049e5a9be9831113a8aa53fea52c7bd">signal</a> ()</td></tr>
<tr class="memdesc:a0049e5a9be9831113a8aa53fea52c7bd"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcosmos_1_1Signal.html" title="Represents a POSIX signal number and offers a minimal API around it.">Signal</a> and unblock one waiting thread.  <br /></td></tr>
<tr class="separator:a0049e5a9be9831113a8aa53fea52c7bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa81d7fc1d363bd9e5f2ef2f5db43cb6e" id="r_aa81d7fc1d363bd9e5f2ef2f5db43cb6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa81d7fc1d363bd9e5f2ef2f5db43cb6e">broadcast</a> ()</td></tr>
<tr class="memdesc:aa81d7fc1d363bd9e5f2ef2f5db43cb6e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcosmos_1_1Signal.html" title="Represents a POSIX signal number and offers a minimal API around it.">Signal</a> and unblock all waiting threads.  <br /></td></tr>
<tr class="separator:aa81d7fc1d363bd9e5f2ef2f5db43cb6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25d510ef32affcfeaf89e10f8436644" id="r_af25d510ef32affcfeaf89e10f8436644"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1Mutex.html">Mutex</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af25d510ef32affcfeaf89e10f8436644">mutex</a> ()</td></tr>
<tr class="separator:af25d510ef32affcfeaf89e10f8436644"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa4b6ff0b91e6d9852f60f1d14482c5f5" id="r_aa4b6ff0b91e6d9852f60f1d14482c5f5"><td class="memItemLeft" align="right" valign="top">pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4b6ff0b91e6d9852f60f1d14482c5f5">m_pcond</a></td></tr>
<tr class="separator:aa4b6ff0b91e6d9852f60f1d14482c5f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6240bd568f8258724be3d7d36325fe1d" id="r_a6240bd568f8258724be3d7d36325fe1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1Mutex.html">Mutex</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6240bd568f8258724be3d7d36325fe1d">m_lock</a></td></tr>
<tr class="separator:a6240bd568f8258724be3d7d36325fe1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class to represent a pthread condition. </p>
<p>The current implementation only provides the most basic condition operations. Refer to the POSIX man pages for more information.</p>
<p>A condition allows to efficiently wait for a certain program condition to be reached. A thread typically evaluates some program state, owning a <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a>, and if there is no work to be done it invokes <a class="el" href="#acb07aec578c6894465fdb5b5f9e8d8a9" title="Wait for the Condition to be signaled.">wait()</a> on the <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> which atomically unlocks the <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a> and waits for another thread to signal the condition.</p>
<p>There are some caveats to be considered:</p>
<ul>
<li>A condition can only ever be used with the same <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a> it is coupled to.</li>
<li>A condition can experience "spurious wakeups" i.e. it will be signaled but the program state did not actually change. Therefore you always need to check after wakeup whether the condition actually is as expected. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00033">33</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a1455bb16889ea52d35e3769d1cd22603" name="a1455bb16889ea52d35e3769d1cd22603"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1455bb16889ea52d35e3769d1cd22603">&#9670;&#160;</a></span>WaitTimedRes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#a1455bb16889ea52d35e3769d1cd22603">cosmos::Condition::WaitTimedRes</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Strong type to express <a class="el" href="#a9d923bad2cb63c74af6225110791e766" title="Wait for the Condition to be signaled with timeout.">waitTimed()</a> results. </p>

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00041">41</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   41</span>                                {</div>
<div class="line"><span class="lineno">   42</span>                TIMED_OUT,</div>
<div class="line"><span class="lineno">   43</span>                <a class="code hl_enumvalue" href="signal_8hxx.html#a645d10ea183d9b5c37baf43dd6e5d0d8a07eca31f01cc711a3d380d341676b853">SIGNALED</a></div>
<div class="line"><span class="lineno">   44</span>        };</div>
<div class="ttc" id="asignal_8hxx_html_a645d10ea183d9b5c37baf43dd6e5d0d8a07eca31f01cc711a3d380d341676b853"><div class="ttname"><a href="signal_8hxx.html#a645d10ea183d9b5c37baf43dd6e5d0d8a07eca31f01cc711a3d380d341676b853">cosmos::signal::WaitRes::SIGNALED</a></div><div class="ttdeci">@ SIGNALED</div><div class="ttdoc">a signal has been caught.</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adbd23ca0ae90e1ecab7aec11f5fc2c18" name="adbd23ca0ae90e1ecab7aec11f5fc2c18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd23ca0ae90e1ecab7aec11f5fc2c18">&#9670;&#160;</a></span>Condition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::Condition::Condition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcosmos_1_1Mutex.html">Mutex</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>lock</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a condition coupled with the given <code>lock</code>. </p>
<p>The given <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a> will be associated with the <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> for the complete lifetime of the object. You need to make sure that <code>lock</code> is never destroyed before the associated <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> object is destroyed. </p>

<p class="definition">Definition at line <a class="el" href="Condition_8cxx_source.html#l00007">7</a> of file <a class="el" href="Condition_8cxx_source.html">Condition.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    7</span>                                :</div>
<div class="line"><span class="lineno">    8</span>                m_lock{lock} {</div>
<div class="line"><span class="lineno">    9</span>        <span class="keywordtype">int</span> res = -1;</div>
<div class="line"><span class="lineno">   10</span> </div>
<div class="line"><span class="lineno">   11</span>        pthread_condattr_t attr;</div>
<div class="line"><span class="lineno">   12</span> </div>
<div class="line"><span class="lineno">   13</span>        res = pthread_condattr_init(&amp;attr);</div>
<div class="line"><span class="lineno">   14</span> </div>
<div class="line"><span class="lineno">   15</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> err = Errno{res}; err != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">   16</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_condattr_init()&quot;</span>, err));</div>
<div class="line"><span class="lineno">   17</span>        }</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   20</span>                <span class="comment">/*</span></div>
<div class="line"><span class="lineno">   21</span><span class="comment">                 * we need the monotonic clock for time based wait</span></div>
<div class="line"><span class="lineno">   22</span><span class="comment">                 * operations on the condition, it&#39;s the most robust</span></div>
<div class="line"><span class="lineno">   23</span><span class="comment">                 * clock available</span></div>
<div class="line"><span class="lineno">   24</span><span class="comment">                 */</span></div>
<div class="line"><span class="lineno">   25</span>                res = pthread_condattr_setclock(&amp;attr, to_integral(ClockType::MONOTONIC));</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> err = Errno{res}; err != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">   28</span>                        cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_condattr_setclock()&quot;</span>, err));</div>
<div class="line"><span class="lineno">   29</span>                }</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>                res = ::pthread_cond_init(&amp;m_pcond, &amp;attr);</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> err = Errno{res}; err != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">   34</span>                        cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_cond_init()&quot;</span>, err));</div>
<div class="line"><span class="lineno">   35</span>                }</div>
<div class="line"><span class="lineno">   36</span>        } <span class="keywordflow">catch</span>(...) {</div>
<div class="line"><span class="lineno">   37</span>                (void)pthread_condattr_destroy(&amp;attr);</div>
<div class="line"><span class="lineno">   38</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">   39</span>        }</div>
<div class="line"><span class="lineno">   40</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adb769e203a2e61379121e4e6845c5d62" name="adb769e203a2e61379121e4e6845c5d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb769e203a2e61379121e4e6845c5d62">&#9670;&#160;</a></span>~Condition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::Condition::~Condition </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00057">57</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>                     {</div>
<div class="line"><span class="lineno">   58</span>                <span class="keyword">const</span> <span class="keyword">auto</span> destroy_res = ::pthread_cond_destroy(&amp;m_pcond);</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>                assert (!destroy_res);</div>
<div class="line"><span class="lineno">   61</span>                (void)destroy_res;</div>
<div class="line"><span class="lineno">   62</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa81d7fc1d363bd9e5f2ef2f5db43cb6e" name="aa81d7fc1d363bd9e5f2ef2f5db43cb6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa81d7fc1d363bd9e5f2ef2f5db43cb6e">&#9670;&#160;</a></span>broadcast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::Condition::broadcast </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classcosmos_1_1Signal.html" title="Represents a POSIX signal number and offers a minimal API around it.">Signal</a> and unblock all waiting threads. </p>
<p>All threads currently waiting for a signal on the condition will be woken up. Keep in mind that each thread will contend for acquiring the mutex at wakeup and thus a certain serialization will take place until all threads evaluated the new program state and release the mutex again. </p>

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00124">124</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  124</span>                         {</div>
<div class="line"><span class="lineno">  125</span>                <span class="keyword">auto</span> res = ::pthread_cond_broadcast(&amp;m_pcond);</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> err = Errno{res}; err != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">  128</span>                        cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_cond_broadcast()&quot;</span>, err));</div>
<div class="line"><span class="lineno">  129</span>                }</div>
<div class="line"><span class="lineno">  130</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af25d510ef32affcfeaf89e10f8436644" name="af25d510ef32affcfeaf89e10f8436644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af25d510ef32affcfeaf89e10f8436644">&#9670;&#160;</a></span>mutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcosmos_1_1Mutex.html">Mutex</a> &amp; cosmos::Condition::mutex </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00132">132</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  132</span>{ <span class="keywordflow">return</span> m_lock; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0049e5a9be9831113a8aa53fea52c7bd" name="a0049e5a9be9831113a8aa53fea52c7bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0049e5a9be9831113a8aa53fea52c7bd">&#9670;&#160;</a></span>signal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::Condition::signal </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classcosmos_1_1Signal.html" title="Represents a POSIX signal number and offers a minimal API around it.">Signal</a> and unblock one waiting thread. </p>
<p>This call will unblock at most one thread waiting for a signal on the condition. If multiple threads are waiting for a signal then the rest of the thread will not be woken up.</p>
<p>This call will not block the caller. If not thread is currently waiting for a signal then nothing happens. </p>

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00108">108</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>                      {</div>
<div class="line"><span class="lineno">  109</span>                <span class="keyword">auto</span> res = ::pthread_cond_signal(&amp;m_pcond);</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> err = Errno{res}; err != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">  112</span>                        cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_cond_signal()&quot;</span>, err));</div>
<div class="line"><span class="lineno">  113</span>                }</div>
<div class="line"><span class="lineno">  114</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb07aec578c6894465fdb5b5f9e8d8a9" name="acb07aec578c6894465fdb5b5f9e8d8a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb07aec578c6894465fdb5b5f9e8d8a9">&#9670;&#160;</a></span>wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::Condition::wait </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for the <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> to be signaled. </p>
<p>The associated <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a> must already be locked at entry, otherwise undefined behaviour is the result.</p>
<p>Upon return the <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a> will again be owned by the caller. </p>

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00071">71</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>                          {</div>
<div class="line"><span class="lineno">   72</span>                <span class="keyword">auto</span> res = ::pthread_cond_wait(&amp;m_pcond, &amp;(m_lock.m_pmutex));</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> err = Errno{res}; err != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">   75</span>                        cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_cond_wait()&quot;</span>, Errno{err}));</div>
<div class="line"><span class="lineno">   76</span>                }</div>
<div class="line"><span class="lineno">   77</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d923bad2cb63c74af6225110791e766" name="a9d923bad2cb63c74af6225110791e766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d923bad2cb63c74af6225110791e766">&#9670;&#160;</a></span>waitTimed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a1455bb16889ea52d35e3769d1cd22603">WaitTimedRes</a> cosmos::Condition::waitTimed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1TimeSpec.html">MonotonicTime</a></td>          <td class="paramname"><span class="paramname"><em>ts</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for the <a class="el" href="classcosmos_1_1Condition.html" title="A class to represent a pthread condition.">Condition</a> to be signaled with timeout. </p>
<p>This is like <a class="el" href="#acb07aec578c6894465fdb5b5f9e8d8a9" title="Wait for the Condition to be signaled.">wait()</a> but waits at most until the given absolute time has been reached.</p>
<p>Upon return the <a class="el" href="classcosmos_1_1Mutex.html" title="A class to represent a pthread mutex.">Mutex</a> will again be owned by the caller, regardless of whether the condition was signaled or a timeout occurred.</p>
<dl class="section return"><dt>Returns</dt><dd>Whether a timeout or a signal occurred. </dd></dl>

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00089">89</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>                                                             {</div>
<div class="line"><span class="lineno">   90</span>                <span class="keyword">auto</span> res = ::pthread_cond_timedwait(&amp;m_pcond, &amp;(m_lock.m_pmutex), &amp;ts);</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>                <span class="keywordflow">switch</span>(Errno{res}) {</div>
<div class="line"><span class="lineno">   93</span>                <span class="keywordflow">default</span>: cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_cond_timedwait()&quot;</span>, Errno{res})); <span class="keywordflow">return</span> WaitTimedRes::TIMED_OUT; <span class="comment">/* just to silence compiler warning */</span></div>
<div class="line"><span class="lineno">   94</span>                <span class="keywordflow">case</span> Errno::NO_ERROR: <span class="keywordflow">return</span> WaitTimedRes::SIGNALED;</div>
<div class="line"><span class="lineno">   95</span>                <span class="keywordflow">case</span> Errno::TIMEDOUT: <span class="keywordflow">return</span> WaitTimedRes::TIMED_OUT;</div>
<div class="line"><span class="lineno">   96</span>                }</div>
<div class="line"><span class="lineno">   97</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6240bd568f8258724be3d7d36325fe1d" name="a6240bd568f8258724be3d7d36325fe1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6240bd568f8258724be3d7d36325fe1d">&#9670;&#160;</a></span>m_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcosmos_1_1Mutex.html">Mutex</a>&amp; cosmos::Condition::m_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00138">138</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>

</div>
</div>
<a id="aa4b6ff0b91e6d9852f60f1d14482c5f5" name="aa4b6ff0b91e6d9852f60f1d14482c5f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b6ff0b91e6d9852f60f1d14482c5f5">&#9670;&#160;</a></span>m_pcond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t cosmos::Condition::m_pcond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Condition_8hxx_source.html#l00137">137</a> of file <a class="el" href="Condition_8hxx_source.html">Condition.hxx</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/thread/<a class="el" href="Condition_8hxx_source.html">Condition.hxx</a></li>
<li>src/thread/<a class="el" href="Condition_8cxx_source.html">Condition.cxx</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cosmos</b></li><li class="navelem"><a class="el" href="classcosmos_1_1Condition.html">Condition</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
