<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: cosmos::DirStream Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcosmos_1_1DirStream.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classcosmos_1_1DirStream-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cosmos::DirStream Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Access directory contents in the file system.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8b5f428713daf32812ddd1d5b5e94605" id="r_a8b5f428713daf32812ddd1d5b5e94605"><td class="memItemLeft" align="right" valign="top"><a id="a8b5f428713daf32812ddd1d5b5e94605" name="a8b5f428713daf32812ddd1d5b5e94605"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DirStream</b> ()=default</td></tr>
<tr class="memdesc:a8b5f428713daf32812ddd1d5b5e94605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an object not associated with a directory. <br /></td></tr>
<tr class="separator:a8b5f428713daf32812ddd1d5b5e94605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0e464ee9b5271644da99d42d027f8e3" id="r_ac0e464ee9b5271644da99d42d027f8e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0e464ee9b5271644da99d42d027f8e3">DirStream</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> <a class="el" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>)</td></tr>
<tr class="memdesc:ac0e464ee9b5271644da99d42d027f8e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> using the given file descriptor.  <br /></td></tr>
<tr class="separator:ac0e464ee9b5271644da99d42d027f8e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1c0f4d30887609efe512871e257a3d" id="r_a9e1c0f4d30887609efe512871e257a3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e1c0f4d30887609efe512871e257a3d">DirStream</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> <a class="el" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> subpath)</td></tr>
<tr class="memdesc:a9e1c0f4d30887609efe512871e257a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the directory <code>subpath</code> relative to <code>fd</code>.  <br /></td></tr>
<tr class="separator:a9e1c0f4d30887609efe512871e257a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad816d6d78f0cfb6dbf02f56a57f2b35" id="r_aad816d6d78f0cfb6dbf02f56a57f2b35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad816d6d78f0cfb6dbf02f56a57f2b35">DirStream</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:aad816d6d78f0cfb6dbf02f56a57f2b35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object operating on the directory at the given path location.  <br /></td></tr>
<tr class="separator:aad816d6d78f0cfb6dbf02f56a57f2b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8437fa48b909f0da689a22c214bd6ab1" id="r_a8437fa48b909f0da689a22c214bd6ab1"><td class="memItemLeft" align="right" valign="top"><a id="a8437fa48b909f0da689a22c214bd6ab1" name="a8437fa48b909f0da689a22c214bd6ab1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DirStream</b> (const <a class="el" href="classcosmos_1_1DirStream.html">DirStream</a> &amp;)=delete</td></tr>
<tr class="separator:a8437fa48b909f0da689a22c214bd6ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61193b6c1f403a37c62806556bb7e574" id="r_a61193b6c1f403a37c62806556bb7e574"><td class="memItemLeft" align="right" valign="top"><a id="a61193b6c1f403a37c62806556bb7e574" name="a61193b6c1f403a37c62806556bb7e574"></a>
<a class="el" href="classcosmos_1_1DirStream.html">DirStream</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classcosmos_1_1DirStream.html">DirStream</a> &amp;)=delete</td></tr>
<tr class="separator:a61193b6c1f403a37c62806556bb7e574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb7945b497289fc1e7b5b8e0ffbcd3e" id="r_a5eb7945b497289fc1e7b5b8e0ffbcd3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5eb7945b497289fc1e7b5b8e0ffbcd3e">~DirStream</a> ()</td></tr>
<tr class="memdesc:a5eb7945b497289fc1e7b5b8e0ffbcd3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the underlying directory object, if currently open.  <br /></td></tr>
<tr class="separator:a5eb7945b497289fc1e7b5b8e0ffbcd3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe6d3df41baf0536aac6126c04efaef" id="r_abbe6d3df41baf0536aac6126c04efaef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abbe6d3df41baf0536aac6126c04efaef">close</a> ()</td></tr>
<tr class="memdesc:abbe6d3df41baf0536aac6126c04efaef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the currently associated directory.  <br /></td></tr>
<tr class="separator:abbe6d3df41baf0536aac6126c04efaef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a13744742be11185b48cdeec27d987" id="r_a78a13744742be11185b48cdeec27d987"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78a13744742be11185b48cdeec27d987">open</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> <a class="el" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>)</td></tr>
<tr class="memdesc:a78a13744742be11185b48cdeec27d987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate with the directory represented by the given file descriptor.  <br /></td></tr>
<tr class="separator:a78a13744742be11185b48cdeec27d987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4d2e6850b951db5169abe557e49540" id="r_acb4d2e6850b951db5169abe557e49540"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb4d2e6850b951db5169abe557e49540">open</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> subpath)</td></tr>
<tr class="memdesc:acb4d2e6850b951db5169abe557e49540"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the directory <code>subpath</code> relative to <code>fd</code>.  <br /></td></tr>
<tr class="separator:acb4d2e6850b951db5169abe557e49540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07f72e6e1fde3b56f85d409da3109674" id="r_a07f72e6e1fde3b56f85d409da3109674"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07f72e6e1fde3b56f85d409da3109674">open</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a> follow_links=<a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a>{false})</td></tr>
<tr class="memdesc:a07f72e6e1fde3b56f85d409da3109674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate with the directory at the given file system path location.  <br /></td></tr>
<tr class="separator:a07f72e6e1fde3b56f85d409da3109674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e28e6a5351ea32cf0fa4252ef274a7" id="r_af6e28e6a5351ea32cf0fa4252ef274a7"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6e28e6a5351ea32cf0fa4252ef274a7">isOpen</a> () const</td></tr>
<tr class="memdesc:af6e28e6a5351ea32cf0fa4252ef274a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether currently a directory is associated with this object.  <br /></td></tr>
<tr class="separator:af6e28e6a5351ea32cf0fa4252ef274a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a854bd3be2b4bc73a86b8637e68abf9a8" id="r_a854bd3be2b4bc73a86b8637e68abf9a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1DirFD.html">DirFD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a> () const</td></tr>
<tr class="memdesc:a854bd3be2b4bc73a86b8637e68abf9a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the file descriptor associated with the current <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object.  <br /></td></tr>
<tr class="separator:a854bd3be2b4bc73a86b8637e68abf9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d01eae55ec630797237584f8cf6c7fa" id="r_a8d01eae55ec630797237584f8cf6c7fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1DirEntry.html#a7d92f5731ba229926bb6a18acc44ca61">DirEntry::DirPos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d01eae55ec630797237584f8cf6c7fa">tell</a> () const</td></tr>
<tr class="memdesc:a8d01eae55ec630797237584f8cf6c7fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current position in the directory iteration.  <br /></td></tr>
<tr class="separator:a8d01eae55ec630797237584f8cf6c7fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1f9afe9af8fe9e0f311868b3772875" id="r_aaa1f9afe9af8fe9e0f311868b3772875"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa1f9afe9af8fe9e0f311868b3772875">seek</a> (const <a class="el" href="classcosmos_1_1DirEntry.html#a7d92f5731ba229926bb6a18acc44ca61">DirEntry::DirPos</a> pos)</td></tr>
<tr class="memdesc:aaa1f9afe9af8fe9e0f311868b3772875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the directory iterator to the given position.  <br /></td></tr>
<tr class="separator:aaa1f9afe9af8fe9e0f311868b3772875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4e80c526e9b0404456799ecf7bd68d" id="r_a9a4e80c526e9b0404456799ecf7bd68d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a4e80c526e9b0404456799ecf7bd68d">rewind</a> ()</td></tr>
<tr class="memdesc:a9a4e80c526e9b0404456799ecf7bd68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rewind the directory stream to the beginning.  <br /></td></tr>
<tr class="separator:a9a4e80c526e9b0404456799ecf7bd68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa68bab33dac058b7cab79a966f6a09e" id="r_aaa68bab33dac058b7cab79a966f6a09e"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="classcosmos_1_1DirEntry.html">DirEntry</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa68bab33dac058b7cab79a966f6a09e">nextEntry</a> ()</td></tr>
<tr class="memdesc:aaa68bab33dac058b7cab79a966f6a09e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next entry in the associated directory.  <br /></td></tr>
<tr class="separator:aaa68bab33dac058b7cab79a966f6a09e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a029b95985b8cc1cb7398cd77b8ab35de" id="r_a029b95985b8cc1cb7398cd77b8ab35de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a029b95985b8cc1cb7398cd77b8ab35de">open</a> (const <a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a> <a class="el" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>)</td></tr>
<tr class="separator:a029b95985b8cc1cb7398cd77b8ab35de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a0396d1409ca181251a45cfebb8c39" id="r_a26a0396d1409ca181251a45cfebb8c39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26a0396d1409ca181251a45cfebb8c39">requireOpenStream</a> (const std::string_view context) const</td></tr>
<tr class="separator:a26a0396d1409ca181251a45cfebb8c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:adc1f8fe00a768e3e5cc381bb4be3a662" id="r_adc1f8fe00a768e3e5cc381bb4be3a662"><td class="memItemLeft" align="right" valign="top">DIR *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc1f8fe00a768e3e5cc381bb4be3a662">m_stream</a> = nullptr</td></tr>
<tr class="separator:adc1f8fe00a768e3e5cc381bb4be3a662"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Access directory contents in the file system. </p>
<p>Using this type you can open directories in the file system either by path or by using an already opened <a class="el" href="classcosmos_1_1Directory.html" title="Representation of open directory file descriptors.">Directory</a> file descriptor. The directory contents can then be iterated over.</p>
<p>Note that the directory contents will be returned by the operating system in an undefined order (i.e. not alphabetically or otherwise sorted). Also entries for "." and ".." by convention should show up and often need to be filtered by applications, if necessary. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00030">30</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac0e464ee9b5271644da99d42d027f8e3" name="ac0e464ee9b5271644da99d42d027f8e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e464ee9b5271644da99d42d027f8e3">&#9670;&#160;</a></span>DirStream() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::DirStream::DirStream </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> using the given file descriptor. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a78a13744742be11185b48cdeec27d987" title="Associate with the directory represented by the given file descriptor.">open(DirFD fd)</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00040">40</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                           {</div>
<div class="line"><span class="lineno">   41</span>                <a class="code hl_function" href="#a78a13744742be11185b48cdeec27d987">open</a>(<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>);</div>
<div class="line"><span class="lineno">   42</span>        }</div>
<div class="ttc" id="aclasscosmos_1_1DirStream_html_a78a13744742be11185b48cdeec27d987"><div class="ttname"><a href="#a78a13744742be11185b48cdeec27d987">cosmos::DirStream::open</a></div><div class="ttdeci">void open(const DirFD fd)</div><div class="ttdoc">Associate with the directory represented by the given file descriptor.</div><div class="ttdef"><b>Definition</b> <a href="DirStream_8cxx_source.html#l00067">DirStream.cxx:67</a></div></div>
<div class="ttc" id="aclasscosmos_1_1DirStream_html_a854bd3be2b4bc73a86b8637e68abf9a8"><div class="ttname"><a href="#a854bd3be2b4bc73a86b8637e68abf9a8">cosmos::DirStream::fd</a></div><div class="ttdeci">DirFD fd() const</div><div class="ttdoc">Return the file descriptor associated with the current DirStream object.</div><div class="ttdef"><b>Definition</b> <a href="DirStream_8cxx_source.html#l00095">DirStream.cxx:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e1c0f4d30887609efe512871e257a3d" name="a9e1c0f4d30887609efe512871e257a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e1c0f4d30887609efe512871e257a3d">&#9670;&#160;</a></span>DirStream() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::DirStream::DirStream </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>subpath</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open the directory <code>subpath</code> relative to <code>fd</code>. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00045">45</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span>                                                           {</div>
<div class="line"><span class="lineno">   46</span>                <a class="code hl_function" href="#a78a13744742be11185b48cdeec27d987">open</a>(<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>, subpath);</div>
<div class="line"><span class="lineno">   47</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aad816d6d78f0cfb6dbf02f56a57f2b35" name="aad816d6d78f0cfb6dbf02f56a57f2b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad816d6d78f0cfb6dbf02f56a57f2b35">&#9670;&#160;</a></span>DirStream() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::DirStream::DirStream </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object operating on the directory at the given path location. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00050">50</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                                 {</div>
<div class="line"><span class="lineno">   51</span>                <a class="code hl_function" href="#a78a13744742be11185b48cdeec27d987">open</a>(path);</div>
<div class="line"><span class="lineno">   52</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5eb7945b497289fc1e7b5b8e0ffbcd3e" name="a5eb7945b497289fc1e7b5b8e0ffbcd3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb7945b497289fc1e7b5b8e0ffbcd3e">&#9670;&#160;</a></span>~DirStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::DirStream::~DirStream </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the underlying directory object, if currently open. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00014">14</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>                      {</div>
<div class="line"><span class="lineno">   15</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   16</span>                <a class="code hl_function" href="#abbe6d3df41baf0536aac6126c04efaef">close</a>();</div>
<div class="line"><span class="lineno">   17</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception &amp;ex) {</div>
<div class="line"><span class="lineno">   18</span>                noncritical_error(</div>
<div class="line"><span class="lineno">   19</span>                                sprintf(<span class="stringliteral">&quot;%s: failed to close directory stream&quot;</span>, __FUNCTION__),</div>
<div class="line"><span class="lineno">   20</span>                                ex);</div>
<div class="line"><span class="lineno">   21</span>        }</div>
<div class="line"><span class="lineno">   22</span>}</div>
<div class="ttc" id="aclasscosmos_1_1DirStream_html_abbe6d3df41baf0536aac6126c04efaef"><div class="ttname"><a href="#abbe6d3df41baf0536aac6126c04efaef">cosmos::DirStream::close</a></div><div class="ttdeci">void close()</div><div class="ttdoc">Close the currently associated directory.</div><div class="ttdef"><b>Definition</b> <a href="DirStream_8cxx_source.html#l00024">DirStream.cxx:24</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abbe6d3df41baf0536aac6126c04efaef" name="abbe6d3df41baf0536aac6126c04efaef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbe6d3df41baf0536aac6126c04efaef">&#9670;&#160;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::close </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the currently associated directory. </p>
<p>This will disassociate the <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object and further attempts to iterate over directory contents will fail.</p>
<p>If closing causes an error then an exception is thrown, but the state of the <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object will be invalidated, to avoid recurring errors trying to <a class="el" href="#abbe6d3df41baf0536aac6126c04efaef" title="Close the currently associated directory.">close()</a> or reuse the object.</p>
<p>If the object is not currently associated with a directory then a call to this function does nothing. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00024">24</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>                      {</div>
<div class="line"><span class="lineno">   25</span>        <span class="keywordflow">if</span> (!m_stream) {</div>
<div class="line"><span class="lineno">   26</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   27</span>        }</div>
<div class="line"><span class="lineno">   28</span> </div>
<div class="line"><span class="lineno">   29</span>        <span class="keyword">auto</span> ret = closedir(m_stream);</div>
<div class="line"><span class="lineno">   30</span>        m_stream = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span>        <span class="keywordflow">if</span> (ret == -1) {</div>
<div class="line"><span class="lineno">   33</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;closedir()&quot;</span>));</div>
<div class="line"><span class="lineno">   34</span>        }</div>
<div class="line"><span class="lineno">   35</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a854bd3be2b4bc73a86b8637e68abf9a8" name="a854bd3be2b4bc73a86b8637e68abf9a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a854bd3be2b4bc73a86b8637e68abf9a8">&#9670;&#160;</a></span>fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> cosmos::DirStream::fd </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the file descriptor associated with the current <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object. </p>
<p>The caller must not modify the state of this file descriptor, otherwise further attempts to iterate over directory contents will result in undefined behaviour. The file descriptor will become invalid after <a class="el" href="#abbe6d3df41baf0536aac6126c04efaef" title="Close the currently associated directory.">close()</a> is invoked. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00095">95</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span>                          {</div>
<div class="line"><span class="lineno">   96</span>        requireOpenStream(__FUNCTION__);</div>
<div class="line"><span class="lineno">   97</span>        <span class="keyword">auto</span> <a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a> = dirfd(m_stream);</div>
<div class="line"><span class="lineno">   98</span>        DirFD ret{<a class="code hl_enumeration" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a>{<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>}};</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">if</span> (ret.invalid()) {</div>
<div class="line"><span class="lineno">  101</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;dirfd()&quot;</span>));</div>
<div class="line"><span class="lineno">  102</span>        }</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  105</span>}</div>
<div class="ttc" id="afs_2types_8hxx_html_a468b915608e0674d5789c5386b72ff92"><div class="ttname"><a href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">cosmos::FileNum</a></div><div class="ttdeci">FileNum</div><div class="ttdoc">Primitive file descriptor.</div><div class="ttdef"><b>Definition</b> <a href="fs_2types_8hxx_source.html#l00032">types.hxx:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6e28e6a5351ea32cf0fa4252ef274a7" name="af6e28e6a5351ea32cf0fa4252ef274a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e28e6a5351ea32cf0fa4252ef274a7">&#9670;&#160;</a></span>isOpen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cosmos::DirStream::isOpen </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates whether currently a directory is associated with this object. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00097">97</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   97</span>{ <span class="keywordflow">return</span> m_stream != <span class="keyword">nullptr</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa68bab33dac058b7cab79a966f6a09e" name="aaa68bab33dac058b7cab79a966f6a09e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa68bab33dac058b7cab79a966f6a09e">&#9670;&#160;</a></span>nextEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="classcosmos_1_1DirEntry.html">DirEntry</a> &gt; cosmos::DirStream::nextEntry </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the next entry in the associated directory. </p>
<p>Calls to this function are only allowed if <a class="el" href="#af6e28e6a5351ea32cf0fa4252ef274a7" title="Indicates whether currently a directory is associated with this object.">isOpen()</a> returns <code>true</code>. The validity of the returned object is tied to the lifetime of the <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> instance it came from. Also any call to <a class="el" href="#aaa68bab33dac058b7cab79a966f6a09e" title="Returns the next entry in the associated directory.">nextEntry()</a> will invalidate previously returned <a class="el" href="classcosmos_1_1DirEntry.html" title="A single directory entry as returned from DirStream::nextEntry().">DirEntry</a> instances returned from the same <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> instance.</p>
<p>When the end of the directory has been reached then <code>nullopt</code> is returned. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00107">107</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  107</span>                                           {</div>
<div class="line"><span class="lineno">  108</span>        requireOpenStream(__FUNCTION__);</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  111</span><span class="comment">         * there&#39;s a bit confusion between readdir and readdir_r(). Today on</span></div>
<div class="line"><span class="lineno">  112</span><span class="comment">         * Linux readdir() is thread-safe between different directory streams</span></div>
<div class="line"><span class="lineno">  113</span><span class="comment">         * but not thread safe when using the same directory stream in</span></div>
<div class="line"><span class="lineno">  114</span><span class="comment">         * parallel. The latter is rather peculiar and should not be needed.</span></div>
<div class="line"><span class="lineno">  115</span><span class="comment">         * Therefore use readdir().</span></div>
<div class="line"><span class="lineno">  116</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>        <span class="comment">// needed to differentiate between end-of-stream and error condition</span></div>
<div class="line"><span class="lineno">  119</span>        <a class="code hl_function" href="errno_8hxx.html#a2c42e0fc1c50ed217f19c917fc369847">reset_errno</a>();</div>
<div class="line"><span class="lineno">  120</span>        <span class="keyword">const</span> <span class="keyword">auto</span> entry = readdir(m_stream);</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">if</span> (entry) {</div>
<div class="line"><span class="lineno">  123</span>                <span class="keywordflow">return</span> DirEntry{entry};</div>
<div class="line"><span class="lineno">  124</span>        }</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="errno_8hxx.html#af9332a080968f52f891ce522f94850fc">is_errno_set</a>()) {</div>
<div class="line"><span class="lineno">  127</span>                cosmos_throw(ApiError(<span class="stringliteral">&quot;readdir()&quot;</span>));</div>
<div class="line"><span class="lineno">  128</span>        }</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  131</span>}</div>
<div class="ttc" id="aerrno_8hxx_html_a2c42e0fc1c50ed217f19c917fc369847"><div class="ttname"><a href="errno_8hxx.html#a2c42e0fc1c50ed217f19c917fc369847">cosmos::reset_errno</a></div><div class="ttdeci">void reset_errno()</div><div class="ttdoc">Resets the currently set errno to indicate no error.</div><div class="ttdef"><b>Definition</b> <a href="errno_8hxx_source.html#l00113">errno.hxx:113</a></div></div>
<div class="ttc" id="aerrno_8hxx_html_af9332a080968f52f891ce522f94850fc"><div class="ttname"><a href="errno_8hxx.html#af9332a080968f52f891ce522f94850fc">cosmos::is_errno_set</a></div><div class="ttdeci">bool is_errno_set()</div><div class="ttdoc">Checks whether currently an errno is set.</div><div class="ttdef"><b>Definition</b> <a href="errno_8hxx_source.html#l00117">errno.hxx:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb4d2e6850b951db5169abe557e49540" name="acb4d2e6850b951db5169abe557e49540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb4d2e6850b951db5169abe557e49540">&#9670;&#160;</a></span>open() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>subpath</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open the directory <code>subpath</code> relative to <code>fd</code>. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00082">82</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>                                                                {</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a> flags{OpenFlag::DIRECTORY};</div>
<div class="line"><span class="lineno">   85</span>        <span class="keyword">auto</span> <a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a> = fs::open_at(dir_fd, subpath, OpenMode::READ_ONLY, flags);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>        <span class="comment">// ownership is transferred to the stream</span></div>
<div class="line"><span class="lineno">   88</span>        m_stream = ::fdopendir(to_integral(<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>.<a class="code hl_function" href="classcosmos_1_1FileDescriptor.html#aa0137047595389228c9cc92c54804c22">raw</a>()));</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">if</span> (!m_stream) {</div>
<div class="line"><span class="lineno">   91</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;fdopendir()&quot;</span>));</div>
<div class="line"><span class="lineno">   92</span>        }</div>
<div class="line"><span class="lineno">   93</span>}</div>
<div class="ttc" id="aclasscosmos_1_1FileDescriptor_html_aa0137047595389228c9cc92c54804c22"><div class="ttname"><a href="classcosmos_1_1FileDescriptor.html#aa0137047595389228c9cc92c54804c22">cosmos::FileDescriptor::raw</a></div><div class="ttdeci">FileNum raw() const</div><div class="ttdoc">Returns the primitive file descriptor contained in the object.</div><div class="ttdef"><b>Definition</b> <a href="FileDescriptor_8hxx_source.html#l00341">FileDescriptor.hxx:341</a></div></div>
<div class="ttc" id="afs_2types_8hxx_html_aae7788b537879e076a546967c72b4922"><div class="ttname"><a href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">cosmos::OpenFlags</a></div><div class="ttdeci">BitMask&lt; OpenFlag &gt; OpenFlags</div><div class="ttdoc">Collection of OpenFlag used for opening files.</div><div class="ttdef"><b>Definition</b> <a href="fs_2types_8hxx_source.html#l00096">types.hxx:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78a13744742be11185b48cdeec27d987" name="a78a13744742be11185b48cdeec27d987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a13744742be11185b48cdeec27d987">&#9670;&#160;</a></span>open() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate with the directory represented by the given file descriptor. </p>
<p>The implementation operates on a duplicate of the given file descriptor. You must not modify the file descriptor's state, otherwise the usage of the <a class="el" href="classcosmos_1_1DirStream.html" title="Access directory contents in the file system.">DirStream</a> object will become undefined.</p>
<p>If the object is already associated with another directory then this previous association will be implicitly <a class="el" href="#abbe6d3df41baf0536aac6126c04efaef" title="Close the currently associated directory.">close()</a>'d. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00067">67</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>                                   {</div>
<div class="line"><span class="lineno">   68</span>        <a class="code hl_function" href="#abbe6d3df41baf0536aac6126c04efaef">close</a>();</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>        <span class="keyword">auto</span> duplicate = <a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>.<a class="code hl_function" href="classcosmos_1_1FileDescriptor.html#aaddf1befa5eac4e155cf1bc13681fc19">duplicate</a>();</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_function" href="#a78a13744742be11185b48cdeec27d987">open</a>(duplicate.raw());</div>
<div class="line"><span class="lineno">   72</span>}</div>
<div class="ttc" id="aclasscosmos_1_1FileDescriptor_html_aaddf1befa5eac4e155cf1bc13681fc19"><div class="ttname"><a href="classcosmos_1_1FileDescriptor.html#aaddf1befa5eac4e155cf1bc13681fc19">cosmos::FileDescriptor::duplicate</a></div><div class="ttdeci">void duplicate(const FileDescriptor new_fd, const CloseOnExec cloexec=CloseOnExec{true}) const</div><div class="ttdoc">Get a duplicate file descriptor that will further be known as new_fd.</div><div class="ttdef"><b>Definition</b> <a href="FileDescriptor_8cxx_source.html#l00038">FileDescriptor.cxx:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a029b95985b8cc1cb7398cd77b8ab35de" name="a029b95985b8cc1cb7398cd77b8ab35de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029b95985b8cc1cb7398cd77b8ab35de">&#9670;&#160;</a></span>open() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00074">74</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>                                     {</div>
<div class="line"><span class="lineno">   75</span>        m_stream = ::fdopendir(to_integral(<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>));</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">if</span> (!m_stream) {</div>
<div class="line"><span class="lineno">   78</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;fdopendir()&quot;</span>));</div>
<div class="line"><span class="lineno">   79</span>        }</div>
<div class="line"><span class="lineno">   80</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a07f72e6e1fde3b56f85d409da3109674" name="a07f72e6e1fde3b56f85d409da3109674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07f72e6e1fde3b56f85d409da3109674">&#9670;&#160;</a></span>open() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a></td>          <td class="paramname"><span class="paramname"><em>follow_links</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a>{false}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate with the directory at the given file system path location. </p>
<p>If the object is already associated with another directory then this previous association will be implicitly <a class="el" href="#abbe6d3df41baf0536aac6126c04efaef" title="Close the currently associated directory.">close()</a>'d. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8cxx_source.html#l00037">37</a> of file <a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>                                                                            {</div>
<div class="line"><span class="lineno">   38</span>        <a class="code hl_function" href="#abbe6d3df41baf0536aac6126c04efaef">close</a>();</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">   41</span><span class="comment">         * reuse the open(DirFD) logic and only open the file</span></div>
<div class="line"><span class="lineno">   42</span><span class="comment">         * descriptor before. This allows us to pass needful flags like</span></div>
<div class="line"><span class="lineno">   43</span><span class="comment">         * O_CLOEXEC. This gives us more control than when using opendir().</span></div>
<div class="line"><span class="lineno">   44</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">   45</span>        <span class="keyword">auto</span> res = <a class="code hl_function" href="#a78a13744742be11185b48cdeec27d987">::open</a>(</div>
<div class="line"><span class="lineno">   46</span>                path.raw(),</div>
<div class="line"><span class="lineno">   47</span>                O_RDONLY | O_CLOEXEC | O_DIRECTORY | (follow_links ? O_NOFOLLOW : 0)</div>
<div class="line"><span class="lineno">   48</span>        );</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>        DirFD <a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>{<a class="code hl_enumeration" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a>{res}};</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>.invalid()) {</div>
<div class="line"><span class="lineno">   53</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;open(O_DIRECTORY)&quot;</span>));</div>
<div class="line"><span class="lineno">   54</span>        }</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   57</span>                <a class="code hl_function" href="#a78a13744742be11185b48cdeec27d987">open</a>(<a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>.<a class="code hl_function" href="classcosmos_1_1FileDescriptor.html#aa0137047595389228c9cc92c54804c22">raw</a>());</div>
<div class="line"><span class="lineno">   58</span>        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">   59</span>                <span class="comment">// intentionally ignore error conditions here</span></div>
<div class="line"><span class="lineno">   60</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   61</span>                        <a class="code hl_function" href="#a854bd3be2b4bc73a86b8637e68abf9a8">fd</a>.<a class="code hl_function" href="classcosmos_1_1FileDescriptor.html#a7d8cb113b20ab2a267a545f878a5c3c8">close</a>();</div>
<div class="line"><span class="lineno">   62</span>                } <span class="keywordflow">catch</span>(...) {}</div>
<div class="line"><span class="lineno">   63</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">   64</span>        }</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="aclasscosmos_1_1FileDescriptor_html_a7d8cb113b20ab2a267a545f878a5c3c8"><div class="ttname"><a href="classcosmos_1_1FileDescriptor.html#a7d8cb113b20ab2a267a545f878a5c3c8">cosmos::FileDescriptor::close</a></div><div class="ttdeci">void close()</div><div class="ttdoc">Explicitly close the contained FD.</div><div class="ttdef"><b>Definition</b> <a href="FileDescriptor_8cxx_source.html#l00017">FileDescriptor.cxx:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26a0396d1409ca181251a45cfebb8c39" name="a26a0396d1409ca181251a45cfebb8c39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a0396d1409ca181251a45cfebb8c39">&#9670;&#160;</a></span>requireOpenStream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::requireOpenStream </td>
          <td>(</td>
          <td class="paramtype">const std::string_view</td>          <td class="paramname"><span class="paramname"><em>context</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00158">158</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>                                                                   {</div>
<div class="line"><span class="lineno">  159</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="#af6e28e6a5351ea32cf0fa4252ef274a7">isOpen</a>()) {</div>
<div class="line"><span class="lineno">  160</span>                        cosmos_throw (UsageError(std::string(context) + <span class="stringliteral">&quot; on unassociated DirStream instance&quot;</span>));</div>
<div class="line"><span class="lineno">  161</span>                }</div>
<div class="line"><span class="lineno">  162</span>        }</div>
<div class="ttc" id="aclasscosmos_1_1DirStream_html_af6e28e6a5351ea32cf0fa4252ef274a7"><div class="ttname"><a href="#af6e28e6a5351ea32cf0fa4252ef274a7">cosmos::DirStream::isOpen</a></div><div class="ttdeci">auto isOpen() const</div><div class="ttdoc">Indicates whether currently a directory is associated with this object.</div><div class="ttdef"><b>Definition</b> <a href="DirStream_8hxx_source.html#l00097">DirStream.hxx:97</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a4e80c526e9b0404456799ecf7bd68d" name="a9a4e80c526e9b0404456799ecf7bd68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a4e80c526e9b0404456799ecf7bd68d">&#9670;&#160;</a></span>rewind()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::rewind </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rewind the directory stream to the beginning. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00137">137</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  137</span>                      {</div>
<div class="line"><span class="lineno">  138</span>                ::rewinddir(m_stream);</div>
<div class="line"><span class="lineno">  139</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa1f9afe9af8fe9e0f311868b3772875" name="aaa1f9afe9af8fe9e0f311868b3772875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1f9afe9af8fe9e0f311868b3772875">&#9670;&#160;</a></span>seek()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::DirStream::seek </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirEntry.html#a7d92f5731ba229926bb6a18acc44ca61">DirEntry::DirPos</a></td>          <td class="paramname"><span class="paramname"><em>pos</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adjust the directory iterator to the given position. </p>
<p><code>pos</code> needs to be previously obtained from <a class="el" href="#a8d01eae55ec630797237584f8cf6c7fa" title="Returns the current position in the directory iteration.">tell()</a>. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00130">130</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  130</span>                                            {</div>
<div class="line"><span class="lineno">  131</span>                requireOpenStream(<span class="stringliteral">&quot;seek&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>                ::seekdir(m_stream, to_integral(pos));</div>
<div class="line"><span class="lineno">  134</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d01eae55ec630797237584f8cf6c7fa" name="a8d01eae55ec630797237584f8cf6c7fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d01eae55ec630797237584f8cf6c7fa">&#9670;&#160;</a></span>tell()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcosmos_1_1DirEntry.html#a7d92f5731ba229926bb6a18acc44ca61">DirEntry::DirPos</a> cosmos::DirStream::tell </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current position in the directory iteration. </p>
<p>The returned value needs to be treated opaque, i.e. no assumptions should be made about it. It can merely be used to <a class="el" href="#aaa1f9afe9af8fe9e0f311868b3772875" title="Adjust the directory iterator to the given position.">seek()</a> at a later point in time. </p>

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00114">114</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  114</span>                                    {</div>
<div class="line"><span class="lineno">  115</span>                requireOpenStream(<span class="stringliteral">&quot;tell&quot;</span>);</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>                <span class="keyword">auto</span> ret = ::telldir(m_stream);</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>                <span class="keywordflow">if</span> (ret == -1) {</div>
<div class="line"><span class="lineno">  120</span>                        cosmos_throw (ApiError(<span class="stringliteral">&quot;telldir()&quot;</span>));</div>
<div class="line"><span class="lineno">  121</span>                }</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>                <span class="keywordflow">return</span> <a class="code hl_enumeration" href="classcosmos_1_1DirEntry.html#a7d92f5731ba229926bb6a18acc44ca61">DirEntry::DirPos</a>{ret};</div>
<div class="line"><span class="lineno">  124</span>        }</div>
<div class="ttc" id="aclasscosmos_1_1DirEntry_html_a7d92f5731ba229926bb6a18acc44ca61"><div class="ttname"><a href="classcosmos_1_1DirEntry.html#a7d92f5731ba229926bb6a18acc44ca61">cosmos::DirEntry::DirPos</a></div><div class="ttdeci">DirPos</div><div class="ttdoc">strong type for representing directory stream positions</div><div class="ttdef"><b>Definition</b> <a href="DirEntry_8hxx_source.html#l00035">DirEntry.hxx:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="adc1f8fe00a768e3e5cc381bb4be3a662" name="adc1f8fe00a768e3e5cc381bb4be3a662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc1f8fe00a768e3e5cc381bb4be3a662">&#9670;&#160;</a></span>m_stream</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DIR* cosmos::DirStream::m_stream = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DirStream_8hxx_source.html#l00166">166</a> of file <a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/fs/<a class="el" href="DirStream_8hxx_source.html">DirStream.hxx</a></li>
<li>src/fs/<a class="el" href="DirStream_8cxx_source.html">DirStream.cxx</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cosmos</b></li><li class="navelem"><a class="el" href="classcosmos_1_1DirStream.html">DirStream</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
