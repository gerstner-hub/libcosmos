<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: cosmos::PosixThread Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classcosmos_1_1PosixThread.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classcosmos_1_1PosixThread-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cosmos::PosixThread Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A class representing a basic POSIX thread.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ab8adc8feaa31043f714688b3023353bc" id="r_ab8adc8feaa31043f714688b3023353bc"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8adc8feaa31043f714688b3023353bc">PosixEntry</a> = std::function&lt;<a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> (<a class="el" href="pthread_8hxx.html#a9c00f43e834cb6a39990e335a9d2249e">pthread::ThreadArg</a>)&gt;</td></tr>
<tr class="memdesc:ab8adc8feaa31043f714688b3023353bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">POSIX style entry function with a single input parameter and return value.  <br /></td></tr>
<tr class="separator:ab8adc8feaa31043f714688b3023353bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71fde1c720b9fcdfc2883abac9e0e42" id="r_ac71fde1c720b9fcdfc2883abac9e0e42"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac71fde1c720b9fcdfc2883abac9e0e42">Entry</a> = std::function&lt;void (void)&gt;</td></tr>
<tr class="memdesc:ac71fde1c720b9fcdfc2883abac9e0e42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry function without parameters for use with member functions or lambdas.  <br /></td></tr>
<tr class="separator:ac71fde1c720b9fcdfc2883abac9e0e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab0c868da864784a06993288c824621f3" id="r_ab0c868da864784a06993288c824621f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab0c868da864784a06993288c824621f3">PosixThread</a> () noexcept</td></tr>
<tr class="memdesc:ab0c868da864784a06993288c824621f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an empty thread object.  <br /></td></tr>
<tr class="separator:ab0c868da864784a06993288c824621f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac012c6c2567de8117fc7be00ef4e77d3" id="r_ac012c6c2567de8117fc7be00ef4e77d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac012c6c2567de8117fc7be00ef4e77d3">PosixThread</a> (<a class="el" href="#ab8adc8feaa31043f714688b3023353bc">PosixEntry</a> entry, <a class="el" href="pthread_8hxx.html#a9c00f43e834cb6a39990e335a9d2249e">pthread::ThreadArg</a> arg, const std::string_view <a class="el" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>={})</td></tr>
<tr class="memdesc:ac012c6c2567de8117fc7be00ef4e77d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a thread running in the provided PosixEntry function.  <br /></td></tr>
<tr class="separator:ac012c6c2567de8117fc7be00ef4e77d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae910798dc294671e8a288353eb6992fa" id="r_ae910798dc294671e8a288353eb6992fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae910798dc294671e8a288353eb6992fa">PosixThread</a> (<a class="el" href="#ac71fde1c720b9fcdfc2883abac9e0e42">Entry</a> entry, const std::string_view <a class="el" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>={})</td></tr>
<tr class="memdesc:ae910798dc294671e8a288353eb6992fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a thread running in the provided simple Entry function.  <br /></td></tr>
<tr class="separator:ae910798dc294671e8a288353eb6992fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593c754005394f7734f711cb57e0e264" id="r_a593c754005394f7734f711cb57e0e264"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a593c754005394f7734f711cb57e0e264">PosixThread</a> (<a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a> &amp;&amp;other) noexcept</td></tr>
<tr class="separator:a593c754005394f7734f711cb57e0e264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d0527e9aae151649b218bfe7339777" id="r_a32d0527e9aae151649b218bfe7339777"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32d0527e9aae151649b218bfe7339777">operator=</a> (<a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a> &amp;&amp;other) noexcept</td></tr>
<tr class="separator:a32d0527e9aae151649b218bfe7339777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb41e97dcffb918534d23ad18a4d9747" id="r_adb41e97dcffb918534d23ad18a4d9747"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb41e97dcffb918534d23ad18a4d9747">joinable</a> () const</td></tr>
<tr class="memdesc:adb41e97dcffb918534d23ad18a4d9747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether a thread is attached to this object (and needs to be joined).  <br /></td></tr>
<tr class="separator:adb41e97dcffb918534d23ad18a4d9747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de8af2490c3c80131c12b092f00b9bc" id="r_a9de8af2490c3c80131c12b092f00b9bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9de8af2490c3c80131c12b092f00b9bc">join</a> ()</td></tr>
<tr class="memdesc:a9de8af2490c3c80131c12b092f00b9bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until the associated thread returns.  <br /></td></tr>
<tr class="separator:a9de8af2490c3c80131c12b092f00b9bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba151281a0bddea7ba34cf4cbf4a920" id="r_a1ba151281a0bddea7ba34cf4cbf4a920"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ba151281a0bddea7ba34cf4cbf4a920">tryJoin</a> ()</td></tr>
<tr class="memdesc:a1ba151281a0bddea7ba34cf4cbf4a920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to immediately joins the associated thread.  <br /></td></tr>
<tr class="separator:a1ba151281a0bddea7ba34cf4cbf4a920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac525f0491a658366bfaa4e102dab7530" id="r_ac525f0491a658366bfaa4e102dab7530"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac525f0491a658366bfaa4e102dab7530">joinTimed</a> (const <a class="el" href="classcosmos_1_1TimeSpec.html">RealTime</a> ts)</td></tr>
<tr class="memdesc:ac525f0491a658366bfaa4e102dab7530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the associated thread to return for a given time period.  <br /></td></tr>
<tr class="separator:ac525f0491a658366bfaa4e102dab7530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6222078fdc25dea9623426066865f2" id="r_abc6222078fdc25dea9623426066865f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc6222078fdc25dea9623426066865f2">detach</a> ()</td></tr>
<tr class="memdesc:abc6222078fdc25dea9623426066865f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach a joinable thread.  <br /></td></tr>
<tr class="separator:abc6222078fdc25dea9623426066865f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa32be936c84e4481f30d9a24eda5fe58" id="r_aa32be936c84e4481f30d9a24eda5fe58"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a> () const</td></tr>
<tr class="memdesc:aa32be936c84e4481f30d9a24eda5fe58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a friendly name for the thread.  <br /></td></tr>
<tr class="separator:aa32be936c84e4481f30d9a24eda5fe58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a53e48976b8a7d3ab576ee77a461c85" id="r_a1a53e48976b8a7d3ab576ee77a461c85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1pthread_1_1ID.html">pthread::ID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a53e48976b8a7d3ab576ee77a461c85">id</a> () const</td></tr>
<tr class="memdesc:a1a53e48976b8a7d3ab576ee77a461c85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an opaque thread ID object for the thread represented by this object.  <br /></td></tr>
<tr class="separator:a1a53e48976b8a7d3ab576ee77a461c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeebfa64e1f37aae5aac2970f48a73fdf" id="r_aeebfa64e1f37aae5aac2970f48a73fdf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeebfa64e1f37aae5aac2970f48a73fdf">isCallerThread</a> () const</td></tr>
<tr class="memdesc:aeebfa64e1f37aae5aac2970f48a73fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the caller itself is the associated thread.  <br /></td></tr>
<tr class="separator:aeebfa64e1f37aae5aac2970f48a73fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ae5fcfae3e0f16fc216584fa150f6f" id="r_a72ae5fcfae3e0f16fc216584fa150f6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72ae5fcfae3e0f16fc216584fa150f6f">kill</a> (const <a class="el" href="classcosmos_1_1Signal.html">Signal</a> sig)</td></tr>
<tr class="memdesc:a72ae5fcfae3e0f16fc216584fa150f6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around cosmos::pthread::kill().  <br /></td></tr>
<tr class="separator:a72ae5fcfae3e0f16fc216584fa150f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2a45899cf3f0d44d7ea3be32076739d6" id="r_a2a45899cf3f0d44d7ea3be32076739d6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a45899cf3f0d44d7ea3be32076739d6">buildName</a> (const std::string_view <a class="el" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>, size_t nr) const</td></tr>
<tr class="separator:a2a45899cf3f0d44d7ea3be32076739d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f164dec7259ee55874488a259aba5a" id="r_a46f164dec7259ee55874488a259aba5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46f164dec7259ee55874488a259aba5a">assertJoinConditions</a> ()</td></tr>
<tr class="separator:a46f164dec7259ee55874488a259aba5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9694710b2cecb6af5570f8ef8bd227" id="r_a1b9694710b2cecb6af5570f8ef8bd227"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b9694710b2cecb6af5570f8ef8bd227">reset</a> ()</td></tr>
<tr class="separator:a1b9694710b2cecb6af5570f8ef8bd227"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a5f624315169c961772941aa0f30d5f53" id="r_a5f624315169c961772941aa0f30d5f53"><td class="memItemLeft" align="right" valign="top">std::optional&lt; pthread_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a></td></tr>
<tr class="memdesc:a5f624315169c961772941aa0f30d5f53"><td class="mdescLeft">&#160;</td><td class="mdescRight">POSIX thread handle.  <br /></td></tr>
<tr class="separator:a5f624315169c961772941aa0f30d5f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef911d456ec32683b7d633f8fc179a96" id="r_aef911d456ec32683b7d633f8fc179a96"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef911d456ec32683b7d633f8fc179a96">m_name</a></td></tr>
<tr class="memdesc:aef911d456ec32683b7d633f8fc179a96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Friendly name of the thread.  <br /></td></tr>
<tr class="separator:aef911d456ec32683b7d633f8fc179a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class representing a basic POSIX thread. </p>
<p>Threads are created at construction time already and enter the specified entry function right away. There is no further modeling of the thread state beyond the joined state.</p>
<p>A <a class="el" href="classcosmos_1_1PosixThread.html" title="A class representing a basic POSIX thread.">PosixThread</a> can either be empty or in a joinable state. An empty thread has no resources associated and no operations can be performed on it. Only in the joinable state can another thread perform a join operation which will block until the other thread exits. After the join operation is complete the state of the object will become empty again. A thread that exits before somebody joins it is still in the joinable state. A joinable thread <em>must</em> be joined before the associated <a class="el" href="classcosmos_1_1PosixThread.html" title="A class representing a basic POSIX thread.">PosixThread</a> object is destroyed or move-assigned to.</p>
<p>A thread that is created in joinable state can be detached. This causes the thread object to become empty but the associated thread will continue running independently. No other thread needs to (or can) join a detached thread and its resources will be cleaned up automatically once the detached thread exits.</p>
<p>This class currently supports two types of entry points for threads:</p>
<ul>
<li>PosixEntry: This is a thin wrapper around the low level POSIX thread entry function which receives a single void* and returns a single void*. The return value can be collected at join time. This entry variant can be used to interact with threads from other libraries or for very simple thread operations. Since the argument and return types aren't safe (need to be casted) it should only be used if really necessary.</li>
<li>Entry: This is a plain <code>void (void)</code> entry function. To pass data to the thread use e.g. std::bind to make the thread enter a member function, use a lambda with captures or similar.</li>
</ul>
<p><a class="el" href="classcosmos_1_1PosixThread.html" title="A class representing a basic POSIX thread.">PosixThread</a> is a move-only type. It cannot be copied. The ownership can be transfer via std::move but be carefully that a thread that is not yet joined cannot be moved into, this will cause std::abort() to be called. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00052">52</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ac71fde1c720b9fcdfc2883abac9e0e42" name="ac71fde1c720b9fcdfc2883abac9e0e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac71fde1c720b9fcdfc2883abac9e0e42">&#9670;&#160;</a></span>Entry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#ac71fde1c720b9fcdfc2883abac9e0e42">cosmos::PosixThread::Entry</a> = std::function&lt;void (void)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry function without parameters for use with member functions or lambdas. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00063">63</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>

</div>
</div>
<a id="ab8adc8feaa31043f714688b3023353bc" name="ab8adc8feaa31043f714688b3023353bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8adc8feaa31043f714688b3023353bc">&#9670;&#160;</a></span>PosixEntry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#ab8adc8feaa31043f714688b3023353bc">cosmos::PosixThread::PosixEntry</a> = std::function&lt;<a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> (<a class="el" href="pthread_8hxx.html#a9c00f43e834cb6a39990e335a9d2249e">pthread::ThreadArg</a>)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>POSIX style entry function with a single input parameter and return value. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00061">61</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab0c868da864784a06993288c824621f3" name="ab0c868da864784a06993288c824621f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c868da864784a06993288c824621f3">&#9670;&#160;</a></span>PosixThread() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::PosixThread::PosixThread </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an empty thread object. </p>
<p>This will simply create an empty thread object without invoking any system calls. Performing any operations on it will fail. <a class="el" href="#adb41e97dcffb918534d23ad18a4d9747" title="Returns whether a thread is attached to this object (and needs to be joined).">joinable()</a> will return <code>false</code>. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00073">73</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   73</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac012c6c2567de8117fc7be00ef4e77d3" name="ac012c6c2567de8117fc7be00ef4e77d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac012c6c2567de8117fc7be00ef4e77d3">&#9670;&#160;</a></span>PosixThread() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::PosixThread::PosixThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ab8adc8feaa31043f714688b3023353bc">PosixEntry</a></td>          <td class="paramname"><span class="paramname"><em>entry</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pthread_8hxx.html#a9c00f43e834cb6a39990e335a9d2249e">pthread::ThreadArg</a></td>          <td class="paramname"><span class="paramname"><em>arg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a thread running in the provided PosixEntry function. </p>
<p>All necessary resources will be allocated and the thread will enter the given entry function.</p>
<p>On error <a class="el" href="classcosmos_1_1ApiError.html" title="Specialized exception type used when system APIs fail.">cosmos::ApiError</a> will be thrown.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>The single parameter passed to the entry function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>An optional friendly name for the thread that is used in logging or possible in operating system facilities to more easily identify threads. If this is not specified then an automatically generated name will be used. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00066">66</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   66</span>                                                                                          :</div>
<div class="line"><span class="lineno">   67</span>                <a class="code hl_variable" href="#aef911d456ec32683b7d633f8fc179a96">m_name</a>{buildName(<a class="code hl_function" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>, ++num_threads)} {</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>        <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a> = pthread_t{};</div>
<div class="line"><span class="lineno">   70</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   71</span>                create_thread(<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>.value(), <span class="keyword">new</span> Context{entry, arg});</div>
<div class="line"><span class="lineno">   72</span>        } <span class="keywordflow">catch</span>(...) {</div>
<div class="line"><span class="lineno">   73</span>                <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>.reset();</div>
<div class="line"><span class="lineno">   74</span>        }</div>
<div class="line"><span class="lineno">   75</span>}</div>
<div class="ttc" id="aclasscosmos_1_1PosixThread_html_a5f624315169c961772941aa0f30d5f53"><div class="ttname"><a href="#a5f624315169c961772941aa0f30d5f53">cosmos::PosixThread::m_pthread</a></div><div class="ttdeci">std::optional&lt; pthread_t &gt; m_pthread</div><div class="ttdoc">POSIX thread handle.</div><div class="ttdef"><b>Definition</b> <a href="PosixThread_8hxx_source.html#l00206">PosixThread.hxx:206</a></div></div>
<div class="ttc" id="aclasscosmos_1_1PosixThread_html_aa32be936c84e4481f30d9a24eda5fe58"><div class="ttname"><a href="#aa32be936c84e4481f30d9a24eda5fe58">cosmos::PosixThread::name</a></div><div class="ttdeci">const std::string &amp; name() const</div><div class="ttdoc">Returns a friendly name for the thread.</div><div class="ttdef"><b>Definition</b> <a href="PosixThread_8hxx_source.html#l00170">PosixThread.hxx:170</a></div></div>
<div class="ttc" id="aclasscosmos_1_1PosixThread_html_aef911d456ec32683b7d633f8fc179a96"><div class="ttname"><a href="#aef911d456ec32683b7d633f8fc179a96">cosmos::PosixThread::m_name</a></div><div class="ttdeci">std::string m_name</div><div class="ttdoc">Friendly name of the thread.</div><div class="ttdef"><b>Definition</b> <a href="PosixThread_8hxx_source.html#l00209">PosixThread.hxx:209</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae910798dc294671e8a288353eb6992fa" name="ae910798dc294671e8a288353eb6992fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae910798dc294671e8a288353eb6992fa">&#9670;&#160;</a></span>PosixThread() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::PosixThread::PosixThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ac71fde1c720b9fcdfc2883abac9e0e42">Entry</a></td>          <td class="paramname"><span class="paramname"><em>entry</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a thread running in the provided simple Entry function. </p>
<dl class="section see"><dt>See also</dt><dd>PosixThread(PosixEntry, pthread::ThreadArg, const string_view) </dd></dl>

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00077">77</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                                                               :</div>
<div class="line"><span class="lineno">   78</span>                <a class="code hl_variable" href="#aef911d456ec32683b7d633f8fc179a96">m_name</a>{buildName(<a class="code hl_function" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>, ++num_threads)} {</div>
<div class="line"><span class="lineno">   79</span>        <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a> = pthread_t{};</div>
<div class="line"><span class="lineno">   80</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">   81</span>                create_thread(<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>.value(), <span class="keyword">new</span> Context{entry, pthread::ThreadArg{0}});</div>
<div class="line"><span class="lineno">   82</span>        } <span class="keywordflow">catch</span>(...) {</div>
<div class="line"><span class="lineno">   83</span>                <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>.reset();</div>
<div class="line"><span class="lineno">   84</span>        }</div>
<div class="line"><span class="lineno">   85</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a593c754005394f7734f711cb57e0e264" name="a593c754005394f7734f711cb57e0e264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593c754005394f7734f711cb57e0e264">&#9670;&#160;</a></span>PosixThread() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::PosixThread::PosixThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>other</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00087">87</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   87</span>                                                     {</div>
<div class="line"><span class="lineno">   88</span>        *<span class="keyword">this</span> = std::move(other);</div>
<div class="line"><span class="lineno">   89</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ad292d4d3c72b9ded0347c266d9795d" name="a9ad292d4d3c72b9ded0347c266d9795d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad292d4d3c72b9ded0347c266d9795d">&#9670;&#160;</a></span>~PosixThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosmos::PosixThread::~PosixThread </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00091">91</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   91</span>                          {</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#adb41e97dcffb918534d23ad18a4d9747">joinable</a>()) {</div>
<div class="line"><span class="lineno">   93</span>                fatal_error(sprintf(<span class="stringliteral">&quot;Thread %s destroyed but not joined!&quot;</span>, <a class="code hl_function" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>().c_str()));</div>
<div class="line"><span class="lineno">   94</span>        }</div>
<div class="line"><span class="lineno">   95</span>}</div>
<div class="ttc" id="aclasscosmos_1_1PosixThread_html_adb41e97dcffb918534d23ad18a4d9747"><div class="ttname"><a href="#adb41e97dcffb918534d23ad18a4d9747">cosmos::PosixThread::joinable</a></div><div class="ttdeci">bool joinable() const</div><div class="ttdoc">Returns whether a thread is attached to this object (and needs to be joined).</div><div class="ttdef"><b>Definition</b> <a href="PosixThread_8hxx_source.html#l00105">PosixThread.hxx:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a46f164dec7259ee55874488a259aba5a" name="a46f164dec7259ee55874488a259aba5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46f164dec7259ee55874488a259aba5a">&#9670;&#160;</a></span>assertJoinConditions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::PosixThread::assertJoinConditions </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00109">109</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  109</span>                                       {</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#adb41e97dcffb918534d23ad18a4d9747">joinable</a>()) {</div>
<div class="line"><span class="lineno">  111</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;Attempted to join non-joinable thread (empty or detached)&quot;</span>));</div>
<div class="line"><span class="lineno">  112</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="#aeebfa64e1f37aae5aac2970f48a73fdf">isCallerThread</a>()) {</div>
<div class="line"><span class="lineno">  113</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;Attempted to join self&quot;</span>));</div>
<div class="line"><span class="lineno">  114</span>        }</div>
<div class="line"><span class="lineno">  115</span>}</div>
<div class="ttc" id="aclasscosmos_1_1PosixThread_html_aeebfa64e1f37aae5aac2970f48a73fdf"><div class="ttname"><a href="#aeebfa64e1f37aae5aac2970f48a73fdf">cosmos::PosixThread::isCallerThread</a></div><div class="ttdeci">bool isCallerThread() const</div><div class="ttdoc">Returns whether the caller itself is the associated thread.</div><div class="ttdef"><b>Definition</b> <a href="PosixThread_8hxx_source.html#l00186">PosixThread.hxx:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a45899cf3f0d44d7ea3be32076739d6" name="a2a45899cf3f0d44d7ea3be32076739d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a45899cf3f0d44d7ea3be32076739d6">&#9670;&#160;</a></span>buildName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string cosmos::PosixThread::buildName </td>
          <td>(</td>
          <td class="paramtype">const std::string_view</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>nr</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00196">196</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  196</span>                                                                           {</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>.empty())</div>
<div class="line"><span class="lineno">  198</span>                <span class="keywordflow">return</span> std::string{<a class="code hl_function" href="#aa32be936c84e4481f30d9a24eda5fe58">name</a>};</div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">return</span> std::string{<span class="stringliteral">&quot;thread&lt;&quot;</span> + std::to_string(nr) + <span class="stringliteral">&quot;&gt;&quot;</span>};</div>
<div class="line"><span class="lineno">  200</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abc6222078fdc25dea9623426066865f2" name="abc6222078fdc25dea9623426066865f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc6222078fdc25dea9623426066865f2">&#9670;&#160;</a></span>detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::PosixThread::detach </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach a joinable thread. </p>
<p>This call is only allowed if <a class="el" href="#adb41e97dcffb918534d23ad18a4d9747" title="Returns whether a thread is attached to this object (and needs to be joined).">joinable()</a> returns <code>true</code>. Otherwise a <a class="el" href="classcosmos_1_1UsageError.html" title="Exception type for logical usage errors within the application.">UsageError</a> is thrown.</p>
<p>On success the associated thread is converted into a detached thread. The object will become an empty thread. The detached thread will continue running independently and will automatically be cleaned up once it exits. The detached thread cannot be joined any more. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00180">180</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  180</span>                         {</div>
<div class="line"><span class="lineno">  181</span>        <span class="comment">// NOTE: in theory it is valid that a thread detaches itself, so let&#39;s</span></div>
<div class="line"><span class="lineno">  182</span>        <span class="comment">// not use assertJoinConditions() here ATM.</span></div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="#adb41e97dcffb918534d23ad18a4d9747">joinable</a>()) {</div>
<div class="line"><span class="lineno">  184</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;Attempted to detach a non-joinable thread (empty or already detached)&quot;</span>));</div>
<div class="line"><span class="lineno">  185</span>        }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>        <span class="keyword">const</span> <span class="keyword">auto</span> res = ::pthread_detach(*<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>);</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> error = Errno{res}; error != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">  190</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_detach()&quot;</span>, error));</div>
<div class="line"><span class="lineno">  191</span>        }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        reset();</div>
<div class="line"><span class="lineno">  194</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a53e48976b8a7d3ab576ee77a461c85" name="a1a53e48976b8a7d3ab576ee77a461c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a53e48976b8a7d3ab576ee77a461c85">&#9670;&#160;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcosmos_1_1pthread_1_1ID.html">pthread::ID</a> cosmos::PosixThread::id </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns an opaque thread ID object for the thread represented by this object. </p>
<p>This call is only allowed if <a class="el" href="#adb41e97dcffb918534d23ad18a4d9747" title="Returns whether a thread is attached to this object (and needs to be joined).">joinable()</a> returns <code>true</code>.</p>
<p>The returned object serves the purpose of comparing different threads to each other. Any thread can obtain its own ID by calling pthread::getID().</p>
<p>The returned object can also be used to obtain the native thread handle. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00183">183</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  183</span>{ <span class="keywordflow">return</span> pthread::ID{*<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>}; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeebfa64e1f37aae5aac2970f48a73fdf" name="aeebfa64e1f37aae5aac2970f48a73fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeebfa64e1f37aae5aac2970f48a73fdf">&#9670;&#160;</a></span>isCallerThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool cosmos::PosixThread::isCallerThread </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether the caller itself is the associated thread. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00186">186</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  186</span>                                    {</div>
<div class="line"><span class="lineno">  187</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="#a1a53e48976b8a7d3ab576ee77a461c85">id</a>() == pthread::get_id();</div>
<div class="line"><span class="lineno">  188</span>        }</div>
<div class="ttc" id="aclasscosmos_1_1PosixThread_html_a1a53e48976b8a7d3ab576ee77a461c85"><div class="ttname"><a href="#a1a53e48976b8a7d3ab576ee77a461c85">cosmos::PosixThread::id</a></div><div class="ttdeci">pthread::ID id() const</div><div class="ttdoc">Returns an opaque thread ID object for the thread represented by this object.</div><div class="ttdef"><b>Definition</b> <a href="PosixThread_8hxx_source.html#l00183">PosixThread.hxx:183</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9de8af2490c3c80131c12b092f00b9bc" name="a9de8af2490c3c80131c12b092f00b9bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9de8af2490c3c80131c12b092f00b9bc">&#9670;&#160;</a></span>join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> cosmos::PosixThread::join </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks until the associated thread returns. </p>
<p>This call is only allowed if <a class="el" href="#adb41e97dcffb918534d23ad18a4d9747" title="Returns whether a thread is attached to this object (and needs to be joined).">joinable()</a> returns <code>true</code> i.e. if currently a joinable thread is attached to this object.</p>
<p>The call will block forever until the target thread ends execution which can happen either by the thread returning from its entry function of by the thread calling pthread::exit().</p>
<p>The returned value is the one returned from a PosixEntry style entry function, the value provided to pthread::exit() or ExitValue{0} in any other cases. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00125">125</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  125</span>                                   {</div>
<div class="line"><span class="lineno">  126</span>        assertJoinConditions();</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordtype">void</span> *res = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  129</span>        <span class="keyword">const</span> <span class="keyword">auto</span> join_res = ::pthread_join(*<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>, &amp;res);</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> error = Errno{join_res}; error != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">  132</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_join()&quot;</span>, error));</div>
<div class="line"><span class="lineno">  133</span>        }</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>        reset();</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">return</span> pthread::ExitValue{<span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(res)};</div>
<div class="line"><span class="lineno">  138</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adb41e97dcffb918534d23ad18a4d9747" name="adb41e97dcffb918534d23ad18a4d9747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb41e97dcffb918534d23ad18a4d9747">&#9670;&#160;</a></span>joinable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool cosmos::PosixThread::joinable </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether a thread is attached to this object (and needs to be joined). </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00105">105</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>                              {</div>
<div class="line"><span class="lineno">  106</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>.has_value();</div>
<div class="line"><span class="lineno">  107</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac525f0491a658366bfaa4e102dab7530" name="ac525f0491a658366bfaa4e102dab7530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac525f0491a658366bfaa4e102dab7530">&#9670;&#160;</a></span>joinTimed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> &gt; cosmos::PosixThread::joinTimed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1TimeSpec.html">RealTime</a></td>          <td class="paramname"><span class="paramname"><em>ts</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for the associated thread to return for a given time period. </p>
<p>This behaves similar to <a class="el" href="#a1ba151281a0bddea7ba34cf4cbf4a920" title="Attempts to immediately joins the associated thread.">tryJoin()</a> with the exception that the call blocks for a given time period before the operation fails and no value is returned.</p>
<dl class="section warning"><dt>Warning</dt><dd>The clock used for <code>ts</code> is the RealTimeClock, although the implementation (glibc) calculates an offset that will in turn be measured against MonotonicClock. So the timeout will be (somewhat) unaffected by discontinous changes to the realtime clock. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00160">160</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>                                                                      {</div>
<div class="line"><span class="lineno">  161</span>        assertJoinConditions();</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordtype">void</span> *res = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  164</span>        <span class="keyword">const</span> <span class="keyword">auto</span> join_res = ::pthread_timedjoin_np(*<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>, &amp;res, &amp;ts);</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> error = Errno{join_res}; error != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">  167</span>                <span class="keywordflow">if</span> (error == Errno::TIMEDOUT) {</div>
<div class="line"><span class="lineno">  168</span>                        <span class="comment">// couldn&#39;t join in time</span></div>
<div class="line"><span class="lineno">  169</span>                        <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  170</span>                }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_timedjoin_np()&quot;</span>, error));</div>
<div class="line"><span class="lineno">  173</span>        }</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>        reset();</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">return</span> pthread::ExitValue{<span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(res)};</div>
<div class="line"><span class="lineno">  178</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a72ae5fcfae3e0f16fc216584fa150f6f" name="a72ae5fcfae3e0f16fc216584fa150f6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72ae5fcfae3e0f16fc216584fa150f6f">&#9670;&#160;</a></span>kill()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::PosixThread::kill </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1Signal.html">Signal</a></td>          <td class="paramname"><span class="paramname"><em>sig</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper around cosmos::pthread::kill(). </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00191">191</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  191</span>                                    {</div>
<div class="line"><span class="lineno">  192</span>                pthread::kill(<span class="keywordtype">id</span>(), sig);</div>
<div class="line"><span class="lineno">  193</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa32be936c84e4481f30d9a24eda5fe58" name="aa32be936c84e4481f30d9a24eda5fe58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa32be936c84e4481f30d9a24eda5fe58">&#9670;&#160;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; cosmos::PosixThread::name </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a friendly name for the thread. </p>
<p>If <a class="el" href="#adb41e97dcffb918534d23ad18a4d9747" title="Returns whether a thread is attached to this object (and needs to be joined).">joinable()</a> returns <code>true</code> then this returns a friendly name for the associated thread. Part of this will be the friendly name passed at construction time, or an automatically generated name otherwise.</p>
<p>If this is an empty thread then an empty string is returned. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00170">170</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="#aef911d456ec32683b7d633f8fc179a96">m_name</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a32d0527e9aae151649b218bfe7339777" name="a32d0527e9aae151649b218bfe7339777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d0527e9aae151649b218bfe7339777">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a> &amp; cosmos::PosixThread::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>other</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00097">97</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   97</span>                                                                {</div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#adb41e97dcffb918534d23ad18a4d9747">joinable</a>()) {</div>
<div class="line"><span class="lineno">   99</span>                fatal_error(<span class="stringliteral">&quot;moving into not-yet-joined thread&quot;</span>);</div>
<div class="line"><span class="lineno">  100</span>        }</div>
<div class="line"><span class="lineno">  101</span>        <a class="code hl_variable" href="#aef911d456ec32683b7d633f8fc179a96">m_name</a> = other.m_name;</div>
<div class="line"><span class="lineno">  102</span>        <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a> = *(other.m_pthread);</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>        other.m_pthread.reset();</div>
<div class="line"><span class="lineno">  105</span>        other.m_name.clear();</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">  107</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b9694710b2cecb6af5570f8ef8bd227" name="a1b9694710b2cecb6af5570f8ef8bd227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9694710b2cecb6af5570f8ef8bd227">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::PosixThread::reset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00117">117</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  117</span>                        {</div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>) {</div>
<div class="line"><span class="lineno">  119</span>                num_threads--;</div>
<div class="line"><span class="lineno">  120</span>                <a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>.reset();</div>
<div class="line"><span class="lineno">  121</span>                <a class="code hl_variable" href="#aef911d456ec32683b7d633f8fc179a96">m_name</a>.clear();</div>
<div class="line"><span class="lineno">  122</span>        }</div>
<div class="line"><span class="lineno">  123</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ba151281a0bddea7ba34cf4cbf4a920" name="a1ba151281a0bddea7ba34cf4cbf4a920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ba151281a0bddea7ba34cf4cbf4a920">&#9670;&#160;</a></span>tryJoin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="pthread_8hxx.html#a3f9b00306af1fa54336c7586d9d8bf70">pthread::ExitValue</a> &gt; cosmos::PosixThread::tryJoin </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to immediately joins the associated thread. </p>
<p>This behaves just like <a class="el" href="#a9de8af2490c3c80131c12b092f00b9bc" title="Blocks until the associated thread returns.">join()</a> with the exception that it only polls once whether joining the thread is currently possible. If this is the case then the thread state is cleaned up and its return value returned. If joining is not possible then nothing is returned and the thread state is not changed. This call will not block. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8cxx_source.html#l00140">140</a> of file <a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  140</span>                                                   {</div>
<div class="line"><span class="lineno">  141</span>        assertJoinConditions();</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordtype">void</span> *res = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  144</span>        <span class="keyword">const</span> <span class="keyword">auto</span> join_res = ::pthread_tryjoin_np(*<a class="code hl_variable" href="#a5f624315169c961772941aa0f30d5f53">m_pthread</a>, &amp;res);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> error = Errno{join_res}; error != Errno::NO_ERROR) {</div>
<div class="line"><span class="lineno">  147</span>                <span class="keywordflow">if</span> (error == Errno::BUSY) {</div>
<div class="line"><span class="lineno">  148</span>                        <span class="comment">// cannot be joined yet</span></div>
<div class="line"><span class="lineno">  149</span>                        <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  150</span>                }</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;pthread_tryjoin_np()&quot;</span>, error));</div>
<div class="line"><span class="lineno">  153</span>        }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        reset();</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">return</span> pthread::ExitValue{<span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(res)};</div>
<div class="line"><span class="lineno">  158</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aef911d456ec32683b7d633f8fc179a96" name="aef911d456ec32683b7d633f8fc179a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef911d456ec32683b7d633f8fc179a96">&#9670;&#160;</a></span>m_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string cosmos::PosixThread::m_name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Friendly name of the thread. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00209">209</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>

</div>
</div>
<a id="a5f624315169c961772941aa0f30d5f53" name="a5f624315169c961772941aa0f30d5f53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f624315169c961772941aa0f30d5f53">&#9670;&#160;</a></span>m_pthread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt;pthread_t&gt; cosmos::PosixThread::m_pthread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>POSIX thread handle. </p>

<p class="definition">Definition at line <a class="el" href="PosixThread_8hxx_source.html#l00206">206</a> of file <a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/thread/<a class="el" href="PosixThread_8hxx_source.html">PosixThread.hxx</a></li>
<li>src/thread/<a class="el" href="PosixThread_8cxx_source.html">PosixThread.cxx</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>cosmos</b></li><li class="navelem"><a class="el" href="classcosmos_1_1PosixThread.html">PosixThread</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
