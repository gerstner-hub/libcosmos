<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: include/proc/clone.hxx File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('clone_8hxx.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">clone.hxx File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;linux/sched.h&gt;</code><br />
<code>#include &lt;sched.h&gt;</code><br />
<code>#include &lt;cosmos/BitMask.hxx&gt;</code><br />
<code>#include &lt;cosmos/proc/PidFD.hxx&gt;</code><br />
<code>#include &lt;cosmos/proc/types.hxx&gt;</code><br />
<code>#include &lt;cosmos/utils.hxx&gt;</code><br />
</div>
<p><a href="clone_8hxx_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcosmos_1_1CloneArgs.html">cosmos::CloneArgs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Argument struct for proc::clone().  <a href="structcosmos_1_1CloneArgs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a73ae702f24838381b745b6cca75f401e" id="r_a73ae702f24838381b745b6cca75f401e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73ae702f24838381b745b6cca75f401e">cosmos::CloneFlags</a> = <a class="el" href="classcosmos_1_1BitMask.html">BitMask</a>&lt;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23">CloneFlag</a>&gt;</td></tr>
<tr class="separator:a73ae702f24838381b745b6cca75f401e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a81345d68d0dcf73e0794f2b826025d23" id="r_a81345d68d0dcf73e0794f2b826025d23"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81345d68d0dcf73e0794f2b826025d23">cosmos::CloneFlag</a> : uint64_t { <br />
&#160;&#160;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a10e78422e94fb45efad82eeda9f8b098">CHILD_CLEARTID</a> = CLONE_CHILD_CLEARTID
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a01b960db885f70dd47014ecf4b071545">CHILD_SETTID</a> = CLONE_CHILD_SETTID
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a6569809246346b80497e2b0800230219">CLEAR_SIGHAND</a> = CLONE_CLEAR_SIGHAND
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a26009b174705bcc5fb09853d7e61dba1">DETACHED</a> = CLONE_DETACHED
, <br />
&#160;&#160;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a8381006451076292d6708feef52460fe">SHARE_FILES</a> = CLONE_FILES
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23ac999d25ae1d89241ac298924b5ab5275">SHARE_FS</a> = CLONE_FS
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a9004c456f02a94e3a18b11897fbb565a">INTO_CGROUP</a> = CLONE_INTO_CGROUP
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23af35c3f0c407b9846cdae1715cb4edfcd">SHARE_IO</a> = CLONE_IO
, <br />
&#160;&#160;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a46ca863c193c540343e2934cb29e72bb">NEW_CGROUP</a> = CLONE_NEWCGROUP
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a2839441b4266f8636fdb26947f4ba545">NEW_IPC</a> = CLONE_NEWIPC
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a410ae674d99f009dae525106d7860279">NEW_NET</a> = CLONE_NEWNET
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a9c94a9cbc772f654b5b6f76b177d640b">NEW_MOUNT</a> = CLONE_NEWNS
, <br />
&#160;&#160;<b>NEW_NS</b> = CLONE_NEWNS
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a9beb6494f348fd41996dc5aa096b84ac">NEW_PID</a> = CLONE_NEWPID
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a74572532c61ee2d2efbe443e36effdf5">NEW_USER</a> = CLONE_NEWUSER
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a58dbe77ff9a8e6c768cc74ceedd8e01a">NEW_UTS</a> = CLONE_NEWUTS
, <br />
&#160;&#160;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a846bd28e8d96ffb18ad17a2d322ceb47">SHARE_PARENT</a> = CLONE_PARENT
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23ae416e5ad36704424fb0239fbe44b0a49">PARENT_SETTID</a> = CLONE_PARENT_SETTID
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23ab9903e1d1147b9a946468d28c273550a">PIDFD</a> = CLONE_PIDFD
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a3fff116fb0ae44abf4417e6117be6f7e">PTRACE</a> = CLONE_PTRACE
, <br />
&#160;&#160;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a1ee5a7596c04294a377bde08237a5be8">SETTLS</a> = CLONE_SETTLS
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23aa68bd0436c48179565dedef308e7b164">SIGHAND</a> = CLONE_SIGHAND
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a31fcfa546ed1534afd8c232e53cb8a6b">SHARE_SYSVSEM</a> = CLONE_SYSVSEM
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a57f8b9e1bf05e9058d703c68ac2d53b0">THREAD</a> = CLONE_THREAD
, <br />
&#160;&#160;<a class="el" href="#a81345d68d0dcf73e0794f2b826025d23aee329ea59dcbfbd03dfd4624c1249854">UNTRACED</a> = CLONE_UNTRACED
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a13e7b14e273093c5ae8b4fe08e0053b4">VFORK</a> = CLONE_VFORK
, <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23a461d84b494ad0557d49a95a3dbe0d7e6">SHARE_VM</a> = CLONE_VM
<br />
 }</td></tr>
<tr class="separator:a81345d68d0dcf73e0794f2b826025d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a80571649aea2e85aec818bda16e9147b" id="r_a80571649aea2e85aec818bda16e9147b"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="proc_2types_8hxx.html#a4c274565c8010d58379ba7ac3d6e0d9a">ProcessID</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="clone_8cxx.html#a80571649aea2e85aec818bda16e9147b">cosmos::proc::clone</a> (const <a class="el" href="structcosmos_1_1CloneArgs.html">CloneArgs</a> &amp;args)</td></tr>
<tr class="memdesc:a80571649aea2e85aec818bda16e9147b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a child thread or process according to <code>args</code>.  <br /></td></tr>
<tr class="separator:a80571649aea2e85aec818bda16e9147b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>clone3() specific data structures and functions.</p>
<p>Due to the complex data structures involved and due to the low level nature of this call this is placed in its own header separate from <a class="el" href="process_8hxx.html">process.hxx</a>. </p>

<p class="definition">Definition in file <a class="el" href="clone_8hxx_source.html">clone.hxx</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a73ae702f24838381b745b6cca75f401e" name="a73ae702f24838381b745b6cca75f401e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73ae702f24838381b745b6cca75f401e">&#9670;&#160;</a></span>CloneFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcosmos_1_1BitMask.html">cosmos::CloneFlags</a> = BitMask&lt;CloneFlag&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="clone_8hxx_source.html#l00057">57</a> of file <a class="el" href="clone_8hxx_source.html">clone.hxx</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a81345d68d0dcf73e0794f2b826025d23" name="a81345d68d0dcf73e0794f2b826025d23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81345d68d0dcf73e0794f2b826025d23">&#9670;&#160;</a></span>CloneFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#a81345d68d0dcf73e0794f2b826025d23">cosmos::CloneFlag</a> : uint64_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a10e78422e94fb45efad82eeda9f8b098" name="a81345d68d0dcf73e0794f2b826025d23a10e78422e94fb45efad82eeda9f8b098"></a>CHILD_CLEARTID&#160;</td><td class="fielddoc"><p>Clear the child_tid <a class="el" href="structcosmos_1_1CloneArgs.html" title="Argument struct for proc::clone().">CloneArgs</a> member in child's memory when the child exits, used by threading libraries. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a01b960db885f70dd47014ecf4b071545" name="a81345d68d0dcf73e0794f2b826025d23a01b960db885f70dd47014ecf4b071545"></a>CHILD_SETTID&#160;</td><td class="fielddoc"><p>Store the child's thread ID in the child_tid <a class="el" href="structcosmos_1_1CloneArgs.html" title="Argument struct for proc::clone().">CloneArgs</a> member in child's memory before the child runs. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a6569809246346b80497e2b0800230219" name="a81345d68d0dcf73e0794f2b826025d23a6569809246346b80497e2b0800230219"></a>CLEAR_SIGHAND&#160;</td><td class="fielddoc"><p>Reset all signal handling dispositions to their defaults in the child. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a26009b174705bcc5fb09853d7e61dba1" name="a81345d68d0dcf73e0794f2b826025d23a26009b174705bcc5fb09853d7e61dba1"></a>DETACHED&#160;</td><td class="fielddoc"><p>Historical, should not be used. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a8381006451076292d6708feef52460fe" name="a81345d68d0dcf73e0794f2b826025d23a8381006451076292d6708feef52460fe"></a>SHARE_FILES&#160;</td><td class="fielddoc"><p>Share the file descriptor table between parent and child. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23ac999d25ae1d89241ac298924b5ab5275" name="a81345d68d0dcf73e0794f2b826025d23ac999d25ae1d89241ac298924b5ab5275"></a>SHARE_FS&#160;</td><td class="fielddoc"><p>Parent and child share file system information like CWD, the root (/) directory and the umask. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a9004c456f02a94e3a18b11897fbb565a" name="a81345d68d0dcf73e0794f2b826025d23a9004c456f02a94e3a18b11897fbb565a"></a>INTO_CGROUP&#160;</td><td class="fielddoc"><p>Place the child into a different version 2 cgroup, according to the cgroup field file descriptor in <a class="el" href="structcosmos_1_1CloneArgs.html" title="Argument struct for proc::clone().">CloneArgs</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23af35c3f0c407b9846cdae1715cb4edfcd" name="a81345d68d0dcf73e0794f2b826025d23af35c3f0c407b9846cdae1715cb4edfcd"></a>SHARE_IO&#160;</td><td class="fielddoc"><p>Share the I/O context between parent and child. This affects I/O scheduling, processes that share their context are treated as one. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a46ca863c193c540343e2934cb29e72bb" name="a81345d68d0dcf73e0794f2b826025d23a46ca863c193c540343e2934cb29e72bb"></a>NEW_CGROUP&#160;</td><td class="fielddoc"><p>Create the child in a new cgroup namespace (requires CAP_SYS_ADMIN). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a2839441b4266f8636fdb26947f4ba545" name="a81345d68d0dcf73e0794f2b826025d23a2839441b4266f8636fdb26947f4ba545"></a>NEW_IPC&#160;</td><td class="fielddoc"><p>Create the child in a new IPC namespace (requires CAP_SYS_ADMIN). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a410ae674d99f009dae525106d7860279" name="a81345d68d0dcf73e0794f2b826025d23a410ae674d99f009dae525106d7860279"></a>NEW_NET&#160;</td><td class="fielddoc"><p>Create the child in a new network namespace (requires CAP_SYS_ADMIN). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a9c94a9cbc772f654b5b6f76b177d640b" name="a81345d68d0dcf73e0794f2b826025d23a9c94a9cbc772f654b5b6f76b177d640b"></a>NEW_MOUNT&#160;</td><td class="fielddoc"><p>Create the child in a new mount namespace (requires CAP_SYS_ADMIN). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a9beb6494f348fd41996dc5aa096b84ac" name="a81345d68d0dcf73e0794f2b826025d23a9beb6494f348fd41996dc5aa096b84ac"></a>NEW_PID&#160;</td><td class="fielddoc"><p>Create the child in a new PID namespace (requires CAP_SYS_ADMIN). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a74572532c61ee2d2efbe443e36effdf5" name="a81345d68d0dcf73e0794f2b826025d23a74572532c61ee2d2efbe443e36effdf5"></a>NEW_USER&#160;</td><td class="fielddoc"><p>Create the child in a new user namespace. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a58dbe77ff9a8e6c768cc74ceedd8e01a" name="a81345d68d0dcf73e0794f2b826025d23a58dbe77ff9a8e6c768cc74ceedd8e01a"></a>NEW_UTS&#160;</td><td class="fielddoc"><p>Create the child in a new UTS namespace (requires CAP_SYS_ADMIN). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a846bd28e8d96ffb18ad17a2d322ceb47" name="a81345d68d0dcf73e0794f2b826025d23a846bd28e8d96ffb18ad17a2d322ceb47"></a>SHARE_PARENT&#160;</td><td class="fielddoc"><p>Make the caller's parent also the child's parent. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23ae416e5ad36704424fb0239fbe44b0a49" name="a81345d68d0dcf73e0794f2b826025d23ae416e5ad36704424fb0239fbe44b0a49"></a>PARENT_SETTID&#160;</td><td class="fielddoc"><p>Store the child's thread ID in the parent_tid <a class="el" href="structcosmos_1_1CloneArgs.html" title="Argument struct for proc::clone().">CloneArgs</a> member in parent's memory. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23ab9903e1d1147b9a946468d28c273550a" name="a81345d68d0dcf73e0794f2b826025d23ab9903e1d1147b9a946468d28c273550a"></a>PIDFD&#160;</td><td class="fielddoc"><p>Allocate a PIDFD file descriptor for the child and store it at the location pointed to by the pidfd <a class="el" href="structcosmos_1_1CloneArgs.html" title="Argument struct for proc::clone().">CloneArgs</a> member. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a3fff116fb0ae44abf4417e6117be6f7e" name="a81345d68d0dcf73e0794f2b826025d23a3fff116fb0ae44abf4417e6117be6f7e"></a>PTRACE&#160;</td><td class="fielddoc"><p>If the current process is being traced then the child will also be traced. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a1ee5a7596c04294a377bde08237a5be8" name="a81345d68d0dcf73e0794f2b826025d23a1ee5a7596c04294a377bde08237a5be8"></a>SETTLS&#160;</td><td class="fielddoc"><p>The TLS descriptor is set to the tls member of <a class="el" href="structcosmos_1_1CloneArgs.html" title="Argument struct for proc::clone().">CloneArgs</a> (architecture dependent meaning). </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23aa68bd0436c48179565dedef308e7b164" name="a81345d68d0dcf73e0794f2b826025d23aa68bd0436c48179565dedef308e7b164"></a>SIGHAND&#160;</td><td class="fielddoc"><p>Parent and child share the same table of signal handlers. <a class="el" href="classcosmos_1_1Signal.html" title="Represents a POSIX signal number and offers a minimal API around it.">Signal</a> masks and list of pending signals are still distinct. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a31fcfa546ed1534afd8c232e53cb8a6b" name="a81345d68d0dcf73e0794f2b826025d23a31fcfa546ed1534afd8c232e53cb8a6b"></a>SHARE_SYSVSEM&#160;</td><td class="fielddoc"><p>Parent and child share a single list of semaphore adjustment values. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a57f8b9e1bf05e9058d703c68ac2d53b0" name="a81345d68d0dcf73e0794f2b826025d23a57f8b9e1bf05e9058d703c68ac2d53b0"></a>THREAD&#160;</td><td class="fielddoc"><p>The child shares the same thread group as the parent. Thread groups are used to implement thread semantics. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23aee329ea59dcbfbd03dfd4624c1249854" name="a81345d68d0dcf73e0794f2b826025d23aee329ea59dcbfbd03dfd4624c1249854"></a>UNTRACED&#160;</td><td class="fielddoc"><p>A tracing process cannot force CLONE_PTRACE on the child. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a13e7b14e273093c5ae8b4fe08e0053b4" name="a81345d68d0dcf73e0794f2b826025d23a13e7b14e273093c5ae8b4fe08e0053b4"></a>VFORK&#160;</td><td class="fielddoc"><p>The calling process is suspended until the child calls execve() or _exit(), see vfork(); should not be used. </p>
</td></tr>
<tr><td class="fieldname"><a id="a81345d68d0dcf73e0794f2b826025d23a461d84b494ad0557d49a95a3dbe0d7e6" name="a81345d68d0dcf73e0794f2b826025d23a461d84b494ad0557d49a95a3dbe0d7e6"></a>SHARE_VM&#160;</td><td class="fielddoc"><p>Parent and child share the same address space and thus observe the same memory writes and mappings/unmappings. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="clone_8hxx_source.html#l00027">27</a> of file <a class="el" href="clone_8hxx_source.html">clone.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>                     : uint64_t {</div>
<div class="line"><span class="lineno">   28</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a10e78422e94fb45efad82eeda9f8b098">CHILD_CLEARTID</a> = CLONE_CHILD_CLEARTID,  </div>
<div class="line"><span class="lineno">   29</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a01b960db885f70dd47014ecf4b071545">CHILD_SETTID</a>   = CLONE_CHILD_SETTID,    </div>
<div class="line"><span class="lineno">   30</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a6569809246346b80497e2b0800230219">CLEAR_SIGHAND</a>  = CLONE_CLEAR_SIGHAND,   </div>
<div class="line"><span class="lineno">   31</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a26009b174705bcc5fb09853d7e61dba1">DETACHED</a>       = CLONE_DETACHED,        </div>
<div class="line"><span class="lineno">   32</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a8381006451076292d6708feef52460fe">SHARE_FILES</a>    = CLONE_FILES,           </div>
<div class="line"><span class="lineno">   33</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23ac999d25ae1d89241ac298924b5ab5275">SHARE_FS</a>       = CLONE_FS,              </div>
<div class="line"><span class="lineno">   34</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a9004c456f02a94e3a18b11897fbb565a">INTO_CGROUP</a>    = CLONE_INTO_CGROUP,     </div>
<div class="line"><span class="lineno">   35</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23af35c3f0c407b9846cdae1715cb4edfcd">SHARE_IO</a>       = CLONE_IO,              </div>
<div class="line"><span class="lineno">   36</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a46ca863c193c540343e2934cb29e72bb">NEW_CGROUP</a>     = CLONE_NEWCGROUP,       </div>
<div class="line"><span class="lineno">   37</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a2839441b4266f8636fdb26947f4ba545">NEW_IPC</a>        = CLONE_NEWIPC,          </div>
<div class="line"><span class="lineno">   38</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a410ae674d99f009dae525106d7860279">NEW_NET</a>        = CLONE_NEWNET,          </div>
<div class="line"><span class="lineno">   39</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a9c94a9cbc772f654b5b6f76b177d640b">NEW_MOUNT</a>      = CLONE_NEWNS,           </div>
<div class="line"><span class="lineno">   40</span>        NEW_NS         = CLONE_NEWNS,           <span class="comment">// just a synonym using the old compatibility name</span></div>
<div class="line"><span class="lineno">   41</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a9beb6494f348fd41996dc5aa096b84ac">NEW_PID</a>        = CLONE_NEWPID,          </div>
<div class="line"><span class="lineno">   42</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a74572532c61ee2d2efbe443e36effdf5">NEW_USER</a>       = CLONE_NEWUSER,         </div>
<div class="line"><span class="lineno">   43</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a58dbe77ff9a8e6c768cc74ceedd8e01a">NEW_UTS</a>        = CLONE_NEWUTS,          </div>
<div class="line"><span class="lineno">   44</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a846bd28e8d96ffb18ad17a2d322ceb47">SHARE_PARENT</a>   = CLONE_PARENT,          </div>
<div class="line"><span class="lineno">   45</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23ae416e5ad36704424fb0239fbe44b0a49">PARENT_SETTID</a>  = CLONE_PARENT_SETTID,   </div>
<div class="line"><span class="lineno">   46</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23ab9903e1d1147b9a946468d28c273550a">PIDFD</a>          = CLONE_PIDFD,           </div>
<div class="line"><span class="lineno">   47</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a3fff116fb0ae44abf4417e6117be6f7e">PTRACE</a>         = CLONE_PTRACE,          </div>
<div class="line"><span class="lineno">   48</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a1ee5a7596c04294a377bde08237a5be8">SETTLS</a>         = CLONE_SETTLS,          </div>
<div class="line"><span class="lineno">   49</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23aa68bd0436c48179565dedef308e7b164">SIGHAND</a>        = CLONE_SIGHAND,         </div>
<div class="line"><span class="lineno">   50</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a31fcfa546ed1534afd8c232e53cb8a6b">SHARE_SYSVSEM</a>  = CLONE_SYSVSEM,         </div>
<div class="line"><span class="lineno">   51</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a57f8b9e1bf05e9058d703c68ac2d53b0">THREAD</a>         = CLONE_THREAD,          </div>
<div class="line"><span class="lineno">   52</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23aee329ea59dcbfbd03dfd4624c1249854">UNTRACED</a>       = CLONE_UNTRACED,        </div>
<div class="line"><span class="lineno">   53</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a13e7b14e273093c5ae8b4fe08e0053b4">VFORK</a>          = CLONE_VFORK,           </div>
<div class="line"><span class="lineno">   54</span>        <a class="code hl_enumvalue" href="#a81345d68d0dcf73e0794f2b826025d23a461d84b494ad0557d49a95a3dbe0d7e6">SHARE_VM</a>       = CLONE_VM               </div>
<div class="line"><span class="lineno">   55</span>};</div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a01b960db885f70dd47014ecf4b071545"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a01b960db885f70dd47014ecf4b071545">cosmos::CloneFlag::CHILD_SETTID</a></div><div class="ttdeci">@ CHILD_SETTID</div><div class="ttdoc">Store the child's thread ID in the child_tid CloneArgs member in child's memory before the child runs...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a10e78422e94fb45efad82eeda9f8b098"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a10e78422e94fb45efad82eeda9f8b098">cosmos::CloneFlag::CHILD_CLEARTID</a></div><div class="ttdeci">@ CHILD_CLEARTID</div><div class="ttdoc">Clear the child_tid CloneArgs member in child's memory when the child exits, used by threading librar...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a13e7b14e273093c5ae8b4fe08e0053b4"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a13e7b14e273093c5ae8b4fe08e0053b4">cosmos::CloneFlag::VFORK</a></div><div class="ttdeci">@ VFORK</div><div class="ttdoc">The calling process is suspended until the child calls execve() or _exit(), see vfork(); should not b...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a1ee5a7596c04294a377bde08237a5be8"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a1ee5a7596c04294a377bde08237a5be8">cosmos::CloneFlag::SETTLS</a></div><div class="ttdeci">@ SETTLS</div><div class="ttdoc">The TLS descriptor is set to the tls member of CloneArgs (architecture dependent meaning).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a26009b174705bcc5fb09853d7e61dba1"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a26009b174705bcc5fb09853d7e61dba1">cosmos::CloneFlag::DETACHED</a></div><div class="ttdeci">@ DETACHED</div><div class="ttdoc">Historical, should not be used.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a2839441b4266f8636fdb26947f4ba545"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a2839441b4266f8636fdb26947f4ba545">cosmos::CloneFlag::NEW_IPC</a></div><div class="ttdeci">@ NEW_IPC</div><div class="ttdoc">Create the child in a new IPC namespace (requires CAP_SYS_ADMIN).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a31fcfa546ed1534afd8c232e53cb8a6b"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a31fcfa546ed1534afd8c232e53cb8a6b">cosmos::CloneFlag::SHARE_SYSVSEM</a></div><div class="ttdeci">@ SHARE_SYSVSEM</div><div class="ttdoc">Parent and child share a single list of semaphore adjustment values.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a3fff116fb0ae44abf4417e6117be6f7e"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a3fff116fb0ae44abf4417e6117be6f7e">cosmos::CloneFlag::PTRACE</a></div><div class="ttdeci">@ PTRACE</div><div class="ttdoc">If the current process is being traced then the child will also be traced.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a410ae674d99f009dae525106d7860279"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a410ae674d99f009dae525106d7860279">cosmos::CloneFlag::NEW_NET</a></div><div class="ttdeci">@ NEW_NET</div><div class="ttdoc">Create the child in a new network namespace (requires CAP_SYS_ADMIN).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a461d84b494ad0557d49a95a3dbe0d7e6"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a461d84b494ad0557d49a95a3dbe0d7e6">cosmos::CloneFlag::SHARE_VM</a></div><div class="ttdeci">@ SHARE_VM</div><div class="ttdoc">Parent and child share the same address space and thus observe the same memory writes and mappings/un...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a46ca863c193c540343e2934cb29e72bb"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a46ca863c193c540343e2934cb29e72bb">cosmos::CloneFlag::NEW_CGROUP</a></div><div class="ttdeci">@ NEW_CGROUP</div><div class="ttdoc">Create the child in a new cgroup namespace (requires CAP_SYS_ADMIN).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a57f8b9e1bf05e9058d703c68ac2d53b0"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a57f8b9e1bf05e9058d703c68ac2d53b0">cosmos::CloneFlag::THREAD</a></div><div class="ttdeci">@ THREAD</div><div class="ttdoc">The child shares the same thread group as the parent. Thread groups are used to implement thread sema...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a58dbe77ff9a8e6c768cc74ceedd8e01a"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a58dbe77ff9a8e6c768cc74ceedd8e01a">cosmos::CloneFlag::NEW_UTS</a></div><div class="ttdeci">@ NEW_UTS</div><div class="ttdoc">Create the child in a new UTS namespace (requires CAP_SYS_ADMIN).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a6569809246346b80497e2b0800230219"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a6569809246346b80497e2b0800230219">cosmos::CloneFlag::CLEAR_SIGHAND</a></div><div class="ttdeci">@ CLEAR_SIGHAND</div><div class="ttdoc">Reset all signal handling dispositions to their defaults in the child.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a74572532c61ee2d2efbe443e36effdf5"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a74572532c61ee2d2efbe443e36effdf5">cosmos::CloneFlag::NEW_USER</a></div><div class="ttdeci">@ NEW_USER</div><div class="ttdoc">Create the child in a new user namespace.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a8381006451076292d6708feef52460fe"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a8381006451076292d6708feef52460fe">cosmos::CloneFlag::SHARE_FILES</a></div><div class="ttdeci">@ SHARE_FILES</div><div class="ttdoc">Share the file descriptor table between parent and child.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a846bd28e8d96ffb18ad17a2d322ceb47"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a846bd28e8d96ffb18ad17a2d322ceb47">cosmos::CloneFlag::SHARE_PARENT</a></div><div class="ttdeci">@ SHARE_PARENT</div><div class="ttdoc">Make the caller's parent also the child's parent.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a9004c456f02a94e3a18b11897fbb565a"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a9004c456f02a94e3a18b11897fbb565a">cosmos::CloneFlag::INTO_CGROUP</a></div><div class="ttdeci">@ INTO_CGROUP</div><div class="ttdoc">Place the child into a different version 2 cgroup, according to the cgroup field file descriptor in C...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a9beb6494f348fd41996dc5aa096b84ac"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a9beb6494f348fd41996dc5aa096b84ac">cosmos::CloneFlag::NEW_PID</a></div><div class="ttdeci">@ NEW_PID</div><div class="ttdoc">Create the child in a new PID namespace (requires CAP_SYS_ADMIN).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23a9c94a9cbc772f654b5b6f76b177d640b"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23a9c94a9cbc772f654b5b6f76b177d640b">cosmos::CloneFlag::NEW_MOUNT</a></div><div class="ttdeci">@ NEW_MOUNT</div><div class="ttdoc">Create the child in a new mount namespace (requires CAP_SYS_ADMIN).</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23aa68bd0436c48179565dedef308e7b164"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23aa68bd0436c48179565dedef308e7b164">cosmos::CloneFlag::SIGHAND</a></div><div class="ttdeci">@ SIGHAND</div><div class="ttdoc">Parent and child share the same table of signal handlers. Signal masks and list of pending signals ar...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23ab9903e1d1147b9a946468d28c273550a"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23ab9903e1d1147b9a946468d28c273550a">cosmos::CloneFlag::PIDFD</a></div><div class="ttdeci">@ PIDFD</div><div class="ttdoc">Allocate a PIDFD file descriptor for the child and store it at the location pointed to by the pidfd C...</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23ac999d25ae1d89241ac298924b5ab5275"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23ac999d25ae1d89241ac298924b5ab5275">cosmos::CloneFlag::SHARE_FS</a></div><div class="ttdeci">@ SHARE_FS</div><div class="ttdoc">Parent and child share file system information like CWD, the root (/) directory and the umask.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23ae416e5ad36704424fb0239fbe44b0a49"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23ae416e5ad36704424fb0239fbe44b0a49">cosmos::CloneFlag::PARENT_SETTID</a></div><div class="ttdeci">@ PARENT_SETTID</div><div class="ttdoc">Store the child's thread ID in the parent_tid CloneArgs member in parent's memory.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23aee329ea59dcbfbd03dfd4624c1249854"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23aee329ea59dcbfbd03dfd4624c1249854">cosmos::CloneFlag::UNTRACED</a></div><div class="ttdeci">@ UNTRACED</div><div class="ttdoc">A tracing process cannot force CLONE_PTRACE on the child.</div></div>
<div class="ttc" id="aclone_8hxx_html_a81345d68d0dcf73e0794f2b826025d23af35c3f0c407b9846cdae1715cb4edfcd"><div class="ttname"><a href="#a81345d68d0dcf73e0794f2b826025d23af35c3f0c407b9846cdae1715cb4edfcd">cosmos::CloneFlag::SHARE_IO</a></div><div class="ttdeci">@ SHARE_IO</div><div class="ttdoc">Share the I/O context between parent and child. This affects I/O scheduling, processes that share the...</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a80571649aea2e85aec818bda16e9147b" name="a80571649aea2e85aec818bda16e9147b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80571649aea2e85aec818bda16e9147b">&#9670;&#160;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::optional&lt; ProcessID &gt; cosmos::proc::clone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1CloneArgs.html">CloneArgs</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a child thread or process according to <code>args</code>. </p>
<p>This is a lower level version of proc::fork() that allows detailed control over the child properties. Among other it allows to create lightweight threads or new namespaces for containerization.</p>
<dl class="section see"><dt>See also</dt><dd>CloneArgs and CloneFlag for the detailed settings that are available.</dd></dl>
<p>Due to the clone call's complexity and the low level nature of this call libcosmos does not impose additional restrictions or add safety nets. This means you need to take care of the lifetime of any file descriptors that are returned from this call, like of the PID FD when using CloneFlag::PIDFD.</p>
<dl class="section note"><dt>Note</dt><dd>This uses the clone3() system call which is currently not fully integrated in glibc or in tools like Valgrind.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>In the parent context this returns the process ID of the new child process. In the child context std::nullopt is returned. On error an ApiError is thrown. </dd></dl>

<p class="definition">Definition at line <a class="el" href="clone_8cxx_source.html#l00031">31</a> of file <a class="el" href="clone_8cxx_source.html">clone.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>                                                    {</div>
<div class="line"><span class="lineno">   32</span>        <span class="keyword">const</span> <span class="keyword">auto</span> child = clone3(args);</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>        <span class="keywordflow">if</span> (child == -1) {</div>
<div class="line"><span class="lineno">   35</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;clone3()&quot;</span>));</div>
<div class="line"><span class="lineno">   36</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (child == 0) {</div>
<div class="line"><span class="lineno">   37</span>                <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><span class="lineno">   38</span>        }</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>        <span class="keywordflow">return</span> <a class="code hl_enumeration" href="proc_2types_8hxx.html#a4c274565c8010d58379ba7ac3d6e0d9a">ProcessID</a>{child};</div>
<div class="line"><span class="lineno">   41</span>}</div>
<div class="ttc" id="aproc_2types_8hxx_html_a4c274565c8010d58379ba7ac3d6e0d9a"><div class="ttname"><a href="proc_2types_8hxx.html#a4c274565c8010d58379ba7ac3d6e0d9a">cosmos::ProcessID</a></div><div class="ttdeci">ProcessID</div><div class="ttdef"><b>Definition</b> <a href="proc_2types_8hxx_source.html#l00025">types.hxx:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_30ecb8352961dc4a9e0e79283421d739.html">proc</a></li><li class="navelem"><a class="el" href="clone_8hxx.html">clone.hxx</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
