<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: include/fs/filesystem.hxx File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('filesystem_8hxx.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">filesystem.hxx File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/close_range.h&gt;</code><br />
<code>#include &lt;optional&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;string_view&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;cosmos/SysString.hxx&gt;</code><br />
<code>#include &lt;cosmos/dso_export.h&gt;</code><br />
<code>#include &lt;cosmos/error/errno.hxx&gt;</code><br />
<code>#include &lt;cosmos/fs/DirFD.hxx&gt;</code><br />
<code>#include &lt;cosmos/fs/FileDescriptor.hxx&gt;</code><br />
<code>#include &lt;cosmos/fs/types.hxx&gt;</code><br />
<code>#include &lt;cosmos/types.hxx&gt;</code><br />
</div>
<p><a href="filesystem_8hxx_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcosmos_1_1fs_1_1CopyFileRangeParameters.html">cosmos::fs::CopyFileRangeParameters</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">set of parameters for copy_file_range().  <a href="structcosmos_1_1fs_1_1CopyFileRangeParameters.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a168e1bccac072a6fe45333293dd8f503" id="r_a168e1bccac072a6fe45333293dd8f503"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a168e1bccac072a6fe45333293dd8f503">cosmos::fs::CloseRangeFlags</a> = <a class="el" href="classcosmos_1_1BitMask.html">BitMask</a>&lt;<a class="el" href="#ade33c38eca1d5173056d06cbe87382d7">CloseRangeFlag</a>&gt;</td></tr>
<tr class="memdesc:a168e1bccac072a6fe45333293dd8f503"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags used in cosmos::fs::close_range().  <br /></td></tr>
<tr class="separator:a168e1bccac072a6fe45333293dd8f503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bf593b9c18e5a7895333da6e8d0dcb" id="r_ae0bf593b9c18e5a7895333da6e8d0dcb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0bf593b9c18e5a7895333da6e8d0dcb">cosmos::fs::AccessChecks</a> = <a class="el" href="classcosmos_1_1BitMask.html">BitMask</a>&lt;<a class="el" href="#a361c5c05ce4d64cd3e955bd241dae937">AccessCheck</a>&gt;</td></tr>
<tr class="separator:ae0bf593b9c18e5a7895333da6e8d0dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b34a6561653d439a99469f9ecf21d27" id="r_a6b34a6561653d439a99469f9ecf21d27"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b34a6561653d439a99469f9ecf21d27">cosmos::fs::AccessFlags</a> = <a class="el" href="classcosmos_1_1BitMask.html">BitMask</a>&lt;<a class="el" href="#afdbcf7bc1c78572df620c55d1b5db7ad">AccessFlag</a>&gt;</td></tr>
<tr class="separator:a6b34a6561653d439a99469f9ecf21d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ae27ea3b8d02bc5b21116f34e5ae52" id="r_aa0ae27ea3b8d02bc5b21116f34e5ae52"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0ae27ea3b8d02bc5b21116f34e5ae52">cosmos::fs::LockFlags</a> = <a class="el" href="classcosmos_1_1BitMask.html">BitMask</a>&lt;<a class="el" href="#ad005c641ab67a026d7e27887668bd91b">LockFlag</a>&gt;</td></tr>
<tr class="memdesc:aa0ae27ea3b8d02bc5b21116f34e5ae52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Additional flags influencing flock behaviour.  <br /></td></tr>
<tr class="separator:aa0ae27ea3b8d02bc5b21116f34e5ae52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ade33c38eca1d5173056d06cbe87382d7" id="r_ade33c38eca1d5173056d06cbe87382d7"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade33c38eca1d5173056d06cbe87382d7">cosmos::fs::CloseRangeFlag</a> : unsigned int { <a class="el" href="#ade33c38eca1d5173056d06cbe87382d7a009eaa7119fb4c83c5e487874d7e2218">CLOEXEC</a> = CLOSE_RANGE_CLOEXEC
, <a class="el" href="#ade33c38eca1d5173056d06cbe87382d7aa30806e76bde6bbd711d6cd0376b4a16">UNSHARE</a> = CLOSE_RANGE_UNSHARE
 }</td></tr>
<tr class="separator:ade33c38eca1d5173056d06cbe87382d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361c5c05ce4d64cd3e955bd241dae937" id="r_a361c5c05ce4d64cd3e955bd241dae937"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a361c5c05ce4d64cd3e955bd241dae937">cosmos::fs::AccessCheck</a> : int { <a class="el" href="#a361c5c05ce4d64cd3e955bd241dae937ac0dce885d45da898502898bc994d2623">READ_OK</a> = R_OK
, <a class="el" href="#a361c5c05ce4d64cd3e955bd241dae937a88c7dbe6cb83ed7007d031d2aaf99da5">WRITE_OK</a> = W_OK
, <a class="el" href="#a361c5c05ce4d64cd3e955bd241dae937a171f38e8e43f857c7402f82b150a4ca1">EXEC_OK</a> = X_OK
 }</td></tr>
<tr class="memdesc:a361c5c05ce4d64cd3e955bd241dae937"><td class="mdescLeft">&#160;</td><td class="mdescRight">Different access checks that can be performed in check_access().  <a href="#a361c5c05ce4d64cd3e955bd241dae937">More...</a><br /></td></tr>
<tr class="separator:a361c5c05ce4d64cd3e955bd241dae937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdbcf7bc1c78572df620c55d1b5db7ad" id="r_afdbcf7bc1c78572df620c55d1b5db7ad"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdbcf7bc1c78572df620c55d1b5db7ad">cosmos::fs::AccessFlag</a> : int { <a class="el" href="#afdbcf7bc1c78572df620c55d1b5db7adae52c96d4e96a5c71445c7ff43828db60">EFFECTIVE_CREDS</a> = AT_EACCESS
, <a class="el" href="#afdbcf7bc1c78572df620c55d1b5db7adaaa9f4bfb0e17036e9c2341812e1858e8">NO_FOLLOW</a> = AT_SYMLINK_NOFOLLOW
 }</td></tr>
<tr class="memdesc:afdbcf7bc1c78572df620c55d1b5db7ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra flags that influence the behaviour of check_access_at(), and check_access_fd().  <a href="#afdbcf7bc1c78572df620c55d1b5db7ad">More...</a><br /></td></tr>
<tr class="separator:afdbcf7bc1c78572df620c55d1b5db7ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6cd6d61123c3f79bbddaee234e718e4" id="r_ad6cd6d61123c3f79bbddaee234e718e4"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4">cosmos::fs::LockOperation</a> : int { <a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4a46d3007a05c254d04a6c9ffc06dc889f">LOCK_SHARED</a> = LOCK_SH
, <a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4acd40b665c0db65c2d49086a672f23ff5">LOCK_EXCLUSIVE</a> = LOCK_EX
, <a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4a08f473e8e1515801cb25e584a6832f34">UNLOCK</a> = LOCK_UN
 }</td></tr>
<tr class="memdesc:ad6cd6d61123c3f79bbddaee234e718e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags used with flock().  <a href="#ad6cd6d61123c3f79bbddaee234e718e4">More...</a><br /></td></tr>
<tr class="separator:ad6cd6d61123c3f79bbddaee234e718e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad005c641ab67a026d7e27887668bd91b" id="r_ad005c641ab67a026d7e27887668bd91b"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad005c641ab67a026d7e27887668bd91b">cosmos::fs::LockFlag</a> : int { <a class="el" href="#ad005c641ab67a026d7e27887668bd91ba3fbd5575623e74fff385036c9ee72c23">LOCK_NONBLOCK</a> = LOCK_NB
 }</td></tr>
<tr class="separator:ad005c641ab67a026d7e27887668bd91b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a07a512199682e4521e6be47a15a992d5" id="r_a07a512199682e4521e6be47a15a992d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a07a512199682e4521e6be47a15a992d5">cosmos::fs::open</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="fs_2types_8hxx.html#afe1708354398da6bbdde42f1cb5c1d1e">OpenMode</a> mode, const <a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a> flags, const std::optional&lt; <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> &gt; fmode={})</td></tr>
<tr class="memdesc:a07a512199682e4521e6be47a15a992d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file using specific OpenFlags, potentially creating it first using the given <code>fmode</code>.  <br /></td></tr>
<tr class="separator:a07a512199682e4521e6be47a15a992d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cce00bc61a7afc23ad40f1877d8deea" id="r_a6cce00bc61a7afc23ad40f1877d8deea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a6cce00bc61a7afc23ad40f1877d8deea">cosmos::fs::open_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="fs_2types_8hxx.html#afe1708354398da6bbdde42f1cb5c1d1e">OpenMode</a> mode, const <a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a> flags, const std::optional&lt; <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> &gt; fmode={})</td></tr>
<tr class="memdesc:a6cce00bc61a7afc23ad40f1877d8deea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the given path relative to the given directory file descriptor <code>dir_fd</code>.  <br /></td></tr>
<tr class="separator:a6cce00bc61a7afc23ad40f1877d8deea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a916c9449269db0db5d1dad9d304b218e" id="r_a916c9449269db0db5d1dad9d304b218e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a916c9449269db0db5d1dad9d304b218e">cosmos::fs::close_range</a> (const <a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a> first, const <a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a> last=<a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92aefefdada147ab432d0fcb00983abdafa">FileNum::MAX_FD</a>, const <a class="el" href="#a168e1bccac072a6fe45333293dd8f503">CloseRangeFlags</a> flags=<a class="el" href="#a168e1bccac072a6fe45333293dd8f503">CloseRangeFlags</a>{})</td></tr>
<tr class="memdesc:a916c9449269db0db5d1dad9d304b218e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a range of file descriptor numbers in the current process.  <br /></td></tr>
<tr class="separator:a916c9449269db0db5d1dad9d304b218e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb649e2169ef4406dd298d5f9c53d8d" id="r_a9fb649e2169ef4406dd298d5f9c53d8d"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a>, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a9fb649e2169ef4406dd298d5f9c53d8d">cosmos::fs::make_tempfile</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> _template, const <a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a> flags=<a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a>{<a class="el" href="fs_2types_8hxx.html#aa65904a13ec31d33634f5870151cece2a009eaa7119fb4c83c5e487874d7e2218">OpenFlag::CLOEXEC</a>})</td></tr>
<tr class="memdesc:a9fb649e2169ef4406dd298d5f9c53d8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Safely create a temporary file and return it's file descriptor and path.  <br /></td></tr>
<tr class="separator:a9fb649e2169ef4406dd298d5f9c53d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f26c47a510a6331bea07c9eeebe3802" id="r_a0f26c47a510a6331bea07c9eeebe3802"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a0f26c47a510a6331bea07c9eeebe3802">cosmos::fs::make_tempdir</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> _template)</td></tr>
<tr class="memdesc:a0f26c47a510a6331bea07c9eeebe3802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Safely create a temporary directory and return it's path.  <br /></td></tr>
<tr class="separator:a0f26c47a510a6331bea07c9eeebe3802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898d857f5f63cb941c176f60626a2c1d" id="r_a898d857f5f63cb941c176f60626a2c1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a898d857f5f63cb941c176f60626a2c1d">cosmos::fs::make_fifo</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a898d857f5f63cb941c176f60626a2c1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a named pipe at the given file system location.  <br /></td></tr>
<tr class="separator:a898d857f5f63cb941c176f60626a2c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a631454468b12e6f34e4f563e11e530f7" id="r_a631454468b12e6f34e4f563e11e530f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a631454468b12e6f34e4f563e11e530f7">cosmos::fs::make_fifo_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a631454468b12e6f34e4f563e11e530f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a named pipe relative to the given directory descriptor.  <br /></td></tr>
<tr class="separator:a631454468b12e6f34e4f563e11e530f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c99845d5b4d013db51b3ad56376a29" id="r_a88c99845d5b4d013db51b3ad56376a29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcosmos_1_1FileMode.html">FileMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a88c99845d5b4d013db51b3ad56376a29">cosmos::fs::set_umask</a> (const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a88c99845d5b4d013db51b3ad56376a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the process's file creation mask.  <br /></td></tr>
<tr class="separator:a88c99845d5b4d013db51b3ad56376a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de9f076e4f3c206078059d2f80597c1" id="r_a4de9f076e4f3c206078059d2f80597c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a4de9f076e4f3c206078059d2f80597c1">cosmos::fs::exists_file</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a4de9f076e4f3c206078059d2f80597c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the given file system object exists.  <br /></td></tr>
<tr class="separator:a4de9f076e4f3c206078059d2f80597c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b2b114bde65e1ab82ffa035809883a0" id="r_a4b2b114bde65e1ab82ffa035809883a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a4b2b114bde65e1ab82ffa035809883a0">cosmos::fs::unlink_file</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a4b2b114bde65e1ab82ffa035809883a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the file object found at <code>path</code>.  <br /></td></tr>
<tr class="separator:a4b2b114bde65e1ab82ffa035809883a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e208eb32b83503e6adda5af652ff7e5" id="r_a3e208eb32b83503e6adda5af652ff7e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a3e208eb32b83503e6adda5af652ff7e5">cosmos::fs::unlink_file_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a3e208eb32b83503e6adda5af652ff7e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the file object found at <code>path</code> relative to <code>dir_fd</code>.  <br /></td></tr>
<tr class="separator:a3e208eb32b83503e6adda5af652ff7e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a778f76cd1be7e67b39ae143c77615100" id="r_a778f76cd1be7e67b39ae143c77615100"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a778f76cd1be7e67b39ae143c77615100">cosmos::fs::change_dir</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a778f76cd1be7e67b39ae143c77615100"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the calling process's current working directory to <code>path</code>.  <br /></td></tr>
<tr class="separator:a778f76cd1be7e67b39ae143c77615100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d3ddc73f00616d12678ead8b3b49e63" id="r_a3d3ddc73f00616d12678ead8b3b49e63"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a3d3ddc73f00616d12678ead8b3b49e63">cosmos::fs::get_working_dir</a> ()</td></tr>
<tr class="memdesc:a3d3ddc73f00616d12678ead8b3b49e63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the process's current working directory.  <br /></td></tr>
<tr class="separator:a3d3ddc73f00616d12678ead8b3b49e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b169f23cb68754a41bc36a14e141950" id="r_a3b169f23cb68754a41bc36a14e141950"><td class="memItemLeft" align="right" valign="top">std::optional&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a3b169f23cb68754a41bc36a14e141950">cosmos::fs::which</a> (const std::string_view exec_base) noexcept</td></tr>
<tr class="memdesc:a3b169f23cb68754a41bc36a14e141950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the full path to the executable program <code>exec_base</code>.  <br /></td></tr>
<tr class="separator:a3b169f23cb68754a41bc36a14e141950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fba2ed674993063d43d9b70ba054ff5" id="r_a7fba2ed674993063d43d9b70ba054ff5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a7fba2ed674993063d43d9b70ba054ff5">cosmos::fs::make_dir</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a7fba2ed674993063d43d9b70ba054ff5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a directory at the given location.  <br /></td></tr>
<tr class="separator:a7fba2ed674993063d43d9b70ba054ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698fbf13abbc24b3e5317bef003fb433" id="r_a698fbf13abbc24b3e5317bef003fb433"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a698fbf13abbc24b3e5317bef003fb433">cosmos::fs::make_dir_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a698fbf13abbc24b3e5317bef003fb433"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a directory at the location relative to <code>dir_fd</code>.  <br /></td></tr>
<tr class="separator:a698fbf13abbc24b3e5317bef003fb433"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf37aa6e8cfdf226891edaf3e2497fe4" id="r_aaf37aa6e8cfdf226891edaf3e2497fe4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#aaf37aa6e8cfdf226891edaf3e2497fe4">cosmos::fs::remove_dir</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:aaf37aa6e8cfdf226891edaf3e2497fe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes an empty directory at the given location.  <br /></td></tr>
<tr class="separator:aaf37aa6e8cfdf226891edaf3e2497fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab16b17e2a1b67b8c6a53fcccf007bcfb" id="r_ab16b17e2a1b67b8c6a53fcccf007bcfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#ab16b17e2a1b67b8c6a53fcccf007bcfb">cosmos::fs::remove_dir_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:ab16b17e2a1b67b8c6a53fcccf007bcfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes an empty directory relative to <code>dir_fd</code>.  <br /></td></tr>
<tr class="separator:ab16b17e2a1b67b8c6a53fcccf007bcfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d1e2ec20871f1c636c3633bf13e22f0" id="r_a5d1e2ec20871f1c636c3633bf13e22f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="errno_8hxx.html#a5c1aef3a972b5a9a3bb6b3df1aa01939">Errno</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a5d1e2ec20871f1c636c3633bf13e22f0">cosmos::fs::make_all_dirs</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a5d1e2ec20871f1c636c3633bf13e22f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a directory, potentially creating multiple directory components.  <br /></td></tr>
<tr class="separator:a5d1e2ec20871f1c636c3633bf13e22f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c2805520ffadd26df9686ee2b83f89" id="r_a46c2805520ffadd26df9686ee2b83f89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a46c2805520ffadd26df9686ee2b83f89">cosmos::fs::remove_tree</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a46c2805520ffadd26df9686ee2b83f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively removes all directory content in <code>path</code>.  <br /></td></tr>
<tr class="separator:a46c2805520ffadd26df9686ee2b83f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569f540b5b86d47a2dbd6555b0e33304" id="r_a569f540b5b86d47a2dbd6555b0e33304"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a569f540b5b86d47a2dbd6555b0e33304">cosmos::fs::change_mode</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a569f540b5b86d47a2dbd6555b0e33304"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="classcosmos_1_1FileMode.html" title="Represents the mode bits portion of a ModeT.">FileMode</a> of the given path.  <br /></td></tr>
<tr class="separator:a569f540b5b86d47a2dbd6555b0e33304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e99bfef1d1d1b18b67700104a670885" id="r_a3e99bfef1d1d1b18b67700104a670885"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a3e99bfef1d1d1b18b67700104a670885">cosmos::fs::change_mode</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> mode)</td></tr>
<tr class="memdesc:a3e99bfef1d1d1b18b67700104a670885"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="classcosmos_1_1FileMode.html" title="Represents the mode bits portion of a ModeT.">FileMode</a> of the given open file descriptor.  <br /></td></tr>
<tr class="separator:a3e99bfef1d1d1b18b67700104a670885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893c1a8ac740ed83399d98ae13b6c1c1" id="r_a893c1a8ac740ed83399d98ae13b6c1c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a893c1a8ac740ed83399d98ae13b6c1c1">cosmos::fs::change_owner</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const UserID uid, const GroupID gid=GroupID::INVALID)</td></tr>
<tr class="memdesc:a893c1a8ac740ed83399d98ae13b6c1c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change numerical owner and/or group ID of a file path.  <br /></td></tr>
<tr class="separator:a893c1a8ac740ed83399d98ae13b6c1c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3191968f87ff43c8f21c7f5c1b64ad44" id="r_a3191968f87ff43c8f21c7f5c1b64ad44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a3191968f87ff43c8f21c7f5c1b64ad44">cosmos::fs::change_owner</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const UserID uid, const GroupID gid=GroupID::INVALID)</td></tr>
<tr class="memdesc:a3191968f87ff43c8f21c7f5c1b64ad44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change numerical owner and/or group ID of the given open file descriptor.  <br /></td></tr>
<tr class="separator:a3191968f87ff43c8f21c7f5c1b64ad44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd3cff1e394de043be90460753e882e" id="r_abbd3cff1e394de043be90460753e882e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#abbd3cff1e394de043be90460753e882e">cosmos::fs::change_owner</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> user, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> group={})</td></tr>
<tr class="memdesc:abbd3cff1e394de043be90460753e882e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change owner and/or group of the given path by user name and/or group name.  <br /></td></tr>
<tr class="separator:abbd3cff1e394de043be90460753e882e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7d0e6578f72dae1d2f85758300e405" id="r_aab7d0e6578f72dae1d2f85758300e405"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#aab7d0e6578f72dae1d2f85758300e405">cosmos::fs::change_owner</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> user, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> group={})</td></tr>
<tr class="memdesc:aab7d0e6578f72dae1d2f85758300e405"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change owner and/or group of the given file descriptor by user name and/or group name.  <br /></td></tr>
<tr class="separator:aab7d0e6578f72dae1d2f85758300e405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e001ebc00e0793135462e694e8d0fc" id="r_ae1e001ebc00e0793135462e694e8d0fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1e001ebc00e0793135462e694e8d0fc">cosmos::fs::change_group</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const GroupID id)</td></tr>
<tr class="memdesc:ae1e001ebc00e0793135462e694e8d0fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience wrapper of change_owner() to change only the group of a file.  <br /></td></tr>
<tr class="separator:ae1e001ebc00e0793135462e694e8d0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae04e93338ed7aedfa0929dcf8265236" id="r_aae04e93338ed7aedfa0929dcf8265236"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae04e93338ed7aedfa0929dcf8265236">cosmos::fs::change_group</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> group)</td></tr>
<tr class="memdesc:aae04e93338ed7aedfa0929dcf8265236"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience wrapper of change_owner() to change only the group of a file.  <br /></td></tr>
<tr class="separator:aae04e93338ed7aedfa0929dcf8265236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39349f4e77a14de222bf283ba93b19a" id="r_ac39349f4e77a14de222bf283ba93b19a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac39349f4e77a14de222bf283ba93b19a">cosmos::fs::change_group</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const GroupID id)</td></tr>
<tr class="memdesc:ac39349f4e77a14de222bf283ba93b19a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience wrapper of change_owner() to change only the group of a file.  <br /></td></tr>
<tr class="separator:ac39349f4e77a14de222bf283ba93b19a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576270e3b154f614b94022a86737db23" id="r_a576270e3b154f614b94022a86737db23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a576270e3b154f614b94022a86737db23">cosmos::fs::change_group</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> group)</td></tr>
<tr class="memdesc:a576270e3b154f614b94022a86737db23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience wrapper of change_owner() to change only the group of a file.  <br /></td></tr>
<tr class="separator:a576270e3b154f614b94022a86737db23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c457413feeacbb5202aa4dcdc7a68d" id="r_ab4c457413feeacbb5202aa4dcdc7a68d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#ab4c457413feeacbb5202aa4dcdc7a68d">cosmos::fs::change_owner_nofollow</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const UserID uid, const GroupID gid=GroupID::INVALID)</td></tr>
<tr class="memdesc:ab4c457413feeacbb5202aa4dcdc7a68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes owner and/or group of the given path while not following symlinks.  <br /></td></tr>
<tr class="separator:ab4c457413feeacbb5202aa4dcdc7a68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02605ea17311b9eee3fe28a76c77f7fe" id="r_a02605ea17311b9eee3fe28a76c77f7fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a02605ea17311b9eee3fe28a76c77f7fe">cosmos::fs::change_owner_nofollow</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> user, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> group={})</td></tr>
<tr class="memdesc:a02605ea17311b9eee3fe28a76c77f7fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes owner and/or group of the given path while not following symlinks.  <br /></td></tr>
<tr class="separator:a02605ea17311b9eee3fe28a76c77f7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e11bf44ba09aee3707f8b820ce5da6b" id="r_a2e11bf44ba09aee3707f8b820ce5da6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a2e11bf44ba09aee3707f8b820ce5da6b">cosmos::fs::make_symlink</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> target, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a2e11bf44ba09aee3707f8b820ce5da6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a symbolic link at <code>path</code> pointing to <code>target</code>.  <br /></td></tr>
<tr class="separator:a2e11bf44ba09aee3707f8b820ce5da6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5125abb2183629bef55a32953b8f38e2" id="r_a5125abb2183629bef55a32953b8f38e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a5125abb2183629bef55a32953b8f38e2">cosmos::fs::make_symlink_at</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> target, const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a5125abb2183629bef55a32953b8f38e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a symbolic link relative to <code>dir_fd</code> pointing to <code>target</code>.  <br /></td></tr>
<tr class="separator:a5125abb2183629bef55a32953b8f38e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bae83ddf108f3040724bfbe5c78888a" id="r_a0bae83ddf108f3040724bfbe5c78888a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a0bae83ddf108f3040724bfbe5c78888a">cosmos::fs::read_symlink</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:a0bae83ddf108f3040724bfbe5c78888a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the target (content) of the symbolic link at <code>path</code>.  <br /></td></tr>
<tr class="separator:a0bae83ddf108f3040724bfbe5c78888a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae0fb212fcf2f872f0b926e2a4f32bfb" id="r_aae0fb212fcf2f872f0b926e2a4f32bfb"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#aae0fb212fcf2f872f0b926e2a4f32bfb">cosmos::fs::read_symlink_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path)</td></tr>
<tr class="memdesc:aae0fb212fcf2f872f0b926e2a4f32bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the target (content) of the symbolic link <code>path</code> relative to <code>dir_fd</code>.  <br /></td></tr>
<tr class="separator:aae0fb212fcf2f872f0b926e2a4f32bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d19b9be1be2683f5e5e9598f077e53" id="r_a44d19b9be1be2683f5e5e9598f077e53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a44d19b9be1be2683f5e5e9598f077e53">cosmos::fs::link</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> old_path, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> new_path)</td></tr>
<tr class="memdesc:a44d19b9be1be2683f5e5e9598f077e53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new (hard) link of the file found in <code>old_path</code> at <code>new_path</code>.  <br /></td></tr>
<tr class="separator:a44d19b9be1be2683f5e5e9598f077e53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249771802fa509a5ac6fc460fc8026b7" id="r_a249771802fa509a5ac6fc460fc8026b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a249771802fa509a5ac6fc460fc8026b7">cosmos::fs::linkat</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> old_dir, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> old_path, const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> new_dir, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> new_path, const <a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a> follow_old=<a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a>{false})</td></tr>
<tr class="memdesc:a249771802fa509a5ac6fc460fc8026b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new (hard) link based on lookups relative to <code>old_dir</code> and <code>new_dir</code>.  <br /></td></tr>
<tr class="separator:a249771802fa509a5ac6fc460fc8026b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af83b9e56140d0700c10baaff83afc863" id="r_af83b9e56140d0700c10baaff83afc863"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#af83b9e56140d0700c10baaff83afc863">cosmos::fs::linkat_fd</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> new_dir, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> new_path)</td></tr>
<tr class="memdesc:af83b9e56140d0700c10baaff83afc863"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special variant of linkat() that can link arbitrary file descriptors at a new location.  <br /></td></tr>
<tr class="separator:af83b9e56140d0700c10baaff83afc863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0df810258025dfd588c30f30fddd585" id="r_ae0df810258025dfd588c30f30fddd585"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#ae0df810258025dfd588c30f30fddd585">cosmos::fs::linkat_proc_fd</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> new_dir, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> new_path)</td></tr>
<tr class="memdesc:ae0df810258025dfd588c30f30fddd585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the same as linkat_fd() using linkat() and the /proc file system.  <br /></td></tr>
<tr class="separator:ae0df810258025dfd588c30f30fddd585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7f17a641dec61afafd25e05c351efbe" id="r_ac7f17a641dec61afafd25e05c351efbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#ac7f17a641dec61afafd25e05c351efbe">cosmos::fs::truncate</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, off_t length)</td></tr>
<tr class="memdesc:ac7f17a641dec61afafd25e05c351efbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the file size of the file referred to by <code>fd</code> to <code>length</code> bytes.  <br /></td></tr>
<tr class="separator:ac7f17a641dec61afafd25e05c351efbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe292e033959e0e6d2cf7d5c84b6729c" id="r_afe292e033959e0e6d2cf7d5c84b6729c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#afe292e033959e0e6d2cf7d5c84b6729c">cosmos::fs::truncate</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, off_t length)</td></tr>
<tr class="memdesc:afe292e033959e0e6d2cf7d5c84b6729c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the file size of the file found at the given <code>path</code> to <code>length</code> bytes.  <br /></td></tr>
<tr class="separator:afe292e033959e0e6d2cf7d5c84b6729c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf57e00042ece783fe411ab03bafad4d" id="r_abf57e00042ece783fe411ab03bafad4d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#abf57e00042ece783fe411ab03bafad4d">cosmos::fs::copy_file_range</a> (<a class="el" href="structcosmos_1_1fs_1_1CopyFileRangeParameters.html">CopyFileRangeParameters</a> &amp;pars)</td></tr>
<tr class="memdesc:abf57e00042ece783fe411ab03bafad4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy data between files directly in the kernel.  <br /></td></tr>
<tr class="separator:abf57e00042ece783fe411ab03bafad4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe081d07f47041bab2230dc997e3bae6" id="r_abe081d07f47041bab2230dc997e3bae6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#abe081d07f47041bab2230dc997e3bae6">cosmos::fs::copy_file_range</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd_in, const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd_out, const size_t len)</td></tr>
<tr class="memdesc:abe081d07f47041bab2230dc997e3bae6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy data between files directly in the kernel.  <br /></td></tr>
<tr class="separator:abe081d07f47041bab2230dc997e3bae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7a728432b1d58a2af66a00205f90f54" id="r_aa7a728432b1d58a2af66a00205f90f54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#aa7a728432b1d58a2af66a00205f90f54">cosmos::fs::check_access</a> (const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1BitMask.html">AccessChecks</a> checks={})</td></tr>
<tr class="memdesc:aa7a728432b1d58a2af66a00205f90f54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check file access permissions of <code>path</code>.  <br /></td></tr>
<tr class="separator:aa7a728432b1d58a2af66a00205f90f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38b3dbe88f497e737df0e66404ba9a8" id="r_ad38b3dbe88f497e737df0e66404ba9a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#ad38b3dbe88f497e737df0e66404ba9a8">cosmos::fs::check_access_at</a> (const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a> dir_fd, const <a class="el" href="structcosmos_1_1SysString.html">SysString</a> path, const <a class="el" href="classcosmos_1_1BitMask.html">AccessChecks</a> checks={}, const <a class="el" href="classcosmos_1_1BitMask.html">AccessFlags</a> flags={})</td></tr>
<tr class="memdesc:ad38b3dbe88f497e737df0e66404ba9a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check file access permissions of <code>path</code> relative to <code>dir_fd</code>.  <br /></td></tr>
<tr class="separator:ad38b3dbe88f497e737df0e66404ba9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae342388da9ba86c7286419b50417242a" id="r_ae342388da9ba86c7286419b50417242a"><td class="memItemLeft" align="right" valign="top">COSMOS_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#ae342388da9ba86c7286419b50417242a">cosmos::fs::check_access_fd</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="classcosmos_1_1BitMask.html">AccessChecks</a> check={}, const <a class="el" href="classcosmos_1_1BitMask.html">AccessFlags</a> flags={})</td></tr>
<tr class="memdesc:ae342388da9ba86c7286419b50417242a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check file access permissions of the already open file descriptor <code>fd</code>.  <br /></td></tr>
<tr class="separator:ae342388da9ba86c7286419b50417242a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d2b0366855b554c395354e9cbbc597" id="r_a11d2b0366855b554c395354e9cbbc597"><td class="memItemLeft" align="right" valign="top">COSMOS_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesystem_8cxx.html#a11d2b0366855b554c395354e9cbbc597">cosmos::fs::flock</a> (const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a> fd, const <a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4">LockOperation</a> operation, const <a class="el" href="#aa0ae27ea3b8d02bc5b21116f34e5ae52">LockFlags</a> flags={})</td></tr>
<tr class="memdesc:a11d2b0366855b554c395354e9cbbc597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply or remove an advisory lock on the given file descriptor.  <br /></td></tr>
<tr class="separator:a11d2b0366855b554c395354e9cbbc597"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File system related system calls. These is the lowest and most generic level of file system APIs that can be wrapped further in more comfortable types to use. </p>

<p class="definition">Definition in file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ae0bf593b9c18e5a7895333da6e8d0dcb" name="ae0bf593b9c18e5a7895333da6e8d0dcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0bf593b9c18e5a7895333da6e8d0dcb">&#9670;&#160;</a></span>AccessChecks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcosmos_1_1BitMask.html">cosmos::fs::AccessChecks</a> = BitMask&lt;AccessCheck&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00687">687</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>

</div>
</div>
<a id="a6b34a6561653d439a99469f9ecf21d27" name="a6b34a6561653d439a99469f9ecf21d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b34a6561653d439a99469f9ecf21d27">&#9670;&#160;</a></span>AccessFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcosmos_1_1BitMask.html">cosmos::fs::AccessFlags</a> = BitMask&lt;AccessFlag&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00720">720</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>

</div>
</div>
<a id="a168e1bccac072a6fe45333293dd8f503" name="a168e1bccac072a6fe45333293dd8f503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168e1bccac072a6fe45333293dd8f503">&#9670;&#160;</a></span>CloseRangeFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a168e1bccac072a6fe45333293dd8f503">cosmos::fs::CloseRangeFlags</a> = BitMask&lt;CloseRangeFlag&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags used in cosmos::fs::close_range(). </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00075">75</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>

</div>
</div>
<a id="aa0ae27ea3b8d02bc5b21116f34e5ae52" name="aa0ae27ea3b8d02bc5b21116f34e5ae52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ae27ea3b8d02bc5b21116f34e5ae52">&#9670;&#160;</a></span>LockFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#aa0ae27ea3b8d02bc5b21116f34e5ae52">cosmos::fs::LockFlags</a> = BitMask&lt;LockFlag&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Additional flags influencing flock behaviour. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00757">757</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a361c5c05ce4d64cd3e955bd241dae937" name="a361c5c05ce4d64cd3e955bd241dae937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361c5c05ce4d64cd3e955bd241dae937">&#9670;&#160;</a></span>AccessCheck</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#a361c5c05ce4d64cd3e955bd241dae937">cosmos::fs::AccessCheck</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Different access checks that can be performed in check_access(). </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a361c5c05ce4d64cd3e955bd241dae937ac0dce885d45da898502898bc994d2623" name="a361c5c05ce4d64cd3e955bd241dae937ac0dce885d45da898502898bc994d2623"></a>READ_OK&#160;</td><td class="fielddoc"><p>Read access is allowed. </p>
</td></tr>
<tr><td class="fieldname"><a id="a361c5c05ce4d64cd3e955bd241dae937a88c7dbe6cb83ed7007d031d2aaf99da5" name="a361c5c05ce4d64cd3e955bd241dae937a88c7dbe6cb83ed7007d031d2aaf99da5"></a>WRITE_OK&#160;</td><td class="fielddoc"><p>Write access is allowed. </p>
</td></tr>
<tr><td class="fieldname"><a id="a361c5c05ce4d64cd3e955bd241dae937a171f38e8e43f857c7402f82b150a4ca1" name="a361c5c05ce4d64cd3e955bd241dae937a171f38e8e43f857c7402f82b150a4ca1"></a>EXEC_OK&#160;</td><td class="fielddoc"><p>Execution is allowed. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00681">681</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  681</span>                       : <span class="keywordtype">int</span> {</div>
<div class="line"><span class="lineno">  682</span>         <a class="code hl_enumvalue" href="#a361c5c05ce4d64cd3e955bd241dae937ac0dce885d45da898502898bc994d2623">READ_OK</a> = R_OK, </div>
<div class="line"><span class="lineno">  683</span>        <a class="code hl_enumvalue" href="#a361c5c05ce4d64cd3e955bd241dae937a88c7dbe6cb83ed7007d031d2aaf99da5">WRITE_OK</a> = W_OK, </div>
<div class="line"><span class="lineno">  684</span>         <a class="code hl_enumvalue" href="#a361c5c05ce4d64cd3e955bd241dae937a171f38e8e43f857c7402f82b150a4ca1">EXEC_OK</a> = X_OK  </div>
<div class="line"><span class="lineno">  685</span>};</div>
<div class="ttc" id="afilesystem_8hxx_html_a361c5c05ce4d64cd3e955bd241dae937a171f38e8e43f857c7402f82b150a4ca1"><div class="ttname"><a href="#a361c5c05ce4d64cd3e955bd241dae937a171f38e8e43f857c7402f82b150a4ca1">cosmos::fs::AccessCheck::EXEC_OK</a></div><div class="ttdeci">@ EXEC_OK</div><div class="ttdoc">Execution is allowed.</div></div>
<div class="ttc" id="afilesystem_8hxx_html_a361c5c05ce4d64cd3e955bd241dae937a88c7dbe6cb83ed7007d031d2aaf99da5"><div class="ttname"><a href="#a361c5c05ce4d64cd3e955bd241dae937a88c7dbe6cb83ed7007d031d2aaf99da5">cosmos::fs::AccessCheck::WRITE_OK</a></div><div class="ttdeci">@ WRITE_OK</div><div class="ttdoc">Write access is allowed.</div></div>
<div class="ttc" id="afilesystem_8hxx_html_a361c5c05ce4d64cd3e955bd241dae937ac0dce885d45da898502898bc994d2623"><div class="ttname"><a href="#a361c5c05ce4d64cd3e955bd241dae937ac0dce885d45da898502898bc994d2623">cosmos::fs::AccessCheck::READ_OK</a></div><div class="ttdeci">@ READ_OK</div><div class="ttdoc">Read access is allowed.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdbcf7bc1c78572df620c55d1b5db7ad" name="afdbcf7bc1c78572df620c55d1b5db7ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdbcf7bc1c78572df620c55d1b5db7ad">&#9670;&#160;</a></span>AccessFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#afdbcf7bc1c78572df620c55d1b5db7ad">cosmos::fs::AccessFlag</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extra flags that influence the behaviour of check_access_at(), and check_access_fd(). </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="afdbcf7bc1c78572df620c55d1b5db7adae52c96d4e96a5c71445c7ff43828db60" name="afdbcf7bc1c78572df620c55d1b5db7adae52c96d4e96a5c71445c7ff43828db60"></a>EFFECTIVE_CREDS&#160;</td><td class="fielddoc"><p>use the caller's effective UID and GID for the access check. </p>
</td></tr>
<tr><td class="fieldname"><a id="afdbcf7bc1c78572df620c55d1b5db7adaaa9f4bfb0e17036e9c2341812e1858e8" name="afdbcf7bc1c78572df620c55d1b5db7adaaa9f4bfb0e17036e9c2341812e1858e8"></a>NO_FOLLOW&#160;</td><td class="fielddoc"><p>don't resolve symlinks in <code>path</code> but check access to the link itself. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00715">715</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  715</span>                      : <span class="keywordtype">int</span> {</div>
<div class="line"><span class="lineno">  716</span>        <a class="code hl_enumvalue" href="#afdbcf7bc1c78572df620c55d1b5db7adae52c96d4e96a5c71445c7ff43828db60">EFFECTIVE_CREDS</a> = AT_EACCESS,         </div>
<div class="line"><span class="lineno">  717</span>        <a class="code hl_enumvalue" href="#afdbcf7bc1c78572df620c55d1b5db7adaaa9f4bfb0e17036e9c2341812e1858e8">NO_FOLLOW</a>       = AT_SYMLINK_NOFOLLOW </div>
<div class="line"><span class="lineno">  718</span>};</div>
<div class="ttc" id="afilesystem_8hxx_html_afdbcf7bc1c78572df620c55d1b5db7adaaa9f4bfb0e17036e9c2341812e1858e8"><div class="ttname"><a href="#afdbcf7bc1c78572df620c55d1b5db7adaaa9f4bfb0e17036e9c2341812e1858e8">cosmos::fs::AccessFlag::NO_FOLLOW</a></div><div class="ttdeci">@ NO_FOLLOW</div><div class="ttdoc">don't resolve symlinks in path but check access to the link itself.</div></div>
<div class="ttc" id="afilesystem_8hxx_html_afdbcf7bc1c78572df620c55d1b5db7adae52c96d4e96a5c71445c7ff43828db60"><div class="ttname"><a href="#afdbcf7bc1c78572df620c55d1b5db7adae52c96d4e96a5c71445c7ff43828db60">cosmos::fs::AccessFlag::EFFECTIVE_CREDS</a></div><div class="ttdeci">@ EFFECTIVE_CREDS</div><div class="ttdoc">use the caller's effective UID and GID for the access check.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade33c38eca1d5173056d06cbe87382d7" name="ade33c38eca1d5173056d06cbe87382d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade33c38eca1d5173056d06cbe87382d7">&#9670;&#160;</a></span>CloseRangeFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#ade33c38eca1d5173056d06cbe87382d7">cosmos::fs::CloseRangeFlag</a> : unsigned int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ade33c38eca1d5173056d06cbe87382d7a009eaa7119fb4c83c5e487874d7e2218" name="ade33c38eca1d5173056d06cbe87382d7a009eaa7119fb4c83c5e487874d7e2218"></a>CLOEXEC&#160;</td><td class="fielddoc"><p>Instead of closing, mark all matching file descriptors as CLOEXEC. </p>
</td></tr>
<tr><td class="fieldname"><a id="ade33c38eca1d5173056d06cbe87382d7aa30806e76bde6bbd711d6cd0376b4a16" name="ade33c38eca1d5173056d06cbe87382d7aa30806e76bde6bbd711d6cd0376b4a16"></a>UNSHARE&#160;</td><td class="fielddoc"><p>Unshare specified file descriptors before closing to avoid race conditions with other threads. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00067">67</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>                          : <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> {</div>
<div class="line"><span class="lineno">   69</span>        <a class="code hl_enumvalue" href="#ade33c38eca1d5173056d06cbe87382d7a009eaa7119fb4c83c5e487874d7e2218">CLOEXEC</a> = CLOSE_RANGE_CLOEXEC,</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_enumvalue" href="#ade33c38eca1d5173056d06cbe87382d7aa30806e76bde6bbd711d6cd0376b4a16">UNSHARE</a> = CLOSE_RANGE_UNSHARE</div>
<div class="line"><span class="lineno">   72</span>};</div>
<div class="ttc" id="afilesystem_8hxx_html_ade33c38eca1d5173056d06cbe87382d7a009eaa7119fb4c83c5e487874d7e2218"><div class="ttname"><a href="#ade33c38eca1d5173056d06cbe87382d7a009eaa7119fb4c83c5e487874d7e2218">cosmos::fs::CloseRangeFlag::CLOEXEC</a></div><div class="ttdeci">@ CLOEXEC</div><div class="ttdoc">Instead of closing, mark all matching file descriptors as CLOEXEC.</div></div>
<div class="ttc" id="afilesystem_8hxx_html_ade33c38eca1d5173056d06cbe87382d7aa30806e76bde6bbd711d6cd0376b4a16"><div class="ttname"><a href="#ade33c38eca1d5173056d06cbe87382d7aa30806e76bde6bbd711d6cd0376b4a16">cosmos::fs::CloseRangeFlag::UNSHARE</a></div><div class="ttdeci">@ UNSHARE</div><div class="ttdoc">Unshare specified file descriptors before closing to avoid race conditions with other threads.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad005c641ab67a026d7e27887668bd91b" name="ad005c641ab67a026d7e27887668bd91b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad005c641ab67a026d7e27887668bd91b">&#9670;&#160;</a></span>LockFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#ad005c641ab67a026d7e27887668bd91b">cosmos::fs::LockFlag</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad005c641ab67a026d7e27887668bd91ba3fbd5575623e74fff385036c9ee72c23" name="ad005c641ab67a026d7e27887668bd91ba3fbd5575623e74fff385036c9ee72c23"></a>LOCK_NONBLOCK&#160;</td><td class="fielddoc"><p>don't block if a lock cannot be placed, throw <a class="el" href="classcosmos_1_1ApiError.html" title="Specialized exception type used when system APIs fail.">ApiError</a> with <a class="el" href="errno_8hxx.html#a5c1aef3a972b5a9a3bb6b3df1aa01939aabb57fd8245067368ea2a5cfb5577614" title="operation would block">Errno::WOULD_BLOCK</a> instead. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00752">752</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  752</span>                    : <span class="keywordtype">int</span> {</div>
<div class="line"><span class="lineno">  753</span>        <a class="code hl_enumvalue" href="#ad005c641ab67a026d7e27887668bd91ba3fbd5575623e74fff385036c9ee72c23">LOCK_NONBLOCK</a> = LOCK_NB </div>
<div class="line"><span class="lineno">  754</span>};</div>
<div class="ttc" id="afilesystem_8hxx_html_ad005c641ab67a026d7e27887668bd91ba3fbd5575623e74fff385036c9ee72c23"><div class="ttname"><a href="#ad005c641ab67a026d7e27887668bd91ba3fbd5575623e74fff385036c9ee72c23">cosmos::fs::LockFlag::LOCK_NONBLOCK</a></div><div class="ttdeci">@ LOCK_NONBLOCK</div><div class="ttdoc">don't block if a lock cannot be placed, throw ApiError with Errno::WOULD_BLOCK instead.</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6cd6d61123c3f79bbddaee234e718e4" name="ad6cd6d61123c3f79bbddaee234e718e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6cd6d61123c3f79bbddaee234e718e4">&#9670;&#160;</a></span>LockOperation</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4">cosmos::fs::LockOperation</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flags used with flock(). </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad6cd6d61123c3f79bbddaee234e718e4a46d3007a05c254d04a6c9ffc06dc889f" name="ad6cd6d61123c3f79bbddaee234e718e4a46d3007a05c254d04a6c9ffc06dc889f"></a>LOCK_SHARED&#160;</td><td class="fielddoc"><p>place a shared lock of which multiple may exist at the same time (for reading) </p>
</td></tr>
<tr><td class="fieldname"><a id="ad6cd6d61123c3f79bbddaee234e718e4acd40b665c0db65c2d49086a672f23ff5" name="ad6cd6d61123c3f79bbddaee234e718e4acd40b665c0db65c2d49086a672f23ff5"></a>LOCK_EXCLUSIVE&#160;</td><td class="fielddoc"><p>place an exclusive lock of which only one may exist at the same time (for writing) </p>
</td></tr>
<tr><td class="fieldname"><a id="ad6cd6d61123c3f79bbddaee234e718e4a08f473e8e1515801cb25e584a6832f34" name="ad6cd6d61123c3f79bbddaee234e718e4a08f473e8e1515801cb25e584a6832f34"></a>UNLOCK&#160;</td><td class="fielddoc"><p>remove an existing lock (regardless of shared or exclusive) </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00746">746</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  746</span>                         : <span class="keywordtype">int</span> {</div>
<div class="line"><span class="lineno">  747</span>        <a class="code hl_enumvalue" href="#ad6cd6d61123c3f79bbddaee234e718e4a46d3007a05c254d04a6c9ffc06dc889f">LOCK_SHARED</a>    = LOCK_SH, </div>
<div class="line"><span class="lineno">  748</span>        <a class="code hl_enumvalue" href="#ad6cd6d61123c3f79bbddaee234e718e4acd40b665c0db65c2d49086a672f23ff5">LOCK_EXCLUSIVE</a> = LOCK_EX, </div>
<div class="line"><span class="lineno">  749</span>        <a class="code hl_enumvalue" href="#ad6cd6d61123c3f79bbddaee234e718e4a08f473e8e1515801cb25e584a6832f34">UNLOCK</a>         = LOCK_UN  </div>
<div class="line"><span class="lineno">  750</span>};</div>
<div class="ttc" id="afilesystem_8hxx_html_ad6cd6d61123c3f79bbddaee234e718e4a08f473e8e1515801cb25e584a6832f34"><div class="ttname"><a href="#ad6cd6d61123c3f79bbddaee234e718e4a08f473e8e1515801cb25e584a6832f34">cosmos::fs::LockOperation::UNLOCK</a></div><div class="ttdeci">@ UNLOCK</div><div class="ttdoc">remove an existing lock (regardless of shared or exclusive)</div></div>
<div class="ttc" id="afilesystem_8hxx_html_ad6cd6d61123c3f79bbddaee234e718e4a46d3007a05c254d04a6c9ffc06dc889f"><div class="ttname"><a href="#ad6cd6d61123c3f79bbddaee234e718e4a46d3007a05c254d04a6c9ffc06dc889f">cosmos::fs::LockOperation::LOCK_SHARED</a></div><div class="ttdeci">@ LOCK_SHARED</div><div class="ttdoc">place a shared lock of which multiple may exist at the same time (for reading)</div></div>
<div class="ttc" id="afilesystem_8hxx_html_ad6cd6d61123c3f79bbddaee234e718e4acd40b665c0db65c2d49086a672f23ff5"><div class="ttname"><a href="#ad6cd6d61123c3f79bbddaee234e718e4acd40b665c0db65c2d49086a672f23ff5">cosmos::fs::LockOperation::LOCK_EXCLUSIVE</a></div><div class="ttdeci">@ LOCK_EXCLUSIVE</div><div class="ttdoc">place an exclusive lock of which only one may exist at the same time (for writing)</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a778f76cd1be7e67b39ae143c77615100" name="a778f76cd1be7e67b39ae143c77615100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a778f76cd1be7e67b39ae143c77615100">&#9670;&#160;</a></span>change_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_dir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the calling process's current working directory to <code>path</code>. </p>
<p>On error a FileError exception is thrown. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00198">198</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  198</span>                                      {</div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">if</span> (::chdir(path.raw()) != 0) {</div>
<div class="line"><span class="lineno">  200</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;chdir()&quot;</span>));</div>
<div class="line"><span class="lineno">  201</span>        }</div>
<div class="line"><span class="lineno">  202</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1e001ebc00e0793135462e694e8d0fc" name="ae1e001ebc00e0793135462e694e8d0fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1e001ebc00e0793135462e694e8d0fc">&#9670;&#160;</a></span>change_group() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::fs::change_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GroupID</td>          <td class="paramname"><span class="paramname"><em>id</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convenience wrapper of change_owner() to change only the group of a file. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00445">445</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  445</span>                                                                    {</div>
<div class="line"><span class="lineno">  446</span>        change_owner(fd, UserID::INVALID, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  447</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aae04e93338ed7aedfa0929dcf8265236" name="aae04e93338ed7aedfa0929dcf8265236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae04e93338ed7aedfa0929dcf8265236">&#9670;&#160;</a></span>change_group() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::fs::change_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convenience wrapper of change_owner() to change only the group of a file. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00450">450</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  450</span>                                                                         {</div>
<div class="line"><span class="lineno">  451</span>        change_owner(fd, {}, group);</div>
<div class="line"><span class="lineno">  452</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac39349f4e77a14de222bf283ba93b19a" name="ac39349f4e77a14de222bf283ba93b19a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac39349f4e77a14de222bf283ba93b19a">&#9670;&#160;</a></span>change_group() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::fs::change_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GroupID</td>          <td class="paramname"><span class="paramname"><em>id</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convenience wrapper of change_owner() to change only the group of a file. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00455">455</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  455</span>                                                                 {</div>
<div class="line"><span class="lineno">  456</span>        change_owner(path, UserID::INVALID, <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  457</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a576270e3b154f614b94022a86737db23" name="a576270e3b154f614b94022a86737db23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576270e3b154f614b94022a86737db23">&#9670;&#160;</a></span>change_group() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cosmos::fs::change_group </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>group</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convenience wrapper of change_owner() to change only the group of a file. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8hxx_source.html#l00460">460</a> of file <a class="el" href="filesystem_8hxx_source.html">filesystem.hxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  460</span>                                                                      {</div>
<div class="line"><span class="lineno">  461</span>        change_owner(path, {}, group);</div>
<div class="line"><span class="lineno">  462</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e99bfef1d1d1b18b67700104a670885" name="a3e99bfef1d1d1b18b67700104a670885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e99bfef1d1d1b18b67700104a670885">&#9670;&#160;</a></span>change_mode() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_mode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the FileMode of the given open file descriptor. </p>
<p>This behaves the same as change_mode(const SysString, FileMode) with the exception that the file associated with the given file descriptor will be affected instead of a to-be-opened path.</p>
<p>Additional common errors that can occur:</p>
<ul>
<li>bad file descriptor (Errno::BAD_FD) </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00397">397</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  397</span>                                                               {</div>
<div class="line"><span class="lineno">  398</span>        <span class="keywordflow">if</span> (::fchmod(to_integral(fd.raw()), to_integral(mode.raw())) != 0) {</div>
<div class="line"><span class="lineno">  399</span>                cosmos_throw (FileError(<span class="stringliteral">&quot;(fd)&quot;</span>, <span class="stringliteral">&quot;fchmod()&quot;</span>));</div>
<div class="line"><span class="lineno">  400</span>        }</div>
<div class="line"><span class="lineno">  401</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a569f540b5b86d47a2dbd6555b0e33304" name="a569f540b5b86d47a2dbd6555b0e33304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a569f540b5b86d47a2dbd6555b0e33304">&#9670;&#160;</a></span>change_mode() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_mode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the FileMode of the given path. </p>
<p>Attempts to change the FileMode associated with the file object found at the given path. Symlinks will be followed.</p>
<p>To change the mode of symlinks use change_owner_nofollow(). To avoid symlinks use File::open() with OpenFlag::NOFOLLOW. Obtain a FileStatus() for the open FileDescriptor and then use change_mode(FileDescriptor, FileMode) if the file isn't a symlink.</p>
<dl class="section note"><dt>Note</dt><dd>On Linux there is no way to change the mode symlinks.</dd></dl>
<p>Various errors can occur which will cause a FileError to be thrown. The most common errors are:</p>
<ul>
<li>file does not exist (Errno::NO_ENTRY)</li>
<li>no permission to change the mode (Errno::PERMISSION)</li>
<li>read only file system (Errno::READ_ONLY_FS) </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00391">391</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  391</span>                                                            {</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">if</span> (::chmod(path.raw(), to_integral(mode.raw())) != 0) {</div>
<div class="line"><span class="lineno">  393</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;chmod()&quot;</span>));</div>
<div class="line"><span class="lineno">  394</span>        }</div>
<div class="line"><span class="lineno">  395</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aab7d0e6578f72dae1d2f85758300e405" name="aab7d0e6578f72dae1d2f85758300e405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7d0e6578f72dae1d2f85758300e405">&#9670;&#160;</a></span>change_owner() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>group</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change owner and/or group of the given file descriptor by user name and/or group name. </p>
<p>This is a convenience function on top of change_owner(FileDescriptor,
UserID, GroupID). The description of change_owner(const SysString,
const SysString, const SysString) applies here as well. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00452">452</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  452</span>                                                                                        {</div>
<div class="line"><span class="lineno">  453</span>        <span class="keyword">const</span> UserID uid = resolve_user(user);</div>
<div class="line"><span class="lineno">  454</span>        <span class="keyword">const</span> GroupID gid = resolve_group(group);</div>
<div class="line"><span class="lineno">  455</span>        change_owner(fd, uid, gid);</div>
<div class="line"><span class="lineno">  456</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3191968f87ff43c8f21c7f5c1b64ad44" name="a3191968f87ff43c8f21c7f5c1b64ad44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3191968f87ff43c8f21c7f5c1b64ad44">&#9670;&#160;</a></span>change_owner() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UserID</td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GroupID</td>          <td class="paramname"><span class="paramname"><em>gid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">GroupID::INVALID</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change numerical owner and/or group ID of the given open file descriptor. </p>
<p>This behaves the same as change_owner(const SysString, UserID, GroupID) with the exception that the file associated with the given file descriptor will be affected instead of a to-be-opened path.</p>
<p>Additional common errors that can occur:</p>
<ul>
<li>bad file descriptor (Errno::BAD_FD) </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00409">409</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  409</span>                                                                                {</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">if</span> (::fchown(to_integral(fd.raw()), to_integral(uid), to_integral(gid)) != 0) {</div>
<div class="line"><span class="lineno">  411</span>                cosmos_throw (FileError(<span class="stringliteral">&quot;(fd)&quot;</span>, <span class="stringliteral">&quot;fchown()&quot;</span>));</div>
<div class="line"><span class="lineno">  412</span>        }</div>
<div class="line"><span class="lineno">  413</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abbd3cff1e394de043be90460753e882e" name="abbd3cff1e394de043be90460753e882e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbd3cff1e394de043be90460753e882e">&#9670;&#160;</a></span>change_owner() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>group</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change owner and/or group of the given path by user name and/or group name. </p>
<p>This is a convenience function on top of change_owner(const SysString,
UserID, GroupID). It looks up the numerical UserID of <code>user</code> and the numerical GroupID of <code>group</code>.</p>
<p>To skip changing the owner of user or group simply pass an empty SysString as respective parameter.</p>
<p>Additional errors that can occur are the ones described in PasswdInfo(), GroupInfo() and RuntimeError() in case the username or group do not exist. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00445">445</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  445</span>                                                                                     {</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>        <span class="keyword">const</span> UserID uid = resolve_user(user);</div>
<div class="line"><span class="lineno">  448</span>        <span class="keyword">const</span> GroupID gid = resolve_group(group);</div>
<div class="line"><span class="lineno">  449</span>        change_owner(path, uid, gid);</div>
<div class="line"><span class="lineno">  450</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a893c1a8ac740ed83399d98ae13b6c1c1" name="a893c1a8ac740ed83399d98ae13b6c1c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893c1a8ac740ed83399d98ae13b6c1c1">&#9670;&#160;</a></span>change_owner() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UserID</td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GroupID</td>          <td class="paramname"><span class="paramname"><em>gid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">GroupID::INVALID</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change numerical owner and/or group ID of a file path. </p>
<p>Attempts to change the owner and/or the group of the file object found at <code>path</code>. If <code>path</code> refers to a symbolic link then the target of the link is affected. UserID::INVALID and GroupID::INVALID will cause the respective item <em>not</em> to be touched.</p>
<p>Various errors can occur which will cause a FileError to be thrown. The most common errors are:</p>
<ul>
<li>file does not exist (Errno::NO_ENTRY)</li>
<li>no permission to change the owner (Errno::PERMISSION)</li>
<li>read only file system (Errno::READ_ONLY_FS) </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00403">403</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  403</span>                                                                             {</div>
<div class="line"><span class="lineno">  404</span>        <span class="keywordflow">if</span> (::chown(path.raw(), to_integral(uid), to_integral(gid)) != 0) {</div>
<div class="line"><span class="lineno">  405</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;chown()&quot;</span>));</div>
<div class="line"><span class="lineno">  406</span>        }</div>
<div class="line"><span class="lineno">  407</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a02605ea17311b9eee3fe28a76c77f7fe" name="a02605ea17311b9eee3fe28a76c77f7fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02605ea17311b9eee3fe28a76c77f7fe">&#9670;&#160;</a></span>change_owner_nofollow() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_owner_nofollow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>group</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes owner and/or group of the given path while not following symlinks. </p>
<dl class="section see"><dt>See also</dt><dd>change_owner_nofollow(const SysString, const UserID, const GroupID) </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00464">464</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  464</span>                                                                                              {</div>
<div class="line"><span class="lineno">  465</span>        <span class="keyword">const</span> UserID uid = resolve_user(user);</div>
<div class="line"><span class="lineno">  466</span>        <span class="keyword">const</span> GroupID gid = resolve_group(group);</div>
<div class="line"><span class="lineno">  467</span>        change_owner_nofollow(path, uid, gid);</div>
<div class="line"><span class="lineno">  468</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4c457413feeacbb5202aa4dcdc7a68d" name="ab4c457413feeacbb5202aa4dcdc7a68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c457413feeacbb5202aa4dcdc7a68d">&#9670;&#160;</a></span>change_owner_nofollow() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::change_owner_nofollow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UserID</td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GroupID</td>          <td class="paramname"><span class="paramname"><em>gid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">GroupID::INVALID</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes owner and/or group of the given path while not following symlinks. </p>
<p>This behaves the same as change_owner(const SysString, const UserID,
const GroupID) with the exception that if the final path component refers to a symbolic link that the ownership of the link is changed, not that of the target.</p>
<p>If <code>path</code> is not a symlink then it's owner will still be changed and no error is thrown. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00458">458</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  458</span>                                                                                      {</div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">if</span> (::lchown(path.raw(), to_integral(uid), to_integral(gid)) != 0) {</div>
<div class="line"><span class="lineno">  460</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;lchown()&quot;</span>));</div>
<div class="line"><span class="lineno">  461</span>        }</div>
<div class="line"><span class="lineno">  462</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7a728432b1d58a2af66a00205f90f54" name="aa7a728432b1d58a2af66a00205f90f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7a728432b1d58a2af66a00205f90f54">&#9670;&#160;</a></span>check_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::check_access </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1BitMask.html">AccessChecks</a></td>          <td class="paramname"><span class="paramname"><em>checks</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check file access permissions of <code>path</code>. </p>
<p>This checks whether <code>path</code> can be accessed by the calling process, depending on the provided <code>checks</code> bitmask. If <code>checks</code> has no bits set, then this only checks for file existence. Otherwise it is checked whether <code>path</code> is accessible for read, write and/or execution, depending on the bits set in <code>checks</code>.</p>
<p>For determining access permissions the caller's real UID and GID are used.</p>
<p>If the check succeeds, then call returns normally. Otherwise a FileError is thrown, containing the specific error reason. Typical errors will be one of the following:</p>
<ul>
<li>Errno::ACCESS: either the requested <code>checks</code> would be denied to the file, or search permission is denied for one of the components of the prefix of <code>path</code>.</li>
<li>Errno::NO_ENTRY: a component of <code>path</code> does not exist or is a dangling symbolic link.</li>
</ul>
<p>Note that this call is often better replaced by direct open of a path, to prevent any time-of-check/time-of-use race conditions. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00627">627</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  627</span>                                                                   {</div>
<div class="line"><span class="lineno">  628</span>        <span class="keywordflow">if</span> (::access(path.raw(), checks.raw()) == 0) {</div>
<div class="line"><span class="lineno">  629</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  630</span>        }</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>        cosmos_throw (ApiError(<span class="stringliteral">&quot;access()&quot;</span>));</div>
<div class="line"><span class="lineno">  633</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad38b3dbe88f497e737df0e66404ba9a8" name="ad38b3dbe88f497e737df0e66404ba9a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad38b3dbe88f497e737df0e66404ba9a8">&#9670;&#160;</a></span>check_access_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::check_access_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1BitMask.html">AccessChecks</a></td>          <td class="paramname"><span class="paramname"><em>checks</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1BitMask.html">AccessFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check file access permissions of <code>path</code> relative to <code>dir_fd</code>. </p>
<p>This behaves similar to <code>check_access()</code> with the following differences:</p>
<ul>
<li>if <code>path</code> is a relative path, then it is interpreted relative to <code>dir_fd</code>, instead of relative to the caller's CWD.</li>
<li>if <code>path</code> is absolute then <code>dir_fd</code> is ignored.</li>
<li>if <code>dir_fd</code> is cosmos::AT_CWD, then <code>path</code> is again interpreted relative to the caller's CWD, like check_access() does.</li>
</ul>
<p>The <code>flags</code> argument further influences the behaviour of the check. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00635">635</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  636</span>                                                                    {</div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">if</span> (::faccessat(to_integral(dir_fd.raw()), path.raw(), checks.raw(), flags.raw()) == 0) {</div>
<div class="line"><span class="lineno">  638</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  639</span>        }</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span>        cosmos_throw (ApiError(<span class="stringliteral">&quot;faccessat()&quot;</span>));</div>
<div class="line"><span class="lineno">  642</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae342388da9ba86c7286419b50417242a" name="ae342388da9ba86c7286419b50417242a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae342388da9ba86c7286419b50417242a">&#9670;&#160;</a></span>check_access_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::check_access_fd </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1BitMask.html">AccessChecks</a></td>          <td class="paramname"><span class="paramname"><em>check</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1BitMask.html">AccessFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check file access permissions of the already open file descriptor <code>fd</code>. </p>
<p>This call may be used on a file descriptor opened with OpenFlag::PATH, which is likely also the main purpose of this variant of <code>check_access()</code>. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00644">644</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  645</span>                                         {</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordflow">if</span> (::faccessat(to_integral(fd.raw()), <span class="stringliteral">&quot;&quot;</span>, checks.raw(), flags.raw() | AT_EMPTY_PATH) == 0) {</div>
<div class="line"><span class="lineno">  648</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  649</span>        }</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>        cosmos_throw (ApiError(<span class="stringliteral">&quot;faccessat()&quot;</span>));</div>
<div class="line"><span class="lineno">  652</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a916c9449269db0db5d1dad9d304b218e" name="a916c9449269db0db5d1dad9d304b218e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a916c9449269db0db5d1dad9d304b218e">&#9670;&#160;</a></span>close_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::close_range </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a></td>          <td class="paramname"><span class="paramname"><em>first</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a></td>          <td class="paramname"><span class="paramname"><em>last</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92aefefdada147ab432d0fcb00983abdafa">FileNum::MAX_FD</a></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#a168e1bccac072a6fe45333293dd8f503">CloseRangeFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#a168e1bccac072a6fe45333293dd8f503">CloseRangeFlags</a>{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a range of file descriptor numbers in the current process. </p>
<p>This call closes all file descriptor numbers in the range [first, last], where last is included in the range.</p>
<p>This is mostly useful before executing a child process to get rid of any file descriptors not marked with the close-on-exec file descriptor flag. The call is a lot more efficient then a loop in userspace calling <code>close()</code> on every single file descriptor.</p>
<p>You can specify FileNum::MAX_FD for <code>last</code> if you want to close all file descriptors starting from a given range. This is also the default for <code>last</code>.</p>
<p>This system call can fail on out of memory conditions or if the maximum number of file descriptors is exceeded in combination with CloseRangeFlag::UNSHARE. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00074">74</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>                                                                                       {</div>
<div class="line"><span class="lineno">   75</span>        <span class="comment">// NOTE: close_range() uses unsigned int for file descriptor numbers,</span></div>
<div class="line"><span class="lineno">   76</span>        <span class="comment">// inconsistent with all other system calls. Using FileNum::MAX_FD</span></div>
<div class="line"><span class="lineno">   77</span>        <span class="comment">// (int) as the maximum file descriptor should still work I guess.</span></div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">if</span> (::close_range(to_integral(first), to_integral(last), flags.raw()) != 0) {</div>
<div class="line"><span class="lineno">   79</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;close_range()&quot;</span>));</div>
<div class="line"><span class="lineno">   80</span>        }</div>
<div class="line"><span class="lineno">   81</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abe081d07f47041bab2230dc997e3bae6" name="abe081d07f47041bab2230dc997e3bae6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe081d07f47041bab2230dc997e3bae6">&#9670;&#160;</a></span>copy_file_range() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API size_t cosmos::fs::copy_file_range </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd_in</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy data between files directly in the kernel. </p>
<p>This is a simplified version of copy_file_range(CopyFileRangeParameters&amp;) that does not use explicit offsets. Instead the current file descriptor offsets will be used and updated. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00606">606</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  608</span>                                  {</div>
<div class="line"><span class="lineno">  609</span>        <span class="keywordflow">return</span> copy_file_range(fd_in, <span class="keyword">nullptr</span>, fd_out, <span class="keyword">nullptr</span>, len);</div>
<div class="line"><span class="lineno">  610</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abf57e00042ece783fe411ab03bafad4d" name="abf57e00042ece783fe411ab03bafad4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf57e00042ece783fe411ab03bafad4d">&#9670;&#160;</a></span>copy_file_range() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API size_t cosmos::fs::copy_file_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcosmos_1_1fs_1_1CopyFileRangeParameters.html">CopyFileRangeParameters</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pars</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy data between files directly in the kernel. </p>
<p>This operation allows for an efficient copy operation between two file descriptors, without routing data through userspace. Additionally, if both file descriptors belong to the same file system, this system call allows to optimize the copy on lower levels e.g. by employing copy-on-write techniques.</p>
<p>The output file descriptor must not be opened with OpenFlag::APPEND, otherwise an error is thrown.</p>
<p>As usual partial I/O can occur. The call attempts to copy <code>pars.len</code> bytes and the number of actually copied bytes is returned from this call. If the input file descriptor reached the end of file then 0 is returned. The remaining number of bytes is updated in <code>pars.len</code>. This way the same parameter structure can be used to continue the operation until it is complete.</p>
<p>If an input offset is supplied then reading from the input file descriptor starts at this position and the file descriptor's offset it not altered. The provided offset is updated by the number of bytes copied. If no input offset is supplied then reading starts from the file descriptor's offset and the offset is altered accordingly. The same holds true for the output offset.</p>
<p>There are two other system calls on Linux that perform similar tasks, but have restrictions:</p>
<ul>
<li>splice(): this is limited to one of the FDs being a pipe</li>
<li>sendfile(): this used to be limited to writing to sockets FDs. Also it only supports an input FD offset, no output FD offset. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00612">612</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  612</span>                                                      {</div>
<div class="line"><span class="lineno">  613</span>        <span class="keyword">auto</span> copied = copy_file_range(</div>
<div class="line"><span class="lineno">  614</span>                pars.in,  pars.off_in  ? &amp;pars.off_in.value()  : <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno">  615</span>                pars.out, pars.off_out ? &amp;pars.off_out.value() : <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno">  616</span>                pars.len);</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>        pars.len -= copied;</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>        <span class="keywordflow">return</span> copied;</div>
<div class="line"><span class="lineno">  621</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4de9f076e4f3c206078059d2f80597c1" name="a4de9f076e4f3c206078059d2f80597c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4de9f076e4f3c206078059d2f80597c1">&#9670;&#160;</a></span>exists_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API bool cosmos::fs::exists_file </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether the given file system object exists. </p>
<p>The information returned is only a snapshot in time. It is subject to race conditions i.e. when trying to open the file afterwards it may already be gone or have been replaced by a different file system object.</p>
<p>For safely testing for existence and opening a file, you should open the file right away and test for an according error condition.</p>
<p>This function will not follow symlinks i.e. if <code>path</code> refers to a dangling symlink then it will still return <code>true</code>.</p>
<p>If the condition cannot be exactly determined, because an error different than "ENOENT" is returned by the operating system then an exception is thrown.</p>
<p>This function does not determine the file <em>type</em> i.e. it could be also a directory, socket etc. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00176">176</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  176</span>                                       {</div>
<div class="line"><span class="lineno">  177</span>        <span class="keyword">struct </span>stat s;</div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">if</span> (::lstat(path.raw(), &amp;s) == 0)</div>
<div class="line"><span class="lineno">  179</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="errno_8hxx.html#a95369c467f3b864b07dc5650f21e724c">get_errno</a>() != Errno::NO_ENTRY)</div>
<div class="line"><span class="lineno">  181</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;lstat()&quot;</span>));</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  184</span>}</div>
<div class="ttc" id="aerrno_8hxx_html_a95369c467f3b864b07dc5650f21e724c"><div class="ttname"><a href="errno_8hxx.html#a95369c467f3b864b07dc5650f21e724c">cosmos::get_errno</a></div><div class="ttdeci">Errno get_errno()</div><div class="ttdoc">Wrapper that returns the Errno strongly typed representation of the current errno</div><div class="ttdef"><b>Definition</b> <a href="errno_8hxx_source.html#l00111">errno.hxx:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a11d2b0366855b554c395354e9cbbc597" name="a11d2b0366855b554c395354e9cbbc597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d2b0366855b554c395354e9cbbc597">&#9670;&#160;</a></span>flock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::flock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#ad6cd6d61123c3f79bbddaee234e718e4">LockOperation</a></td>          <td class="paramname"><span class="paramname"><em>operation</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#aa0ae27ea3b8d02bc5b21116f34e5ae52">LockFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply or remove an advisory lock on the given file descriptor. </p>
<p>This type of locking is advisory only i.e. the participating processes need to cooperate with each other. A process with sufficient privileges can still modify the file without owning a lock.</p>
<p>The lock is associated with the open file description, which means the lock is inherited to child processes via fork() and to duplicated file descriptors. Only once all file descriptors referring to the lock have been closed, will the lock automatically be released. An UNLOCK operation on any file descriptor referring to the open file description will release the lock for all the other file descriptors as well.</p>
<p>A process may only hold one type of lock on a file. If the file is already locked, then a subsequent lock can be used to convert the lock type into a different one (i.e. shared to exclusive and vice versa).</p>
<p>Locks from this call are preserved across execve() (if a file descriptor referring to the lock is passed through execve()).</p>
<p>The OpenMode of the file descriptor is not relevant for locking the file using this API.</p>
<p>This API has restrictions and side effects on network file systems like CIFS and NFS:</p>
<ul>
<li>on older kernels the locking happened only for the local machine</li>
<li>on newer kernels the lock can be transparently implemented via the <code>fcntl()</code> byte-range locking, which has different semantics (e.g. for placing write locks, the file descriptor has to be open for writing). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00654">654</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  654</span>                                                                                                     {</div>
<div class="line"><span class="lineno">  655</span>        <span class="keywordflow">if</span> (::flock(to_integral(fd.raw()), cosmos::to_integral(operation) | flags.raw()) != 0) {</div>
<div class="line"><span class="lineno">  656</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;flock()&quot;</span>));</div>
<div class="line"><span class="lineno">  657</span>        }</div>
<div class="line"><span class="lineno">  658</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d3ddc73f00616d12678ead8b3b49e63" name="a3d3ddc73f00616d12678ead8b3b49e63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d3ddc73f00616d12678ead8b3b49e63">&#9670;&#160;</a></span>get_working_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::string cosmos::fs::get_working_dir </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the process's current working directory. </p>
<p>This call can fail e.g. on out of memory conditions or if the CWD has been unlinked. An ApiError is thrown in such cases. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00204">204</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  204</span>                            {</div>
<div class="line"><span class="lineno">  205</span>        std::string ret;</div>
<div class="line"><span class="lineno">  206</span>        ret.resize(128);</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  209</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> res = ::getcwd(ret.data(), ret.size()); res == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  210</span>                        <span class="keywordflow">switch</span> (<a class="code hl_function" href="errno_8hxx.html#a95369c467f3b864b07dc5650f21e724c">get_errno</a>()) {</div>
<div class="line"><span class="lineno">  211</span>                                <span class="keywordflow">case</span> Errno::RANGE: {</div>
<div class="line"><span class="lineno">  212</span>                                        <span class="comment">// double the size and retry</span></div>
<div class="line"><span class="lineno">  213</span>                                        ret.resize(ret.size() * 2);</div>
<div class="line"><span class="lineno">  214</span>                                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  215</span>                                }</div>
<div class="line"><span class="lineno">  216</span>                                <span class="keywordflow">default</span>: cosmos_throw (ApiError(<span class="stringliteral">&quot;getcwd()&quot;</span>));</div>
<div class="line"><span class="lineno">  217</span>                        }</div>
<div class="line"><span class="lineno">  218</span>                }</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>                <span class="comment">// can be npos if the CWD is of exactly the size we have</span></div>
<div class="line"><span class="lineno">  221</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> termpos = ret.find(<span class="charliteral">&#39;\0&#39;</span>); termpos != ret.npos) {</div>
<div class="line"><span class="lineno">  222</span>                        ret.resize(termpos);</div>
<div class="line"><span class="lineno">  223</span>                }</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>                <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  226</span>        }</div>
<div class="line"><span class="lineno">  227</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a44d19b9be1be2683f5e5e9598f077e53" name="a44d19b9be1be2683f5e5e9598f077e53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d19b9be1be2683f5e5e9598f077e53">&#9670;&#160;</a></span>link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::link </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>old_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>new_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new (hard) link of the file found in <code>old_path</code> at <code>new_path</code>. </p>
<p>Hard links only work on the same file system. An attempt to create a hard link across different mounts will result in an ApiError with Errno::CROSS_DEVICE.</p>
<p>If <code>new_path</code> already exists then it will not be overwritten but Errno::EXISTS will be thrown.</p>
<p>Hard links don't work for directories, if <code>old_path</code> refers to one then Errno::PERMISSION will be thrown.</p>
<p>Furthermore a range of errors related to lack of permissions, lack of memory, lack of disk space, problems in path resolution and so on can occur.</p>
<p>On success both names will refer to the same file and it cannot be determined any more which was was the "original". </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00528">528</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  528</span>                                                              {</div>
<div class="line"><span class="lineno">  529</span>        <span class="keywordflow">if</span> (::link(old_path.raw(), new_path.raw()) != 0) {</div>
<div class="line"><span class="lineno">  530</span>                cosmos_throw (FileError(new_path, std::string{<span class="stringliteral">&quot;link() for &quot;</span>} + std::string{old_path}));</div>
<div class="line"><span class="lineno">  531</span>        }</div>
<div class="line"><span class="lineno">  532</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a249771802fa509a5ac6fc460fc8026b7" name="a249771802fa509a5ac6fc460fc8026b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a249771802fa509a5ac6fc460fc8026b7">&#9670;&#160;</a></span>linkat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::linkat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>old_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>old_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>new_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>new_path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a></td>          <td class="paramname"><span class="paramname"><em>follow_old</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="fs_2types_8hxx.html#a5008dc66fbf9f14c5395b707d92e72fe">FollowSymlinks</a>{false}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new (hard) link based on lookups relative to <code>old_dir</code> and <code>new_dir</code>. </p>
<p>This behaves similar to link(). For <code>old_path</code> and <code>new_path</code> the usual at() API rules apply:</p>
<ul>
<li>if the path is absolute then related DirFD is ignored.</li>
<li>else if the DirFD has the special value cosmos::AT_CWD then path is interpreted relative to the current working directory.</li>
<li>else the path is interpreted relative to the directory represented by DirFD.</li>
</ul>
<p><code>follow_old</code> determines whether symlink's encountered at <code>old_path</code> will be resolved or not. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00534">534</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  536</span>                                                 {</div>
<div class="line"><span class="lineno">  537</span>        <span class="keywordflow">if</span> (::linkat(</div>
<div class="line"><span class="lineno">  538</span>                                to_integral(old_dir.raw()), old_path.raw(),</div>
<div class="line"><span class="lineno">  539</span>                                to_integral(new_dir.raw()), new_path.raw(),</div>
<div class="line"><span class="lineno">  540</span>                                follow_old ? AT_SYMLINK_FOLLOW : 0) != 0) {</div>
<div class="line"><span class="lineno">  541</span>                cosmos_throw (FileError(new_path, std::string{<span class="stringliteral">&quot;linkat() for &quot;</span>} + std::string{old_path}));</div>
<div class="line"><span class="lineno">  542</span>        }</div>
<div class="line"><span class="lineno">  543</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af83b9e56140d0700c10baaff83afc863" name="af83b9e56140d0700c10baaff83afc863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af83b9e56140d0700c10baaff83afc863">&#9670;&#160;</a></span>linkat_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::linkat_fd </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>new_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>new_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special variant of linkat() that can link arbitrary file descriptors at a new location. </p>
<p>Contrary to linkat() this call can give the specified file descriptor a new name at <code>new_dir</code> / <code>new_path</code>, without specifying a source name. This generally only works for files that have a non-zero link count. This does not work for directory file descriptors.</p>
<p>As a special case this <em>does</em> work for file descriptors opened with OpenFlag::PATH and for temporary files opened with OpenFlag::TMPFILE but without OpenFlag::EXCLUSIVE (in this case a link count of 0 is accepted).</p>
<p>Note, however, that this call requires the CAP_DAC_READ_SEARCH capability, for security reasons. Starting with kernel version 6.10 the requirements are relaxed. If <code>fd</code> has been opened by the same process using the same credentials as the caller has, then the linkat will succeed. The credentials must not have been changed (and changed back) in the meantime.</p>
<p>An alternative is to use regular linkat() and the /proc file system, see <code>man 2 linkat</code>. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00545">545</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  545</span>                                                                                       {</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">if</span> (::linkat(</div>
<div class="line"><span class="lineno">  547</span>                                to_integral(fd.raw()), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  548</span>                                to_integral(new_dir.raw()), new_path.raw(),</div>
<div class="line"><span class="lineno">  549</span>                                AT_EMPTY_PATH) != 0) {</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>                cosmos_throw (FileError(new_path, std::string{<span class="stringliteral">&quot;linkat(AT_EMPTY_PATH)&quot;</span>}));</div>
<div class="line"><span class="lineno">  552</span>        }</div>
<div class="line"><span class="lineno">  553</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0df810258025dfd588c30f30fddd585" name="ae0df810258025dfd588c30f30fddd585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0df810258025dfd588c30f30fddd585">&#9670;&#160;</a></span>linkat_proc_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::linkat_proc_fd </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>new_dir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>new_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs the same as linkat_fd() using linkat() and the /proc file system. </p>
<p>To avoid the permission issues that linkat_fd() has this variant of the linkat call uses a workaround based on the /proc file system to achieve the same result, see <code>man 2 linkat</code>. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00555">555</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  555</span>                                                                                            {</div>
<div class="line"><span class="lineno">  556</span>        <span class="comment">// the exact security reasons why linkat_fd() isn&#39;t allowed without</span></div>
<div class="line"><span class="lineno">  557</span>        <span class="comment">// CAP_DAC_READ_SEARCH are a bit unclear. It seems the concern is that</span></div>
<div class="line"><span class="lineno">  558</span>        <span class="comment">// a process get&#39;s hold of a file descriptor for which it wouldn&#39;t</span></div>
<div class="line"><span class="lineno">  559</span>        <span class="comment">// have permissions to change ownership etc.</span></div>
<div class="line"><span class="lineno">  560</span>        <span class="comment">//</span></div>
<div class="line"><span class="lineno">  561</span>        <span class="comment">// By linking the FD into a directory controlled by the unprivileged</span></div>
<div class="line"><span class="lineno">  562</span>        <span class="comment">// process it would become possible to manipulate the ownership after</span></div>
<div class="line"><span class="lineno">  563</span>        <span class="comment">// all.</span></div>
<div class="line"><span class="lineno">  564</span>        <span class="comment">//</span></div>
<div class="line"><span class="lineno">  565</span>        <span class="comment">// It looks like this variant of linkat() does some checks that</span></div>
<div class="line"><span class="lineno">  566</span>        <span class="comment">// prevent this.</span></div>
<div class="line"><span class="lineno">  567</span>        linkat(</div>
<div class="line"><span class="lineno">  568</span>                        AT_CWD, cosmos::sprintf(<span class="stringliteral">&quot;/proc/self/fd/%d&quot;</span>, to_integral(fd.raw())),</div>
<div class="line"><span class="lineno">  569</span>                        new_dir, new_path, FollowSymlinks{true});</div>
<div class="line"><span class="lineno">  570</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d1e2ec20871f1c636c3633bf13e22f0" name="a5d1e2ec20871f1c636c3633bf13e22f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d1e2ec20871f1c636c3633bf13e22f0">&#9670;&#160;</a></span>make_all_dirs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API Errno cosmos::fs::make_all_dirs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a directory, potentially creating multiple directory components. </p>
<p>This is similar to make_dir() but also creates possibly missing parent directory elements in <code>path</code>. All created directory components will receive the given <code>mode</code>.</p>
<p>If any of the path components cannot be created (or accessed) then an FileError is thrown. This could mean that some of the paths have been created in the error case, but not the full path.</p>
<dl class="section return"><dt>Returns</dt><dd>Errno::NO_ERROR if the full path (and thus at least the final directory component) was created, Errno::EXISTS if the directory was already existing. </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00306">306</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  306</span>                                                               {</div>
<div class="line"><span class="lineno">  307</span>        <span class="keyword">const</span> <span class="keyword">auto</span> normpath = normalize_path(path);</div>
<div class="line"><span class="lineno">  308</span>        <span class="keywordtype">size_t</span> sep_pos = 0;</div>
<div class="line"><span class="lineno">  309</span>        std::string prefix;</div>
<div class="line"><span class="lineno">  310</span>        <a class="code hl_enumeration" href="errno_8hxx.html#a5c1aef3a972b5a9a3bb6b3df1aa01939">Errno</a> ret{Errno::EXISTS};</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>        <span class="keywordflow">if</span> (path.empty()) {</div>
<div class="line"><span class="lineno">  313</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;empty string passed in&quot;</span>));</div>
<div class="line"><span class="lineno">  314</span>        }</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>        <span class="keywordflow">while</span> (sep_pos != normpath.npos) {</div>
<div class="line"><span class="lineno">  317</span>                sep_pos = normpath.find(<span class="charliteral">&#39;/&#39;</span>, sep_pos + 1);</div>
<div class="line"><span class="lineno">  318</span>                prefix = normpath.substr(0, sep_pos);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>                <span class="keywordflow">if</span> (prefix.back() == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><span class="lineno">  321</span>                        <span class="comment">// root directory &quot;/&quot; or a trailing or duplicate slash</span></div>
<div class="line"><span class="lineno">  322</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  323</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prefix == <span class="stringliteral">&quot;.&quot;</span>) {</div>
<div class="line"><span class="lineno">  324</span>                        <span class="comment">// leading &quot;.&quot; component, no sense in trying to create it</span></div>
<div class="line"><span class="lineno">  325</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  326</span>                }</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">if</span> (::mkdir(prefix.data(), to_integral(mode.raw())) != 0) {</div>
<div class="line"><span class="lineno">  329</span>                        <span class="keywordflow">if</span> (<a class="code hl_function" href="errno_8hxx.html#a95369c467f3b864b07dc5650f21e724c">get_errno</a>() == Errno::EXISTS) {</div>
<div class="line"><span class="lineno">  330</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  331</span>                        }</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>                        cosmos_throw (FileError(prefix, <span class="stringliteral">&quot;mkdir()&quot;</span>));</div>
<div class="line"><span class="lineno">  334</span>                }</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>                <span class="comment">// at least one directory was created</span></div>
<div class="line"><span class="lineno">  337</span>                ret = Errno::NO_ERROR;</div>
<div class="line"><span class="lineno">  338</span>        }</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  341</span>}</div>
<div class="ttc" id="aerrno_8hxx_html_a5c1aef3a972b5a9a3bb6b3df1aa01939"><div class="ttname"><a href="errno_8hxx.html#a5c1aef3a972b5a9a3bb6b3df1aa01939">cosmos::Errno</a></div><div class="ttdeci">Errno</div><div class="ttdoc">Strong enum type representing errno error constants.</div><div class="ttdef"><b>Definition</b> <a href="errno_8hxx_source.html#l00029">errno.hxx:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fba2ed674993063d43d9b70ba054ff5" name="a7fba2ed674993063d43d9b70ba054ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fba2ed674993063d43d9b70ba054ff5">&#9670;&#160;</a></span>make_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::make_dir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a directory at the given location. </p>
<p>This attempts to create a single new directory at the given <code>path</code>. The parent directory must already exist, otherwise a FileError is thrown.</p>
<p>The given <code>mode</code> determines the permissions of the newly created directory. The permissions are modified by the process's umask (mode = mode * &amp; ~umask) </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00282">282</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  282</span>                                                         {</div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">if</span> (::mkdir(path.raw(), to_integral(mode.raw())) != 0) {</div>
<div class="line"><span class="lineno">  284</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;mkdir()&quot;</span>));</div>
<div class="line"><span class="lineno">  285</span>        }</div>
<div class="line"><span class="lineno">  286</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a698fbf13abbc24b3e5317bef003fb433" name="a698fbf13abbc24b3e5317bef003fb433"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698fbf13abbc24b3e5317bef003fb433">&#9670;&#160;</a></span>make_dir_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::make_dir_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a directory at the location relative to <code>dir_fd</code>. </p>
<p>This relates to make_dir() the same way unlink_file_at() relates to unlink_file().</p>
<dl class="section see"><dt>See also</dt><dd>unlink_file_at(). </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00288">288</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>                                                                                {</div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">if</span> (::mkdirat(to_integral(dir_fd.raw()), path.raw(), to_integral(mode.raw())) != 0) {</div>
<div class="line"><span class="lineno">  290</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;mkdirat()&quot;</span>));</div>
<div class="line"><span class="lineno">  291</span>        }</div>
<div class="line"><span class="lineno">  292</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a898d857f5f63cb941c176f60626a2c1d" name="a898d857f5f63cb941c176f60626a2c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898d857f5f63cb941c176f60626a2c1d">&#9670;&#160;</a></span>make_fifo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::make_fifo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a named pipe at the given file system location. </p>
<p>A named pipe is identical to a <a class="el" href="classcosmos_1_1Pipe.html" title="Creates a unidirectional pipe communication channel.">cosmos::Pipe</a>, only that is has a visible name in the file system. Unrelated processes can exchange data via the pipe this way.</p>
<p>The file system entry carries the usual UNIX permissions that will be initialized by combining <code>mode</code> with the calling process's umask.</p>
<p>Opening named pipes will block both for reading and writing as long as no communication partner exists. When opening a named pipe in non-blocking mode will succeed for OpenMode::READ_ONLY even if no writer is present yet. For OpenMode::WRITE_ONLY an error Errno::NXIO is returned in the non-blocking case. As a special case on Linux when opening the pipe with OpenMode::READ_WRITE will succeed regardless of blocking or non-blocking mode. This allows to open the pipe for writing while there are no readers available.</p>
<p>The underlying system call for this is <code>mknod()</code> which will never follow symlinks or reuse existing files. Instead an error is thrown if the path already exists in any form. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00147">147</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span>                                                          {</div>
<div class="line"><span class="lineno">  148</span>        <span class="keyword">auto</span> res = ::mkfifo(path.raw(), to_integral(mode.raw()));</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>        <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno">  151</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;mkfifo()&quot;</span>));</div>
<div class="line"><span class="lineno">  152</span>        }</div>
<div class="line"><span class="lineno">  153</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a631454468b12e6f34e4f563e11e530f7" name="a631454468b12e6f34e4f563e11e530f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a631454468b12e6f34e4f563e11e530f7">&#9670;&#160;</a></span>make_fifo_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::make_fifo_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a named pipe relative to the given directory descriptor. </p>
<p>This behaves like make_fifo with the usual _at semantics:</p>
<ul>
<li>if <code>path</code> is absolute then <code>dir_fd</code> is ignored.</li>
<li>if <code>path</code> is relative then it is interpreted relative to <code>dir_fd</code>.</li>
<li>if <code>path</code> is relative and <code>dir_fd</code> has the special value cosmos::AT_CWD then it is interpreted relative to the current working directory. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00155">155</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  156</span>                                     {</div>
<div class="line"><span class="lineno">  157</span>        <span class="keyword">auto</span> res = ::mkfifoat(to_integral(dir_fd.raw()), path.raw(), to_integral(mode.raw()));</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno">  160</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;mkfifoat()&quot;</span>));</div>
<div class="line"><span class="lineno">  161</span>        }</div>
<div class="line"><span class="lineno">  162</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e11bf44ba09aee3707f8b820ce5da6b" name="a2e11bf44ba09aee3707f8b820ce5da6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e11bf44ba09aee3707f8b820ce5da6b">&#9670;&#160;</a></span>make_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::make_symlink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a symbolic link at <code>path</code> pointing to <code>target</code>. </p>
<p>A symbolic link is simply a pointer to another file system location as provided in <code>target</code>. Leading ".." components in <code>target</code> will refer to the parent directories of <code>path</code>.</p>
<p>The permission bits (FileMode) of a symlink are ignored by Linux. The user and group ownership are ignored when dereferencing a symlink, except for when the protected_symlinks feature is enabled (see proc(5); the feature is enabled on most Linux systems these days). The ownership is also relevant for renaming or removing a symlink.</p>
<p>If an error occurs then a FileError is thrown. Common errors are:</p>
<ul>
<li>access denied to <code>path</code>. Either search access in the initial components or write access to the final directory component (Errno::ACCESS).</li>
<li>the file system does not allow the creation of symbolic links (Errno::PERMISSION).</li>
<li>Earlier parts of <code>path</code> do not exist or <code>target</code> is empty (Errno::NO_ENTRY).</li>
<li><code>path</code> already exists (Errno::EXISTS). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00470">470</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  470</span>                                                                {</div>
<div class="line"><span class="lineno">  471</span>        <span class="keywordflow">if</span> (::symlink(target.raw(), path.raw()) != 0) {</div>
<div class="line"><span class="lineno">  472</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;symlink()&quot;</span>));</div>
<div class="line"><span class="lineno">  473</span>        }</div>
<div class="line"><span class="lineno">  474</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5125abb2183629bef55a32953b8f38e2" name="a5125abb2183629bef55a32953b8f38e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5125abb2183629bef55a32953b8f38e2">&#9670;&#160;</a></span>make_symlink_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::make_symlink_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a symbolic link relative to <code>dir_fd</code> pointing to <code>target</code>. </p>
<p>This behaves just like make_symlink(). It relates to make_symlink() the same way unlink_file_at() relates to unlink_file(). </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00476">476</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  477</span>                                      {</div>
<div class="line"><span class="lineno">  478</span>        <span class="keywordflow">if</span> (::symlinkat(target.raw(), to_integral(dir_fd.raw()), path.raw()) != 0) {</div>
<div class="line"><span class="lineno">  479</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;symlinkat()&quot;</span>));</div>
<div class="line"><span class="lineno">  480</span>        }</div>
<div class="line"><span class="lineno">  481</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f26c47a510a6331bea07c9eeebe3802" name="a0f26c47a510a6331bea07c9eeebe3802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f26c47a510a6331bea07c9eeebe3802">&#9670;&#160;</a></span>make_tempdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::string cosmos::fs::make_tempdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>_template</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Safely create a temporary directory and return it's path. </p>
<p>This is similar to make_tempfile(). <code>_template</code> is the relative or absolute path to use as a template for the to be created directory. The basename of the path will be expanded with a random string. An empty basename is not allowed.</p>
<p>The created directory will receive a mode of 0700.</p>
<p>The returned string contains the expanded <code>_template</code>. It is the caller's responsibility to remove the directory from the file system again at the appropriate time.</p>
<dl class="section see"><dt>See also</dt><dd>TempDir for a convenience type that transparently handles removal of the temporary directory. </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00134">134</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  134</span>                                                  {</div>
<div class="line"><span class="lineno">  135</span>        <span class="comment">// there&#39;s no way to have the X&#39;s in the middle of the basename like</span></div>
<div class="line"><span class="lineno">  136</span>        <span class="comment">// with mkostemps().</span></div>
<div class="line"><span class="lineno">  137</span>        std::string expanded{_template};</div>
<div class="line"><span class="lineno">  138</span>        expanded += <span class="stringliteral">&quot;XXXXXX&quot;</span>;</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">if</span> (::mkdtemp(expanded.data()) == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  141</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;mkdtemp()&quot;</span>));</div>
<div class="line"><span class="lineno">  142</span>        }</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordflow">return</span> expanded;</div>
<div class="line"><span class="lineno">  145</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fb649e2169ef4406dd298d5f9c53d8d" name="a9fb649e2169ef4406dd298d5f9c53d8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb649e2169ef4406dd298d5f9c53d8d">&#9670;&#160;</a></span>make_tempfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::pair&lt; FileDescriptor, std::string &gt; cosmos::fs::make_tempfile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>_template</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a>{<a class="el" href="fs_2types_8hxx.html#aa65904a13ec31d33634f5870151cece2a009eaa7119fb4c83c5e487874d7e2218">OpenFlag::CLOEXEC</a>}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Safely create a temporary file and return it's file descriptor and path. </p>
<p><code>_template</code> needs to be a template for the path to use for the temporary file. It can be an absolute or a relative path. The path determines the directory where the temporary file will be created in. The template also needs to contain a basename on which the actual file path will be based. You can place a pair of "{}" in the basename to mark the position in the path where a unique random still will be inserted. The last occurrence of "{}" will be used for this. If no such substring is found in the basename then the unique random still will be added as a suffix to the basename.</p>
<p>It is an error to use a zero-length basename which will cause an exception to be thrown.</p>
<p>The <code>flags</code> argument can specify optional additional open flags to be applied when opening the temporary file. The implementation will implicitly use OpenMode::READ_WRITE and OpenFlag::CREATE and OpenFlag::EXCLUSIVE. These should <em>not</em> be set in <code>flags</code>. The file will have the permissions ModeT{0600}.</p>
<p>On success this call returns a pair consisting of the newly opened file descriptor corresponding to the temporary file, and the expanded filename under which the temporary file has been created.</p>
<p>It is the caller's responsibility to correctly close the returned FileDescriptor and to delete the temporary file (using unlink_file()) once it is no longer needed. The <a class="el" href="classcosmos_1_1TempFile.html" title="Specialization of FileBase for managing temporary files.">cosmos::TempFile</a> class takes care of these tasks, if necessary. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00120">120</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  121</span>                                                                  {</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>        <span class="keyword">auto</span> [path, suffixlen] = expand_temp_path(_template);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>        <span class="keyword">const</span> <span class="keyword">auto</span> fd = ::mkostemps(path.data(), suffixlen, flags.raw());</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">if</span> (fd == -1) {</div>
<div class="line"><span class="lineno">  128</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;mkostemps()&quot;</span>));</div>
<div class="line"><span class="lineno">  129</span>        }</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">return</span> {FileDescriptor{<a class="code hl_enumeration" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a>{fd}}, path};</div>
<div class="line"><span class="lineno">  132</span>}</div>
<div class="ttc" id="afs_2types_8hxx_html_a468b915608e0674d5789c5386b72ff92"><div class="ttname"><a href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">cosmos::FileNum</a></div><div class="ttdeci">FileNum</div><div class="ttdoc">Primitive file descriptor.</div><div class="ttdef"><b>Definition</b> <a href="fs_2types_8hxx_source.html#l00032">types.hxx:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a07a512199682e4521e6be47a15a992d5" name="a07a512199682e4521e6be47a15a992d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a512199682e4521e6be47a15a992d5">&#9670;&#160;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API FileDescriptor cosmos::fs::open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#afe1708354398da6bbdde42f1cb5c1d1e">OpenMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::optional&lt; <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>fmode</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file using specific OpenFlags, potentially creating it first using the given <code>fmode</code>. </p>
<dl class="section warning"><dt>Warning</dt><dd>If used for creating a file, then you need to specify also the FileMode in that case. An exception will the thrown if this condition is violated.</dd></dl>
<p>The returned FileDescriptor object does not manage the lifetime of the file descriptor, you have to take care of closing it at the appropriate time yourself! </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00034">34</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>                                                                          {</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">if</span> (flags.anyOf({OpenFlag::CREATE, OpenFlag::TMPFILE}) &amp;&amp; !fmode) {</div>
<div class="line"><span class="lineno">   39</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;the given open flags require an fmode argument&quot;</span>));</div>
<div class="line"><span class="lineno">   40</span>        }</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>        <span class="keywordtype">int</span> raw_flags = flags.raw() | to_integral(mode);</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>        <span class="keyword">auto</span> fd = ::open(path.raw(), raw_flags, fmode ? to_integral(fmode.value().raw()) : 0);</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">if</span> (fd == -1) {</div>
<div class="line"><span class="lineno">   48</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;open&quot;</span>));</div>
<div class="line"><span class="lineno">   49</span>        }</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>        <span class="keywordflow">return</span> FileDescriptor{<a class="code hl_enumeration" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a>{fd}};</div>
<div class="line"><span class="lineno">   52</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cce00bc61a7afc23ad40f1877d8deea" name="a6cce00bc61a7afc23ad40f1877d8deea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cce00bc61a7afc23ad40f1877d8deea">&#9670;&#160;</a></span>open_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API FileDescriptor cosmos::fs::open_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#afe1708354398da6bbdde42f1cb5c1d1e">OpenMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="fs_2types_8hxx.html#aae7788b537879e076a546967c72b4922">OpenFlags</a></td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::optional&lt; <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>fmode</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open the given path relative to the given directory file descriptor <code>dir_fd</code>. </p>
<p>This open variant behaves similar to open(const SysString,,
const OpenMode, const OpenFlags, const std::optional&lt;FileMode&gt;). The following differences exist:</p>
<ul>
<li>if <code>path</code> is an absolute path then <code>dir_fd</code> is ignored and the behaviour is identical to the other open variants.</li>
<li>if <code>path</code> is a relative path and <code>dir_fd</code> is an invalid file descriptor then the open fails (this can explicitly be used to enforce absolute path specifications.</li>
<li>if <code>path</code> is a relative path and <code>dir_fd</code> is a valid directory file descriptor, then the path is looked up relative to <code>dir_fd</code>. <code>dir_fd</code> needs to be opened with OpenMode::READ_ONLY or with OpenFlag::PATH. The special DirFD value cosmos::AT_CWD can be used to open files relative to the current working directory. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00054">54</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>                                                   {</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordtype">int</span> raw_flags = flags.raw() | to_integral(mode);</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>        <span class="keywordflow">if</span> (flags.anyOf({OpenFlag::CREATE, OpenFlag::TMPFILE}) &amp;&amp; !fmode) {</div>
<div class="line"><span class="lineno">   61</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;the given open flags require an fmode argument&quot;</span>));</div>
<div class="line"><span class="lineno">   62</span>        }</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>        <span class="keyword">auto</span> fd = ::openat(to_integral(dir_fd.raw()), path.raw(),</div>
<div class="line"><span class="lineno">   65</span>                                raw_flags, fmode ? to_integral(fmode.value().raw()) : 0);</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">if</span> (fd == -1) {</div>
<div class="line"><span class="lineno">   68</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;openat&quot;</span>));</div>
<div class="line"><span class="lineno">   69</span>        }</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">return</span> FileDescriptor{<a class="code hl_enumeration" href="fs_2types_8hxx.html#a468b915608e0674d5789c5386b72ff92">FileNum</a>{fd}};</div>
<div class="line"><span class="lineno">   72</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0bae83ddf108f3040724bfbe5c78888a" name="a0bae83ddf108f3040724bfbe5c78888a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bae83ddf108f3040724bfbe5c78888a">&#9670;&#160;</a></span>read_symlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::string cosmos::fs::read_symlink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the target (content) of the symbolic link at <code>path</code>. </p>
<p>This returns the target path of the symlink present at the given <code>path</code>.</p>
<p>If an error occurs then a FileError is thrown. Common errors are:</p>
<ul>
<li>access denied (Errno::ACCESS)</li>
<li>invalid argument if <code>path</code> is not a symlink (Errno::INVALID_ARG)</li>
<li>no entry if <code>path</code> does not exist (Errno::NO_ENTRY) </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00515">515</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  515</span>                                             {</div>
<div class="line"><span class="lineno">  516</span>        <span class="keywordflow">return</span> read_symlink(path, <span class="stringliteral">&quot;readlink()&quot;</span>, ::readlink);</div>
<div class="line"><span class="lineno">  517</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aae0fb212fcf2f872f0b926e2a4f32bfb" name="aae0fb212fcf2f872f0b926e2a4f32bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae0fb212fcf2f872f0b926e2a4f32bfb">&#9670;&#160;</a></span>read_symlink_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::string cosmos::fs::read_symlink_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the target (content) of the symbolic link <code>path</code> relative to <code>dir_fd</code>. </p>
<p>This relates to read_symlink() the same way unlink_file_at() relates to unlink_file().</p>
<dl class="section see"><dt>See also</dt><dd>unlink_file_at(). </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00519">519</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  519</span>                                                                    {</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>        <span class="keyword">auto</span> readlink_func = [&amp;](<span class="keyword">const</span> <span class="keywordtype">char</span> *p, <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> size) {</div>
<div class="line"><span class="lineno">  522</span>                return ::readlinkat(to_integral(dir_fd.raw()), p, buf, size);</div>
<div class="line"><span class="lineno">  523</span>        };</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>        <span class="keywordflow">return</span> read_symlink(path, <span class="stringliteral">&quot;readlinkat()&quot;</span>, readlink_func);</div>
<div class="line"><span class="lineno">  526</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf37aa6e8cfdf226891edaf3e2497fe4" name="aaf37aa6e8cfdf226891edaf3e2497fe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf37aa6e8cfdf226891edaf3e2497fe4">&#9670;&#160;</a></span>remove_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::remove_dir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes an empty directory at the given location. </p>
<p>The directory must exist and must be empty for the call to succeed. On error a FileError is thrown. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00294">294</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  294</span>                                      {</div>
<div class="line"><span class="lineno">  295</span>        <span class="keywordflow">if</span> (::rmdir(path.raw()) != 0) {</div>
<div class="line"><span class="lineno">  296</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;rmdir()&quot;</span>));</div>
<div class="line"><span class="lineno">  297</span>        }</div>
<div class="line"><span class="lineno">  298</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab16b17e2a1b67b8c6a53fcccf007bcfb" name="ab16b17e2a1b67b8c6a53fcccf007bcfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab16b17e2a1b67b8c6a53fcccf007bcfb">&#9670;&#160;</a></span>remove_dir_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::remove_dir_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes an empty directory relative to <code>dir_fd</code>. </p>
<p>This relates to remove_dir() the same way unlink_file_at() relates to unlink_file().</p>
<dl class="section see"><dt>See also</dt><dd>unlink_file_at(). </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00300">300</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  300</span>                                                             {</div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">if</span> (::unlinkat(to_integral(dir_fd.raw()), path.raw(), AT_REMOVEDIR) != 0) {</div>
<div class="line"><span class="lineno">  302</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;unlinkat(AT_REMOVEDIR)&quot;</span>));</div>
<div class="line"><span class="lineno">  303</span>        }</div>
<div class="line"><span class="lineno">  304</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a46c2805520ffadd26df9686ee2b83f89" name="a46c2805520ffadd26df9686ee2b83f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c2805520ffadd26df9686ee2b83f89">&#9670;&#160;</a></span>remove_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::remove_tree </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively removes all directory content in <code>path</code>. </p>
<p>This function recursively removes all content in <code>path</code>. It is expected that as least <code>path</code> itself exists and is a directory, otherwise an exception is thrown.</p>
<p>If an error occurs while removing any of the descendant path elements then a FileError is thrown and the state of the directory tree is undefined. Note that using this function with concurrently file system access from within the calling or another process in the system can cause race conditions that leads to undefined behaviour. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00385">385</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  385</span>                                       {</div>
<div class="line"><span class="lineno">  386</span>        DirStream dir{path};</div>
<div class="line"><span class="lineno">  387</span>        remove_tree(dir);</div>
<div class="line"><span class="lineno">  388</span>        remove_dir(path);</div>
<div class="line"><span class="lineno">  389</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a88c99845d5b4d013db51b3ad56376a29" name="a88c99845d5b4d013db51b3ad56376a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88c99845d5b4d013db51b3ad56376a29">&#9670;&#160;</a></span>set_umask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API FileMode cosmos::fs::set_umask </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileMode.html">FileMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the process's file creation mask. </p>
<p>The file creation mask is a process wide attribute that determines an upper limit of the file permission bits that are set on newly created files and directories. Most prominently this affects files created via open() and directories created via mkdir(). Even if more open permissions are specified in these system calls, the bits will be switched off if they are also present in the process's umask. The file permission bits are calculated as (<code>&lt;mode&gt; &amp; ~umask</code>) i.e. bits that are set in the umask will be set to zero during file creation.</p>
<p>Since this is a process wide attribute it will affect all threads in the process and can thus cause race conditions. If necessary, you should set the umask in the main thread of a program early on.</p>
<p>Only the lower 9 bits of <code>mode</code> will be taken into account (i.e. owner/group/other permissions bits). If any other bits are set then an UsageError exception is thrown.</p>
<p>The umask is inherited across fork() and is not changed during execve().</p>
<p>Other system calls that make use of the umask are the creation of POSIX IPC objects (message queues, semaphores, shared memory), named pipes, and UNIX domain sockets. It is <em>not</em> used by SYSV IPC objects.</p>
<dl class="section return"><dt>Returns</dt><dd>The umask that was previously in effect. To only read the current process's umask you need to read the proc file system in <code>/proc/&lt;pid&gt;/status</code> (umask is available there since Linux 4.7). </dd></dl>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00164">164</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span>                                        {</div>
<div class="line"><span class="lineno">  165</span>        <span class="keyword">auto</span> raw_mode = to_integral(mode.raw());</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">if</span> ((raw_mode &amp; ~0777) != 0) {</div>
<div class="line"><span class="lineno">  168</span>                cosmos_throw (UsageError(<span class="stringliteral">&quot;invalid bits set in umask&quot;</span>));</div>
<div class="line"><span class="lineno">  169</span>        }</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>        <span class="keyword">auto</span> old_mode = ::umask(raw_mode);</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">return</span> FileMode{<a class="code hl_enumeration" href="fs_2types_8hxx.html#ad31b56fd66b33b1c4c9d01f782aa6c51">ModeT</a>{old_mode}};</div>
<div class="line"><span class="lineno">  174</span>}</div>
<div class="ttc" id="afs_2types_8hxx_html_ad31b56fd66b33b1c4c9d01f782aa6c51"><div class="ttname"><a href="fs_2types_8hxx.html#ad31b56fd66b33b1c4c9d01f782aa6c51">cosmos::ModeT</a></div><div class="ttdeci">ModeT</div><div class="ttdoc">Combined file type and mode bits of a file (as found in st_mode struct stat).</div><div class="ttdef"><b>Definition</b> <a href="fs_2types_8hxx_source.html#l00106">types.hxx:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7f17a641dec61afafd25e05c351efbe" name="ac7f17a641dec61afafd25e05c351efbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7f17a641dec61afafd25e05c351efbe">&#9670;&#160;</a></span>truncate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::truncate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1FileDescriptor.html">FileDescriptor</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the file size of the file referred to by <code>fd</code> to <code>length</code> bytes. </p>
<p>If <code>length</code> is smaller than the current file size, then the extra data stored in the file is lost. If <code>length</code> is larger than the current file size, then the extra data reads as zero bytes.</p>
<p>This operation requires the file to be opened for writing. A successful operation causes the inode of the file to be updated. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00572">572</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  572</span>                                                     {</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">if</span> (::ftruncate(to_integral(fd.raw()), length) != 0) {</div>
<div class="line"><span class="lineno">  574</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;ftruncate()&quot;</span>));</div>
<div class="line"><span class="lineno">  575</span>        }</div>
<div class="line"><span class="lineno">  576</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afe292e033959e0e6d2cf7d5c84b6729c" name="afe292e033959e0e6d2cf7d5c84b6729c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe292e033959e0e6d2cf7d5c84b6729c">&#9670;&#160;</a></span>truncate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::truncate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the file size of the file found at the given <code>path</code> to <code>length</code> bytes. </p>
<p>Behaves just like truncate(const FileDescriptor, off_t), with the difference that the operation is performed on the given path. The file must be writable. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00578">578</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  578</span>                                                  {</div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">if</span> (::truncate(path.raw(), length) != 0) {</div>
<div class="line"><span class="lineno">  580</span>                cosmos_throw (ApiError(<span class="stringliteral">&quot;truncate()&quot;</span>));</div>
<div class="line"><span class="lineno">  581</span>        }</div>
<div class="line"><span class="lineno">  582</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b2b114bde65e1ab82ffa035809883a0" name="a4b2b114bde65e1ab82ffa035809883a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b2b114bde65e1ab82ffa035809883a0">&#9670;&#160;</a></span>unlink_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::unlink_file </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the file object found at <code>path</code>. </p>
<p>This function removes the file object found at <code>path</code> from the file system. Processes that already have opened the file can continue using it, but the name is removed from the file system.</p>
<p>This call does not work with directories, use remove_dir() for them instead.</p>
<p>If the <code>path</code> does not exist then this is considered an error and an exception is thrown. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00186">186</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  186</span>                                       {</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">if</span> (::unlink(path.raw()) != 0) {</div>
<div class="line"><span class="lineno">  188</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;unlink()&quot;</span>));</div>
<div class="line"><span class="lineno">  189</span>        }</div>
<div class="line"><span class="lineno">  190</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e208eb32b83503e6adda5af652ff7e5" name="a3e208eb32b83503e6adda5af652ff7e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e208eb32b83503e6adda5af652ff7e5">&#9670;&#160;</a></span>unlink_file_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API void cosmos::fs::unlink_file_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcosmos_1_1DirFD.html">DirFD</a></td>          <td class="paramname"><span class="paramname"><em>dir_fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcosmos_1_1SysString.html">SysString</a></td>          <td class="paramname"><span class="paramname"><em>path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the file object found at <code>path</code> relative to <code>dir_fd</code>. </p>
<p>This behaves similar to unlink_file():</p>
<ul>
<li>if path is an absolute path then <code>dir_fd</code> is ignored and the call is equivalent to unlink_file().</li>
<li>if path is a relative path and <code>dir_fd</code> has the special value cosmos::AT_CWD, then <code>path</code> is looked up relative to the current working directory, equivalent to unlink_file().</li>
<li>if path is a relative path and <code>dir_fd</code> is a valid open directory file descriptor then <code>path</code> is looked up relative to that directory. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00192">192</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  192</span>                                                              {</div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">if</span> (::unlinkat(to_integral(dir_fd.raw()), path.raw(), 0) != 0) {</div>
<div class="line"><span class="lineno">  194</span>                cosmos_throw (FileError(path, <span class="stringliteral">&quot;unlinkat()&quot;</span>));</div>
<div class="line"><span class="lineno">  195</span>        }</div>
<div class="line"><span class="lineno">  196</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b169f23cb68754a41bc36a14e141950" name="a3b169f23cb68754a41bc36a14e141950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b169f23cb68754a41bc36a14e141950">&#9670;&#160;</a></span>which()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">COSMOS_API std::optional&lt; std::string &gt; cosmos::fs::which </td>
          <td>(</td>
          <td class="paramtype">const std::string_view</td>          <td class="paramname"><span class="paramname"><em>exec_base</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the full path to the executable program <code>exec_base</code>. </p>
<p>This function looks in all directories listed in the PATH environment variable for an executable named <code>exec_base</code>. If one is found then the full path to this executable is returned.</p>
<p>If <code>exec_base</code> is an absolute path then it is only checked whether the path (symlinks are followed) is accessible and executable and returns it unmodified if this is the case.</p>
<p>If the program cannot be found or is not accessible then {} is returned. This function does not throw exceptions, on error {} is returned. </p>

<p class="definition">Definition at line <a class="el" href="filesystem_8cxx_source.html#l00229">229</a> of file <a class="el" href="filesystem_8cxx_source.html">filesystem.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  229</span>                                                                      {</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>        <span class="keyword">auto</span> checkExecutable = [](<span class="keyword">const</span> std::string &amp;path) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><span class="lineno">  232</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  233</span>                        File f{path, OpenMode::READ_ONLY};</div>
<div class="line"><span class="lineno">  234</span>                        FileStatus status;</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>                        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  237</span>                                status.updateFrom(f.fd());</div>
<div class="line"><span class="lineno">  238</span>                        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> CosmosError &amp;) {</div>
<div class="line"><span class="lineno">  239</span>                                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  240</span>                        }</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>                        <span class="keywordflow">if</span> (!status.type().isRegular())</div>
<div class="line"><span class="lineno">  243</span>                                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  244</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!status.mode().canAnyExec())</div>
<div class="line"><span class="lineno">  245</span>                                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  248</span>                } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  249</span>                        <span class="comment">// probably a permission, I/O error, or NO_ENTRY error</span></div>
<div class="line"><span class="lineno">  250</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  251</span>                }</div>
<div class="line"><span class="lineno">  252</span>        };</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        <span class="keywordflow">if</span> (exec_base.empty())</div>
<div class="line"><span class="lineno">  255</span>                <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">if</span> (exec_base.front() == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><span class="lineno">  258</span>                <span class="comment">// check absolute path and be done with it</span></div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordflow">if</span> (checkExecutable(std::string{exec_base})) {</div>
<div class="line"><span class="lineno">  260</span>                       <span class="keywordflow">return</span> {std::string{exec_base}};</div>
<div class="line"><span class="lineno">  261</span>                }</div>
<div class="line"><span class="lineno">  262</span>                <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  263</span>        }</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>        <span class="keyword">const</span> <span class="keyword">auto</span> pathvar = proc::get_env_var(<span class="stringliteral">&quot;PATH&quot;</span>);</div>
<div class="line"><span class="lineno">  266</span>        <span class="keywordflow">if</span> (!pathvar)</div>
<div class="line"><span class="lineno">  267</span>                <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>        <span class="keyword">const</span> <span class="keyword">auto</span> paths = split(*pathvar, <span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;dir: paths) {</div>
<div class="line"><span class="lineno">  272</span>                <span class="keyword">auto</span> path = dir + <span class="stringliteral">&quot;/&quot;</span> + std::string{exec_base};</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>                <span class="keywordflow">if</span> (checkExecutable(path)) {</div>
<div class="line"><span class="lineno">  275</span>                        <span class="keywordflow">return</span> {path};</div>
<div class="line"><span class="lineno">  276</span>                }</div>
<div class="line"><span class="lineno">  277</span>        }</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  280</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_203f267fac8cf3dfe9f5770a10d988c8.html">fs</a></li><li class="navelem"><a class="el" href="filesystem_8hxx.html">filesystem.hxx</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
