<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosmos: include/cosmos.hxx File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosmos
   </div>
   <div id="projectbrief">Linux C++ System Programming Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('include_2cosmos_8hxx.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cosmos.hxx File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;cosmos/dso_export.h&gt;</code><br />
</div>
<p><a href="include_2cosmos_8hxx_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcosmos_1_1Init.html">cosmos::Init</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience initialization object.  <a href="structcosmos_1_1Init.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a43233384d0b3a2d70fa03459623200dc" id="r_a43233384d0b3a2d70fa03459623200dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cosmos_8cxx.html#a43233384d0b3a2d70fa03459623200dc">cosmos::init</a> ()</td></tr>
<tr class="memdesc:a43233384d0b3a2d70fa03459623200dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the cosmos library before first use.  <br /></td></tr>
<tr class="separator:a43233384d0b3a2d70fa03459623200dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76824050383061162250da63c3c72deb" id="r_a76824050383061162250da63c3c72deb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cosmos_8cxx.html#a76824050383061162250da63c3c72deb">cosmos::finish</a> ()</td></tr>
<tr class="memdesc:a76824050383061162250da63c3c72deb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undo initialization of init().  <br /></td></tr>
<tr class="separator:a76824050383061162250da63c3c72deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69527474d5d6b007a896efc20158fd1f" id="r_a69527474d5d6b007a896efc20158fd1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cosmos_8cxx.html#a69527474d5d6b007a896efc20158fd1f">cosmos::set_restart_syscall_on_interrupt</a> (const bool auto_restart)</td></tr>
<tr class="memdesc:a69527474d5d6b007a896efc20158fd1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This controls library behaviour upon EINTR returns from certain system calls.  <br /></td></tr>
<tr class="separator:a69527474d5d6b007a896efc20158fd1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This header contains the API for global library initialization and other global library settings. </p>

<p class="definition">Definition in file <a class="el" href="include_2cosmos_8hxx_source.html">cosmos.hxx</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a76824050383061162250da63c3c72deb" name="a76824050383061162250da63c3c72deb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76824050383061162250da63c3c72deb">&#9670;&#160;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void COSMOS_API cosmos::finish </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Undo initialization of init(). </p>

<p class="definition">Definition at line <a class="el" href="cosmos_8cxx_source.html#l00104">104</a> of file <a class="el" href="cosmos_8cxx_source.html">cosmos.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  104</span>              {</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> (--init_counter != 0)</div>
<div class="line"><span class="lineno">  106</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">if</span> (!init_data)</div>
<div class="line"><span class="lineno">  109</span>                <span class="comment">// no initables around</span></div>
<div class="line"><span class="lineno">  110</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>        init_data-&gt;finish();</div>
<div class="line"><span class="lineno">  113</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a43233384d0b3a2d70fa03459623200dc" name="a43233384d0b3a2d70fa03459623200dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43233384d0b3a2d70fa03459623200dc">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void COSMOS_API cosmos::init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the cosmos library before first use. </p>
<p>The initialization of the library is required before any other functionality of libcosmos is accessed. This initialization should occur after the main() function has been entered and not from within static initializers to avoid issues with static initialization order in executables / libraries.</p>
<p>Multiple initializations can be performed but finish() needs to be called the same number of times for cleanup to trigger. </p>

<p class="definition">Definition at line <a class="el" href="cosmos_8cxx_source.html#l00092">92</a> of file <a class="el" href="cosmos_8cxx_source.html">cosmos.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   92</span>            {</div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">if</span> (init_counter++ != 0)</div>
<div class="line"><span class="lineno">   94</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">if</span> (!init_data)</div>
<div class="line"><span class="lineno">   97</span>                <span class="comment">// no initables have been registered</span></div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        <span class="comment">// okay we need to perform initialization</span></div>
<div class="line"><span class="lineno">  101</span>        init_data-&gt;init();</div>
<div class="line"><span class="lineno">  102</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a69527474d5d6b007a896efc20158fd1f" name="a69527474d5d6b007a896efc20158fd1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69527474d5d6b007a896efc20158fd1f">&#9670;&#160;</a></span>set_restart_syscall_on_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void COSMOS_API cosmos::set_restart_syscall_on_interrupt </td>
          <td>(</td>
          <td class="paramtype">const bool</td>          <td class="paramname"><span class="paramname"><em>auto_restart</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This controls library behaviour upon EINTR returns from certain system calls. </p>
<p>In some situations system calls can return prematurely with an EINTR errno set. This can happen when an asynchronous signal is received in the process and automatic system call restarting was not configured for the signal handler (SA_RESTART). It is designed to allow userspace to react to the condition of a signal being received (to e.g. shutdown or refresh program state).</p>
<p>Some system calls can still return EINTR even if signal handlers specify SA_RESTART. Also a SIGSTOP/SIGSTOP sequence can cause EINTR to occur. See man(7) signal for the details.</p>
<p>libcosmos does not use asynchronous signal handling by itself since this involves many complexities that are difficult to manage. Since other components in the process might use asynchronous signal handling though, this library setting allows you to choose libcosmos's behaviour should an EINTR error occur. The default is to transparently ignore EINTR returns and restart the system call in question. If an application wants to explicitly deal with EINTR returns you can call change this setting to <code>false</code> which will cause ApiError() exceptions with the appropriate Errno::INTERRUPTED value to be thrown, left to be handled by the application.</p>
<p>This is a global setting that influences different kinds of libcosmos API calls. </p>

<p class="definition">Definition at line <a class="el" href="cosmos_8cxx_source.html#l00117">117</a> of file <a class="el" href="cosmos_8cxx_source.html">cosmos.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  117</span>                                                               {</div>
<div class="line"><span class="lineno">  118</span>        auto_restart_syscalls = RestartOnIntr{auto_restart};</div>
<div class="line"><span class="lineno">  119</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="include_2cosmos_8hxx.html">cosmos.hxx</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
